(self.AMP=self.AMP||[]).push({n:"amp-ad-network-adzerk-impl",v:"1533591342461",f:(function(AMP,_){
var g;function aa(a,b){function c(){}c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a;for(var d in b)if(Object.defineProperties){var e=Object.getOwnPropertyDescriptor(b,d);e&&Object.defineProperty(a,d,e)}else a[d]=b[d]}function m(a,b){b=void 0===b?"":b;try{return decodeURIComponent(a)}catch(c){return b}};var ba=/(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;function t(a){var b=Object.create(null);if(!a)return b;for(var c;c=ba.exec(a);){var d=m(c[1],c[1]),e=c[2]?m(c[2],c[2]):"";b[d]=e}return b};var ca="";function u(a){var b=a||self,c;if(b.AMP_MODE)c=b.AMP_MODE;else{c=b;var d=t(c.location.originalHash||c.location.hash),e=t(c.location.search);ca||(ca=c.AMP_CONFIG&&c.AMP_CONFIG.v?c.AMP_CONFIG.v:"011533591342461");c=b.AMP_MODE={localDev:!1,development:!("1"!=d.development&&!c.AMP_DEV_MODE),examiner:"2"==d.development,filter:d.filter,geoOverride:d["amp-geo"],minified:!0,lite:void 0!=e.amp_lite,test:!1,log:d.log,version:"1533591342461",rtvVersion:ca}}return c};var da=Object.prototype.toString;function fa(a){return"number"===typeof a&&isFinite(a)};function ga(a){var b=a.message,c=String(Math.random());a.message=c;if(a.message===c)return a.message=b,a;var b=Error(a.message),d;for(d in a)b[d]=a[d];b.stack=a.stack;return b}function ha(a){for(var b=null,c="",d=0;d<arguments.length;d++){var e=arguments[d];e instanceof Error&&!b?b=ga(e):(c&&(c+=" "),c+=e)}b?c&&(b.message=c+": "+b.message):b=Error(c);return b}function x(a){var b=ha.apply(null,arguments);setTimeout(function(){self.reportError(b);throw b;})}self.log=self.log||{user:null,dev:null,userForEmbed:null};
var A=self.log;function B(){if(!A.user)throw Error("failed to call initLogConstructor");return A.user}function C(){if(A.dev)return A.dev;throw Error("failed to call initLogConstructor");};var D=Object.prototype.hasOwnProperty;function E(){var a,b=Object.create(null);a&&Object.assign(b,a);return b}function F(a){return a||{}};function ia(a,b){return b.length>a.length?!1:0==a.lastIndexOf(b,0)};var G=self.AMP_CONFIG||{},ja={thirdParty:G.thirdPartyUrl||"https://3p.ampproject.net",thirdPartyFrameHost:G.thirdPartyFrameHost||"ampproject.net",thirdPartyFrameRegex:("string"==typeof G.thirdPartyFrameRegex?new RegExp(G.thirdPartyFrameRegex):G.thirdPartyFrameRegex)||/^d-\d+\.ampproject\.net$/,cdn:G.cdnUrl||"https://cdn.ampproject.org",cdnProxyRegex:("string"==typeof G.cdnProxyRegex?new RegExp(G.cdnProxyRegex):G.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/,localhostRegex:/^https?:\/\/localhost(:\d+)?$/,
errorReporting:G.errorReportingUrl||"https://amp-error-reporting.appspot.com/r",localDev:G.localDev||!1};function L(a){this.ea=a;this.V=this.Y=0;this.H=Object.create(null)}L.prototype.has=function(a){return!!this.H[a]};L.prototype.get=function(a){var b=this.H[a];if(b)return b.access=++this.V,b.payload};L.prototype.put=function(a,b){this.has(a)||this.Y++;this.H[a]={payload:b,access:this.V};if(!(this.Y<=this.ea)){C().warn("lru-cache","Trimming LRU cache");a=this.H;var c=this.V+1,d,e;for(e in a){var f=a[e].access;f<c&&(c=f,d=e)}void 0!==d&&(delete a[d],this.Y--)}};F({c:!0,v:!0,a:!0,ad:!0});var ka,la,ma=["javascript:","data:","vbscript:"];
function M(a,b){ka||(ka=self.document.createElement("a"),la=self.UrlCache||(self.UrlCache=new L(100)));var c=b?null:la,d=ka;if(c&&c.has(a))a=c.get(a);else{d.href=a;d.protocol||(d.href=d.href);var e={href:d.href,protocol:d.protocol,host:d.host,hostname:d.hostname,port:"0"==d.port?"":d.port,pathname:d.pathname,search:d.search,hash:d.hash,origin:null};"/"!==e.pathname[0]&&(e.pathname="/"+e.pathname);if("http:"==e.protocol&&80==e.port||"https:"==e.protocol&&443==e.port)e.port="",e.host=e.hostname;e.origin=
d.origin&&"null"!=d.origin?d.origin:"data:"!=e.protocol&&e.host?e.protocol+"//"+e.host:e.href;c&&c.put(a,e);a=e}return a}function na(a,b){var c;if(!b)return a;var d=a.split("#",2),e=d[0].split("?",2),f=e[0]+(e[1]?c?"?"+b+"&"+e[1]:"?"+e[1]+"&"+b:"?"+b);return f+=d[1]?"#"+d[1]:""}
function oa(a){var b=[],c;for(c in a){var d=a[c];if(null!=d)if(Array.isArray(d))for(var e=0;e<d.length;e++){var f=d[e];b.push(encodeURIComponent(c)+"="+encodeURIComponent(f))}else b.push(encodeURIComponent(c)+"="+encodeURIComponent(d))}return b.join("&")}function pa(a){"string"==typeof a&&(a=M(a));var b;(b="https:"==a.protocol||"localhost"==a.hostname)||(a=a.hostname,b=a.length-10,b=0<=b&&a.indexOf(".localhost",b)==b);return b}
function qa(a,b){var c;c=void 0===c?"source":c;B().assert(null!=a,"%s %s must be available",b,c);var d=a;B().assert(pa(d)||/^(\/\/)/.test(d),'%s %s must start with "https://" or "//" or be relative and served from either https or from localhost. Invalid value: %s',b,c,d)}function ra(a){if(!a)return!0;"string"==typeof a&&(a=M(a));return!ma.includes(a.protocol)};function sa(a,b){var c=ta(a);return!!c[b]}
function ta(a){if(a.__AMP__EXPERIMENT_TOGGLES)return a.__AMP__EXPERIMENT_TOGGLES;a.__AMP__EXPERIMENT_TOGGLES=Object.create(null);var b=a.__AMP__EXPERIMENT_TOGGLES;if(a.AMP_CONFIG)for(var c in a.AMP_CONFIG){var d=a.AMP_CONFIG[c];"number"===typeof d&&0<=d&&1>=d&&(b[c]=Math.random()<d)}if(a.AMP_CONFIG&&Array.isArray(a.AMP_CONFIG["allow-doc-opt-in"])&&0<a.AMP_CONFIG["allow-doc-opt-in"].length){var e=a.AMP_CONFIG["allow-doc-opt-in"],f=a.document.head.querySelector('meta[name="amp-experiments-opt-in"]');if(f){var k=
f.getAttribute("content").split(",");for(c=0;c<k.length;c++)-1!=e.indexOf(k[c])&&(b[k[c]]=!0)}}Object.assign(b,ua(a));if(a.AMP_CONFIG&&Array.isArray(a.AMP_CONFIG["allow-url-opt-in"])&&0<a.AMP_CONFIG["allow-url-opt-in"].length){c=a.AMP_CONFIG["allow-url-opt-in"];a=t(a.location.originalHash||a.location.hash);for(var h=0;h<c.length;h++){var l=a["e-"+c[h]];"1"==l&&(b[c[h]]=!0);"0"==l&&(b[c[h]]=!1)}}return b}
function ua(a){a:{var b;try{b=a.document.cookie}catch(k){b=""}if(a=b)for(a=a.split(";"),b=0;b<a.length;b++){var c=a[b].trim(),d=c.indexOf("=");if(-1!=d&&"AMP_EXP"==m(c.substring(0,d).trim(),void 0)){a=c.substring(d+1).trim();a=m(a,a);break a}}a=null}var e=a,f=e?e.split(/\s*,\s*/g):[];a=Object.create(null);for(b=0;b<f.length;b++)0!=f[b].length&&("-"==f[b][0]?a[f[b].substr(1)]=!1:a[f[b]]=!0);return a}
function va(a,b){a.experimentBranches=a.experimentBranches||{};var c={},d;for(d in b)if(D.call(b,d))if(D.call(a.experimentBranches,d))c[d]=a.experimentBranches[d];else if(!b[d].isTrafficEligible||!b[d].isTrafficEligible(a))a.experimentBranches[d]=null;else if(!a.experimentBranches[d]&&sa(a,d)){var e=b[d].branches,f=e;a.experimentBranches[d]=f[Math.floor(Math.random()*f.length)]||null;c[d]=a.experimentBranches[d]}};function wa(){var a,b;this.promise=new Promise(function(c,d){a=c;b=d});this.resolve=a;this.reject=b}function xa(a){return new Promise(function(b){b(a())})};function ya(a,b){if(a.nodeType){var c=za((a.ownerDocument||a).defaultView,b);if(c)return c}return N(a,b)}function Aa(a,b){var c=O(a);za(a,"url-replace");Ba(a,a,function(){return b});P(a,"url-replace")}function za(a,b){var c=O(a);return a!=c&&Ca(a,b)?P(a,b):null}function Q(a,b){a=O(a);return P(a,b)}function Da(a){var b=R(a),b=Ea(b);return P(b,"documentInfo")}function N(a,b){a=R(a);a=Ea(a);return P(a,b)}function Fa(a,b){return Ga(Ea(a),b)}function O(a){return a.__AMP_TOP||a}
function R(a){return a.nodeType?Q((a.ownerDocument||a).defaultView,"ampdoc").getAmpDoc(a):a}function Ea(a){a=R(a);return a.isSingleDoc()?a.win:a}function P(a,b){Ca(a,b);var c=T(a);a=c[b];a.obj||(a.obj=new a.ctor(a.context),a.ctor=null,a.context=null,a.resolve&&a.resolve(a.obj));return a.obj}function Ba(a,b,c){var d=T(a),e=d["url-replace"];e||(e=d["url-replace"]={obj:null,promise:null,resolve:null,context:null,ctor:null});e.ctor||e.obj||(e.ctor=c,e.context=b,e.resolve&&P(a,"url-replace"))}
function Ga(a,b){var c=T(a)[b];if(c){if(c.promise)return c.promise;P(a,b);return c.promise=Promise.resolve(c.obj)}return null}function T(a){var b=a.services;b||(b=a.services={});return b}function Ha(a){a=T(a);var b={},c;for(c in a)if(b.id=c,Object.prototype.hasOwnProperty.call(a,b.id)){var d=a[b.id];d.obj?Ia(b.id,d.obj):d.promise&&d.promise.then(function(a){return function(b){return Ia(a.id,b)}}(b));b={id:b.id}}}
function Ia(a,b){if("function"==typeof b.dispose)try{b.dispose()}catch(c){C().error("SERVICE","failed to dispose service",a,c)}}function Ca(a,b){a=a.services&&a.services[b];return!(!a||!a.ctor&&!a.obj)};/*
 https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
var Ja={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},Ka=/(&|<|>|"|'|`)/g;function U(a,b,c){a=a.createElement(b);for(var d in c)a.setAttribute(d,c[d]);return a}function La(a){return a?a.replace(Ka,Ma):a}function Ma(a){return Ja[a]};function Na(a,b,c){var d=R(a),e=Fa(a,b);return e?e:d.whenBodyAvailable().then(function(){var a;a=d.win;var b=d.getHeadNode(),e;if(b){e=[];for(var b=b.querySelectorAll("script[custom-element]"),l=0;l<b.length;l++)e.push(b[l].getAttribute("custom-element"))}else e=[];a=e.includes(c)?Q(a,"extensions").waitForExtension(a,c):Promise.resolve();return a}).then(function(){var e=d.win;if(e.ampExtendedElements&&e.ampExtendedElements[c]){var e=Ea(a),k=Ga(e,b);if(!k){var h=new wa,k=h.promise,h=h.resolve;T(e)[b]=
{obj:null,promise:k,resolve:h,context:null,ctor:null}}e=k}else e=null;return e})};function Oa(a){return Na(a,"amp-analytics-instrumentation","amp-analytics")}function Pa(a){return N(a,"resources")};function Qa(a){for(var b=a.nodeName,c=0,d=0,e=a.previousElementSibling;e&&25>d&&100>c;)e.nodeName==b&&d++,c++,e=e.previousElementSibling;return 25>d&&100>c?"."+d:""};var V;function Ra(a,b,c){var d=void 0,e=a,f=c,k;k=function(a){try{return f(a)}catch(q){throw self.reportError(q),q;}};var h=Sa(),l=!1;d&&(l=d.capture);e.addEventListener(b,k,h?d:l);return function(){e&&e.removeEventListener(b,k,h?d:l);k=e=f=null}}function Sa(){if(void 0!==V)return V;V=!1;try{var a={get capture(){V=!0}};self.addEventListener("test-options",null,a);self.removeEventListener("test-options",null,a)}catch(b){}return V};function Ta(a,b,c){var d=c,e=Ra(a,b,function(a){try{d(a)}finally{d=null,e()}});return e}function Ua(a){var b,c;if(a.complete||"complete"==a.readyState||a.document&&"complete"==a.document.readyState)return Promise.resolve(a);var d=new Promise(function(d,f){var e=a.tagName;b="AUDIO"===e||"VIDEO"===e?Ta(a,"loadstart",d):Ta(a,"load",d);e&&(c=Ta(a,"error",f))});return d.then(function(){c&&c();return a},function(){b&&b();var c=a;c&&c.src&&(c=c.src);throw B().createError("Failed to load:",c);})};function Va(a,b,c){return Ua(a).then(function(){return Wa(a,b,c)})}function Wa(a,b,c){var d=a.performance&&a.performance.timing;if(d&&0!=d.navigationStart){var e=void 0===c?d[b]:d[c]-d[b];if(fa(e)&&!(0>e))return e}}function Xa(a,b){var c=a.performance&&a.performance.navigation;if(c&&void 0!==c[b])return c[b]}function Ya(a){this.ampdoc=a;this.N=this.O=void 0;this.o=Object.create(null);this.T=!1;Za(this)}g=Ya.prototype;g.initialize=function(){};
g.get=function(a){this.T||(this.initialize(),this.T=!0);return this.o[a]};g.set=function(a,b){this.o[a]=this.o[a]||{sync:void 0,async:void 0};this.o[a].sync=b;this.N=this.O=void 0;return this};g.setAsync=function(a,b){this.o[a]=this.o[a]||{sync:void 0,async:void 0};this.o[a].async=b;this.N=this.O=void 0;return this};g.setBoth=function(a,b,c){return this.set(a,b).setAsync(a,c)};
g.getExpr=function(a,b,c){var d=this;this.T||(this.initialize(),this.T=!0);var e=a?Object.keys(a):null;if(e&&0<e.length){var f=Object.keys(this.o);e.forEach(function(a){void 0===d.o[a]&&f.push(a)});return $a(this,f,b,c)}this.O||b||(this.O=$a(this,Object.keys(this.o)));!this.N&&b&&(this.N=$a(this,Object.keys(this.o),b,c));return b?this.N:this.O};
function $a(a,b,c,d){Za(a)&&(b=b.filter(function(b){return Za(a).includes(b)}));d&&(b=b.filter(function(a){return d[a]}));b.sort(function(a,b){return b.length-a.length});var e=b.map(function(a){return"$"===a[0]?"\\"+a:a}).join("|"),f="\\$?("+e+")";c||(f+="(?:\\(((?:\\s*[0-9a-zA-Z-_.]*\\s*(?=,|\\)),?)*)\\s*\\))?");return new RegExp(f,"g")}
function Za(a){if(a.Z)return a.Z;var b=a.ampdoc.getRootNode().head;if(!b)return null;b=b.querySelector('meta[name="amp-allowed-url-macros"]');if(!b)return null;a.Z=b.getAttribute("content").split(",").map(function(a){return a.trim()});return a.Z};function ab(a){var b;try{return JSON.parse(a)}catch(c){b&&b(c)}};function bb(){}bb.prototype.maybeSelectExperiment=function(a,b,c,d){var e={};e[d]={isTrafficEligible:function(){return!0},branches:c};va(a,e);return a.experimentBranches?a.experimentBranches[d]:null};new bb;var cb={google:"https://cdn.ampproject.org/amp-ad-verifying-keyset.json","google-dev":"https://cdn.ampproject.org/amp-ad-verifying-keyset-dev.json",cloudflare:"https://amp.cloudflare.com/amp-ad-verifying-keyset.json","cloudflare-dev":"https://amp.cloudflare.com/amp-ad-verifying-keyset-dev.json"};var db,fb="Webkit webkit Moz moz ms O o".split(" ");function gb(a,b,c){if(ia(b,"--"))return b;db||(db=E());var d=db[b];if(!d||c){d=b;if(void 0===a[b]){var e=b.charAt(0).toUpperCase()+b.slice(1);a:{for(var f=0;f<fb.length;f++){var k=fb[f]+e;if(void 0!==a[k]){e=k;break a}}e=""}var h=e;void 0!==a[h]&&(d=h)}c||(db[b]=d)}return d}function hb(a,b){for(var c in b)a.style.setProperty(gb(b,c),b[c].toString(),"important")}function ib(a,b,c){var d;(b=gb(a.style,b,void 0))&&(a.style[b]=d?c+d:c)}
function jb(a,b){for(var c in b)ib(a,c,b[c])}function kb(a,b){var c={};b.forEach(function(a){c[a]=null});jb(a,c)};function lb(a,b,c){Oa(a).then(function(d){d&&d.triggerEventForTarget(a,b,c)})};self.AMPErrors=self.AMPErrors||[];function mb(a,b,c,d){return{left:a,top:b,width:c,height:d,bottom:b+d,right:a+c,x:a,y:b}};function nb(){this.j=null}g=nb.prototype;g.add=function(a){var b=this;this.j||(this.j=[]);this.j.push(a);return function(){b.remove(a)}};g.remove=function(a){this.j&&(a=this.j.indexOf(a),-1<a&&this.j.splice(a,1))};g.removeAll=function(){this.j&&(this.j.length=0)};g.fire=function(a){if(this.j)for(var b=this.j,c=0;c<b.length;c++)(0,b[c])(a)};g.getHandlerCount=function(){return this.j?this.j.length:0};var ob={"AMP-FX-FLYING-CARPET":!0,"AMP-LIGHTBOX":!0,"AMP-STICKY-AD":!0,"AMP-LIGHTBOX-GALLERY":!0};function pb(a){a=parseFloat(a);return fa(a)?a:void 0};function qb(a,b,c,d){var e=Date.now(),f=b.getAttribute("width"),k=b.getAttribute("height");d=d?d:{};d.width=pb(f);d.height=pb(k);b.getAttribute("title")&&(d.title=b.getAttribute("title"));var h=a.location.href;"about:srcdoc"==h&&(h=a.parent.location.href);var l=Da(b).get(),p=N(b,"viewer"),q=p.getUnconfirmedReferrerUrl(),v=b.getPageLayoutBox(),f=d,k=ja.thirdParty+"/1533591342461/ampcontext-v0.js",y=l.sourceUrl,z=l.canonicalUrl,n=l.pageViewId,r={href:h},H=b.tagName,S={localDev:!1,development:u(void 0).development,
filter:u(void 0).filter,minified:!0,lite:u(void 0).lite,test:!1,log:u(void 0).log,version:u(void 0).version,rtvVersion:u(void 0).rtvVersion},I=a,I=!(!I.AMP_CONFIG||!I.AMP_CONFIG.canary),p=!p.isVisible(),Yb=v?{left:v.left,top:v.top,width:v.width,height:v.height}:null,Zb=b.getIntersectionChangeEntry(),w;w=b;for(var ea=[],J=0;w&&1==w.nodeType&&25>J;){var K="";w.id&&(K="/"+w.id);ea.push(""+w.nodeName.toLowerCase()+K+Qa(w));J++;w=w.parentElement}w=ea.join();ea=w.length;J=5381;for(K=0;K<ea;K++)J=33*J^w.charCodeAt(K);
f._context=F({ampcontextVersion:"1533591342461",ampcontextFilepath:k,sourceUrl:y,referrer:q,canonicalUrl:z,pageViewId:n,location:r,startTime:e,tagName:H,mode:S,canary:I,hidden:p,initialLayoutRect:Yb,initialIntersection:Zb,domFingerprint:String(J>>>0),experimentToggles:ta(a),sentinel:c});var eb=b.getAttribute("src");eb&&(d.src=eb);return d};function rb(a){var b="nameframe",c=b||"frame";a.defaultBootstrapSubDomain=a.defaultBootstrapSubDomain||"d-"+sb(a);return"https://"+a.defaultBootstrapSubDomain+("."+ja.thirdPartyFrameHost+"/1533591342461/")+(c+".html")}function sb(a){var b;if(a.crypto&&a.crypto.getRandomValues){var c=new Uint32Array(2);a.crypto.getRandomValues(c);b=String(c[0])+c[1]}else b=String(a.Math.random()).substr(2)+"0";return b};var tb=null,ub=null;function vb(a,b){void 0===a["3pla"]&&(a["3pla"]=0);a["3pla"]++;if(!tb){var c=new wa;tb=c.promise;ub=c.resolve}Q(a,"timer").timeoutPromise(1E3,b).catch(function(){}).then(function(){--a["3pla"]||(ub(),ub=tb=null)})};function wb(a,b){return Na(a,"consentPolicyManager","amp-consent").then(function(a){return a?a.whenPolicyResolved(b):null})};var xb="AMPDOC_HOST AMPDOC_HOSTNAME AMPDOC_URL AMP_VERSION AVAILABLE_SCREEN_HEIGHT AVAILABLE_SCREEN_WIDTH BACKGROUND_STATE BROWSER_LANGUAGE CANONICAL_HOST CANONICAL_HOSTNAME CANONICAL_PATH CANONICAL_URL CLIENT_ID COUNTER DOCUMENT_CHARSET DOCUMENT_REFERRER FIRST_CONTENTFUL_PAINT FIRST_VIEWPORT_READY MAKE_BODY_VISIBLE PAGE_VIEW_ID RANDOM SCREEN_COLOR_DEPTH SCREEN_HEIGHT SCREEN_WIDTH SCROLL_HEIGHT SCROLL_LEFT SCROLL_TOP SCROLL_WIDTH SHARE_TRACKING_INCOMING SHARE_TRACKING_OUTGOING SOURCE_HOST SOURCE_HOSTNAME SOURCE_PATH SOURCE_URL TIMESTAMP TIMEZONE TIMEZONE_CODE TITLE TOTAL_ENGAGED_TIME USER_AGENT VARIANT VARIANTS VIEWER VIEWPORT_HEIGHT VIEWPORT_WIDTH".split(" ");
function yb(a,b){Ya.call(this,a);this.ga=ya(a,"url-replace").getVariableSource();this.m=b}aa(yb,Ya);
yb.prototype.initialize=function(){var a=this;this.set("AD_NAV_TIMING",function(b,c){B().assert(b,"The first argument to AD_NAV_TIMING, the start attribute name, is required");return Wa(a.m,b,c)}).setAsync("AD_NAV_TIMING",function(b,c){B().assert(b,"The first argument to AD_NAV_TIMING, the start attribute name, is required");return Va(a.m,b,c)});this.set("AD_NAV_TYPE",function(){return Xa(a.m,"type")});this.set("AD_NAV_REDIRECT_COUNT",function(){return Xa(a.m,"redirectCount")});this.set("HTML_ATTR",
this.ha.bind(this));for(var b=0;b<xb.length;b++){var c=xb[b],d=this.ga.get(c);this.set(c,d.sync).setAsync(c,d.async)}};
yb.prototype.ha=function(a,b){var c=20,d=10,e=10,f="A4AVariableSource",k=Array.prototype.slice.call(arguments,1);if(!a||!k.length)return"[]";if(k.length>e)return B().error(f,"At most "+e+" may be requested."),"[]";a=decodeURI(a);var h;try{h=this.m.document.querySelectorAll(a)}catch(n){return B().error(f,"Invalid selector: "+a),"[]"}if(h.length>c)return B().error(f,"CSS selector may match at most "+(c+" elements.")),"[]";for(var l=[],p=0;p<h.length&&l.length<d;++p){for(var q={},v=!1,y=0;y<k.length;++y){var z=
k[y];h[p].hasAttribute(z)&&(q[z]=h[p].getAttribute(z),v=!0)}v&&l.push(q)}return JSON.stringify(l)};function zb(a){if("undefined"!==typeof TextDecoder)return(new TextDecoder("utf-8")).decode(a);for(var b=new Uint8Array(a.buffer||a),c=Array(b.length),d=0;d<b.length;d++)c[d]=String.fromCharCode(b[d]);var e=c.join("");return decodeURIComponent(escape(e))}function Ab(a){for(var b=new Uint8Array(a.length),c=0;c<a.length;c++){var d=a.charCodeAt(c);b[c]=d}return b};function Bb(a,b){this.m=a;this.ia=b;this.R=Q(a,"crypto").isPkcsAvailable()?{}:null;this.$=a.performance&&a.performance.now?a.performance.now.bind(a.performance):Date.now}Bb.prototype.loadKeyset=function(a){if(this.R&&!this.R[a]){var b={},c=Cb(this,b,a,null);this.R[a]={promise:c,keys:b}}};
Bb.prototype.verify=function(a,b){var c=/^([A-Za-z0-9._-]+):([A-Za-z0-9._-]+):([A-Za-z0-9+/]{341}[AQgw]==)$/;if(!b.has("AMP-Fast-Fetch-Signature"))return Promise.resolve(1);var d=b.get("AMP-Fast-Fetch-Signature");b=c.exec(d);return b?this.verifyCreativeAndSignature(b[1],b[2],Ab(atob(b[3])),a):(B().error("AMP-A4A","Invalid signature header: "+d.split(":")[0]),Promise.resolve(3))};
Bb.prototype.verifyCreativeAndSignature=function(a,b,c,d){var e=this;if(!this.R)return Promise.resolve(4);var f=this.R[a];return f.promise.then(function(k){if(!k)return 1;var h=f.keys[b];return void 0===h?(f.promise=Cb(e,f.keys,a,b).then(function(a){void 0===f.keys[b]&&(f.keys[b]=null);return a}),e.verifyCreativeAndSignature(a,b,c,d)):null===h?2:h.then(function(a){if(!a)return 1;var b=Q(e.m,"crypto");return b.verifyPkcs(a,c,d).then(function(a){return a?0:3},function(a){a=a&&a.message;C().error("AMP-A4A",
"Failed to verify signature: "+a);return 1})})})};
function Cb(a,b,c,d){var e=a.ia[c];null!=d&&(e+="?kid="+encodeURIComponent(d));return Q(a.m,"xhr").fetchJson(e,{mode:"cors",method:"GET",ampCors:!1,credentials:"omit"}).then(function(d){d.headers.get("Content-Type");return d.json().then(function(d){if(!d||!Array.isArray(d.keys))return W(c,"Key set ("+JSON.stringify(d)+') has no "keys"'),!1;d.keys.forEach(function(d){d&&"string"==typeof d.kid?void 0===b[d.kid]&&(b[d.kid]=Q(a.m,"crypto").importPkcsKey(d).catch(function(a){var b=JSON.stringify(d);W(c,
"Failed to import key ("+b+"): "+(a&&a.message));return null})):W(c,"Key ("+JSON.stringify(d)+') has no "kid"')});return!0},function(a){W(c,"Failed to parse JSON: "+(a&&a.response));return!1})},function(a){a&&a.response&&W(c,"Status code "+a.response.status);return!1})}function W(a,b){C().error("AMP-A4A","Signing service error for "+a+": "+b)};function Db(a,b){var c,d=!0,d=void 0===d?!1:d;c=void 0===c?!1:c;var e=a.ownerDocument,f=U(e,"amp-analytics",F({sandbox:"true",trigger:c?"":"immediate"})),k=U(e,"script",F({type:"application/json"}));k.textContent=JSON.stringify(b);f.appendChild(k);f.CONFIG=b;d?(b=Q(a.ownerDocument.defaultView,"extensions"),d=R(a),b.installExtensionForDoc(d,"amp-analytics")):Oa(a).then(function(){});a.appendChild(f);return f};function Eb(){this.D=E();this.l=null}g=Eb.prototype;g.get=function(a){return this.D[a]||null};g.whenSignal=function(a){var b=this.l&&this.l[a];if(!b){var c=this.D[a];null!=c?b={promise:"number"==typeof c?Promise.resolve(c):Promise.reject(c)}:(c=new wa,b={promise:c.promise,resolve:c.resolve,reject:c.reject});this.l||(this.l=E());this.l[a]=b}return b.promise};
g.signal=function(a,b){if(null==this.D[a]){var c=b||Date.now();this.D[a]=c;(a=this.l&&this.l[a])&&a.resolve&&(a.resolve(c),a.resolve=void 0,a.reject=void 0)}};g.rejectSignal=function(a,b){null==this.D[a]&&(this.D[a]=b,(a=this.l&&this.l[a])&&a.reject&&(a.reject(b),a.resolve=void 0,a.reject=void 0))};g.reset=function(a){this.D[a]&&delete this.D[a];var b=this.l&&this.l[a];b&&!b.resolve&&delete this.l[a]};var Fb=["AMP-AD","AMP-ANALYTICS","AMP-PIXEL","AMP-AD-EXIT"],Gb;function Hb(a,b){Ib(a,b)}
function Jb(a,b,c,d){function e(){a.contentWindow.addEventListener("securitypolicyviolation",function(a){C().warn("FIE","security policy violation",a)})}var f=O(a.ownerDocument.defaultView),k=Q(f,"extensions");ib(a,"visibility","hidden");a.setAttribute("referrerpolicy","unsafe-url");c.extensionIds&&c.extensionIds.forEach(function(a){return k.preloadExtension(a)});var h=Kb(c);a.onload=function(){a.readyState="complete"};var l;void 0===Gb&&(Gb="srcdoc"in HTMLIFrameElement.prototype);if(Gb)a.srcdoc=
h,l=Ua(a),b.appendChild(a),e();else{a.src="about:blank";b.appendChild(a);var p=a.contentWindow.document;p.open();e();p.write(h);l=Ua(a.contentWindow);p.close()}var q;q=Lb(a)?Promise.resolve():new Promise(function(b){var c=f.setInterval(function(){Lb(a)&&(b(),f.clearInterval(c))},5);l.catch(function(a){x(a)}).then(function(){b();f.clearInterval(c)})});return q.then(function(){var b=new Mb(a,c,l);a.__AMP_EMBED__=b;k.installExtensionsInChildWindow(a.contentWindow,c.extensionIds||[],d);Nb(b);return b})}
function Lb(a){a=a.contentWindow&&a.contentWindow.document;return!!(a&&"loading"!=a.readyState&&"uninitialized"!=a.readyState&&a.body&&a.body.firstChild)}
function Kb(a){var b=a.html,c=b.toUpperCase(),d=c.indexOf("<HEAD");-1!=d&&(d=c.indexOf(">",d+1)+1);-1==d&&(d=c.indexOf("<BODY"));-1==d&&(d=c.indexOf("<HTML"),-1!=d&&(d=c.indexOf(">",d+1)+1));var e=[];0<d&&e.push(b.substring(0,d));e.push('<base href="'+La(a.url)+'">');a.fonts&&a.fonts.forEach(function(a){e.push('<link href="'+La(a)+'" rel="stylesheet" type="text/css">')});e.push("<meta http-equiv=Content-Security-Policy content=\"script-src 'none';object-src 'none';child-src 'none'\">");0<d?e.push(b.substring(d)):
e.push(b);return e.join("")}function Mb(a,b,c){this.iframe=a;this.win=a.contentWindow;this.spec=b;this.host=b.host||null;this.ja=Date.now();this.U=!1;this.ca=new nb;this.P=this.host?this.host.signals():new Eb;this.ka=Promise.all([c,this.whenReady()])}g=Mb.prototype;g.destroy=function(){Pa(this.iframe).removeForChildWindow(this.win);Ha(this.win)};g.getStartTime=function(){return this.ja};g.getUrl=function(){return this.spec.url};g.signals=function(){return this.P};g.whenReady=function(){return this.P.whenSignal("render-start")};
g.whenWindowLoaded=function(){return this.ka};g.whenIniLoaded=function(){return this.P.whenSignal("ini-load")};
function Nb(a){a.host?a.host.renderStarted():a.P.signal("render-start");ib(a.iframe,"visibility","");a.win.document&&a.win.document.body&&(a.win.document.documentElement.classList.add("i-amphtml-fie"),jb(a.win.document.body,{opacity:1,visibility:"visible",animation:"none"}));var b;b=a.host?a.host.getLayoutBox():mb(0,0,a.win.innerWidth,a.win.innerHeight);Promise.all([a.whenReady(),Ob(a.iframe,a.win,b)]).then(function(){a.P.signal("ini-load")})}g.isVisible=function(){return this.U};
g.onVisibilityChanged=function(a){return this.ca.add(a)};function Ib(a,b){a.U!=b&&(a.U=b,a.ca.fire(a.U))}g.getBodyElement=function(){return(this.iframe.contentDocument||this.iframe.contentWindow.document).body};function Pb(a,b){return Pa(a.iframe).measureMutateElement(a.iframe,b.measure||null,b.mutate)}
g.enterFullOverlayMode=function(){var a=this,b=this.iframe.parentNode;B().assert("amp-ad"==b.tagName.toLowerCase(),"Only <amp-ad> is allowed to enter lightbox mode.");var c={background:"transparent",position:"absolute",bottom:"auto",right:"auto",top:"",left:"",width:"",height:""},d={position:"fixed",left:0,right:0,bottom:0,width:"100vw",top:0,height:"100vh"};return Pb(this,{measure:function(){var b=a.host?a.host.getLayoutBox():a.iframe.getBoundingClientRect(),d=-N(a.iframe,"viewport").getScrollTop(),
b=0==d||0==b.width&&0==b.height?b:mb(b.left+0,b.top+d,b.width,b.height);Object.assign(c,{top:b.top+"px",left:b.left+"px",width:b.width+"px",height:b.height+"px"})},mutate:function(){hb(a.iframe,d);hb(a.getBodyElement(),c)}})};g.leaveFullOverlayMode=function(){var a=this;return Pb(this,{mutate:function(){kb(a.iframe,"position left right top bottom width height".split(" "));kb(a.getBodyElement(),"position top left width height bottom right".split(" "))}})};
function Ob(a,b,c){return Pa(a).getResourcesInRect(b,c).then(function(a){var b=[];a.forEach(function(a){Fb.includes(a.element.tagName)||b.push(a.loadedOnce())});return Promise.all(b)})};var Qb={ANCESTOR_ORIGIN:!0};function Rb(a){this.K=a}Rb.prototype.expand=function(a,b,c,d,e){if(!a.length)return d?a:Promise.resolve(a);e=this.K.getExpr(b,!0,e);e=Sb(a,e);return e.length?Tb(this,a,e,b,c,d):d?a:Promise.resolve(a)};function Sb(a,b){var c=[];a.replace(b,function(a,b,f){a=a.length;var d=a+f-1;c.push({start:f,stop:d,name:b,length:a})});return c}
function Tb(a,b,c,d,e,f){function k(){for(var n="",r=[];l<b.length&&p<=c.length;){if(q&&l===q.start){var H=void 0;d&&D.call(d,q.name)?H={name:q.name,prioritized:d[q.name]}:(H=a.K.get(q.name),H.name=q.name);l=q.stop+1;q=c[++p];"("===b[l]?(l++,v++,h.push(H),n.trim().length&&r.push(n),r.push(k())):(n.length&&r.push(n),r.push(Ub(H,void 0,e,f)));n=""}else{if("`"===b[l])y?y=!1:(z=y=!0,B().assert(""===n.trim(),'The substring "'+n+'" was lost during url-replacement. Please ensure the url syntax is correct'),
n="");else if(v&&","===b[l]&&!y){if(n.length){var S=z?n:n.trim();r.push(S);z=!1}","===b[l+1]&&(r.push(""),l++);n=""}else{if(v&&")"===b[l]&&!y){l++;v--;var I=h.pop();r.push(z?n:n.trim());z=!1;return Ub(I,r,e,f)}n+=b[l]}l++}l===b.length&&n.length&&r.push(n)}return f?r.join(""):Promise.all(r).then(function(a){return a.join("")}).catch(function(a){x(a);return""})}var h=[],l=0,p=0,q=c[p],v=0,y=!1,z=!1;return k()}
function Ub(a,b,c,d){var e=a.name,f;a.prioritized?f=a.prioritized:d&&a.sync?f=a.sync:d?(B().error("Expander","ignoring async replacement key: ",a.name),f=""):f=a.async||a.sync;var k;if(d){d=f;try{var h="function"===typeof d?d.apply(null,b):d,l;h&&h.then?(B().error("Expander","ignoring async macro resolution"),l=""):l="string"===typeof h||"number"===typeof h?Qb[e]?h.toString():encodeURIComponent(h):"";c&&(c[e]=l);k=l}catch(p){x(p),c&&(c[e]=""),k=""}}else k=Vb(f,e,b,c);return k}
function Vb(a,b,c,d){var e;try{return e="function"===typeof a?c?Promise.all(c).then(function(b){return a.apply(null,b)}):xa(a):Promise.resolve(a),e.then(function(a){a=null==a?"":Qb[b]?a:encodeURIComponent(a);d&&(d[b]=a);return a}).catch(function(a){x(a);d&&(d[b]="");return Promise.resolve("")})}catch(f){return x(f),d&&(d[b]=""),Promise.resolve("")}};function Wb(a,b){this.ampdoc=a;this.K=b;this.fa=new Rb(this.K)}g=Wb.prototype;g.expandStringSync=function(a,b,c,d){return X(this,a,b,c,!0,d)};g.expandStringAsync=function(a,b){return X(this,a,b)};g.expandUrlSync=function(a,b,c,d){return Xb(a,X(this,a,b,c,!0,d))};g.expandUrlAsync=function(a,b,c){return X(this,a,b,void 0,void 0,c).then(function(b){return Xb(a,b)})};g.expandInputValueAsync=function(a){return $b(this,a,!1)};g.expandInputValueSync=function(a){return $b(this,a,!0)};
function $b(a,b,c){"INPUT"==b.tagName&&b.getAttribute("type");var d=ac(b);if(!d)return c?b.value:Promise.resolve(b.value);void 0===b["amp-original-value"]&&(b["amp-original-value"]=b.value);a=X(a,b["amp-original-value"]||b.value,void 0,void 0,c,d);return c?b.value=a:a.then(function(a){return b.value=a})}
function ac(a,b){if(a=a.getAttribute("data-amp-replace")){var c={};a.trim().split(/\s+/).forEach(function(a){!b||D.call(b,a)?c[a]=!0:B().warn("URL","Ignoring unsupported replacement",a)});return c}}
g.maybeExpandLink=function(a,b){var c={CLIENT_ID:!0,QUERY_PARAM:!0},d=a.getAttribute("data-amp-addparams")||"",e=ac(a,c);if(e||d||b){var f=a["amp-original-href"]||a.getAttribute("href"),k=M(f);null==a["amp-original-href"]&&(a["amp-original-href"]=f);if(d)var h=t(d),f=na(f,oa(h));a:if(h=Da(this.ampdoc).get(),k.origin==M(h.canonicalUrl).origin||k.origin==M(h.sourceUrl).origin)k=!0;else{if((h=this.ampdoc.getRootNode().querySelector("meta[name=amp-link-variable-allowed-origin]"))&&h.hasAttribute("content"))for(var h=
h.getAttribute("content").trim().split(/\s+/),l=0;l<h.length;l++)if(k.origin==M(h[l]).origin){k=!0;break a}k=!1}var p=k;if(!p)return e&&B().warn("URL","Ignoring link replacement",f," because the link does not go to the document's source, canonical, or whitelisted origin."),a.href=f;if(b){if(!e||!e.QUERY_PARAM){var q={QUERY_PARAM:!0};b=this.expandUrlSync(b,void 0,void 0,q)}k=t(b);f=na(f,oa(k))}e&&(f=this.expandUrlSync(f,void 0,void 0,e));return a.href=f}};
function X(a,b,c,d,e,f){var k=sa(a.ampdoc.win,"url-replacement-v2");if(k)return a.fa.expand(b,c,d,e,f);var h=a.K.getExpr(c),l,p=b.replace(h,function(b,k,h){var q=[];"string"==typeof h&&(q=h.split(/,\s*/));if(f&&!f[k])return b;var n;if(c&&k in c)n=c[k];else if(n=a.K.get(k))if(e){if(n=n.sync,!n)return B().error("UrlReplacements","ignoring async replacement key: ",k),""}else n=n.async||n.sync;var r;try{r="function"==typeof n?n.apply(null,q):n}catch(S){e&&(r=""),x(S)}if(r&&r.then){if(e)return B().error("UrlReplacements",
"ignoring promise value for key: ",k),"";var v=r.catch(function(a){x(a)}).then(function(a){p=p.replace(b,Qb[b]?a:null==a?"":encodeURIComponent(a));d&&(d[b]=a)});l=l?l.then(function(){return v}):v;return b}d&&(d[b]=r);return Qb[b]?r:null==r?"":encodeURIComponent(r)});l&&(l=l.then(function(){return p}));return e?p:l||Promise.resolve(p)}g.collectVars=function(a,b){var c=Object.create(null);return X(this,a,b,c).then(function(){return c})};
g.collectUnwhitelistedVarsSync=function(a){var b=a.getAttribute("src"),c=Object.create(null);this.expandStringSync(b,void 0,c);var d=Object.keys(c),e=ac(a);return e?d.filter(function(a){return!e[a]}):d};function Xb(a,b){var c=M(b,!0).protocol,d=M(a,!0).protocol;if(c!=d)return B().error("UrlReplacements","Illegal replacement of the protocol: ",a),a;B().assert(ra(b),"The replacement url has invalid protocol: %s",b);return b}g.getVariableSource=function(){return this.K};var bc=["<script amp-ad-metadata type=application/json>",'<script type="application/json" amp-ad-metadata>',"<script type=application/json amp-ad-metadata>"],cc={CLIENT_CACHE:"client_cache",SAFEFRAME:"safeframe",NAMEFRAME:"nameframe",IFRAME_GET:"iframe_get"},dc=F({frameborder:"0",allowfullscreen:"",allowtransparency:"",scrolling:"no",marginwidth:"0",marginheight:"0"}),ec={adRequestStart:"ad-request-start",adRequestEnd:"ad-response-end",renderFriendlyStart:"ad-render-start",renderCrossDomainStart:"ad-render-start",
renderSafeFrameStart:"ad-render-start",renderFriendlyEnd:"ad-render-end",renderCrossDomainEnd:"ad-render-end",friendlyIframeIniLoad:"ad-iframe-loaded",crossDomainIframeLoaded:"ad-iframe-loaded"};function fc(a,b,c){return function(d){for(var e=[],f=0;f<arguments.length;++f)e[f-0]=arguments[f];try{return a.apply(b,e)}catch(k){if(c)try{return e.unshift(k),c.apply(b,e)}catch(h){}}}}
function gc(a){a=AMP.BaseElement.call(this,a)||this;a.aa=null;a.G=null;a.L=0;a.h=null;a.J=null;a.uiHandler=null;a.A=null;a.X=!1;a.M=null;a.C=null;a.F=null;a.I=a.getNonAmpCreativeRenderingMethod();a.ba=!1;a.$=a.win.performance&&a.win.performance.now?a.win.performance.now.bind(a.win.performance):Date.now;var b;b=window;for(var c=0,d=b;d&&d!=d.parent;d=d.parent)c++;b=String(c)+"-"+sb(b);a.sentinel=b;a.W=!1;a.iframe=null;a.fromResumeCallback=!1;a.safeframeVersion="1-0-23";a.isRefreshing=!1;a.isRelayoutNeededFlag=
!1;b=a.win;a.la={production:"0",control:"1",canary:"2"}[b.AMP_CONFIG&&b.AMP_CONFIG.type?b.AMP_CONFIG.type:"unknown"]||null||"-1";a.postAdResponseExperimentFeatures={};a.S=null;a.da=null;a.isSinglePageStoryAd=!1;return a}aa(gc,AMP.BaseElement);g=gc.prototype;g.getLayoutPriority=function(){var a=!this.element.getAmpDoc().isSingleDoc();return a?1:2};g.isLayoutSupported=function(a){return"fixed"==a||"fixed-height"==a||"responsive"==a||"fill"==a||"flex-item"==a||"fluid"==a||"intrinsic"==a};
g.isRelayoutNeeded=function(){return this.isRelayoutNeededFlag};
g.buildCallback=function(){var a=this;this.C={width:this.element.getAttribute("width"),height:this.element.getAttribute("height")};var b=Math.round(this.getResource().getUpgradeDelayMs());C().info("amp-a4a","upgradeDelay "+this.element.getAttribute("type")+": "+b);this.uiHandler=new AMP.AmpAdUIHandler(this);var c=hc(this.win);this.aa=N(this.getAmpDoc(),"viewer").whenFirstVisible().then(function(){a.getSigningServiceNames().forEach(function(a){c.loadKeyset(a)})});if(this.S=this.getA4aAnalyticsConfig())this.da=
Db(this.element,this.S);this.isSinglePageStoryAd=this.element.hasAttribute("amp-story")};
g.renderOutsideViewport=function(){if(!this.X&&this.win["3pla"]&&!this.inNonAmpPreferenceExp())return!1;var a;var b=this.element.getAttribute("data-loading-strategy");null==b?a=null:"prefer-viewability-over-views"==b||""==b?a=1.25:(a="Value of data-loading-strategy should be a float number in range of [0, 3], but got "+b,b=B().assertNumber(parseFloat(b),a),B().assert(0<=b&&3>=b,a),a=b);var c=a;return null!==c?c:AMP.BaseElement.prototype.renderOutsideViewport.call(this)};g.isValidElement=function(){return!0};
g.getCreativeSize=function(){return this.C};g.delayAdRequestEnabled=function(){return!1};g.getPreconnectUrls=function(){return[]};g.getPrefetchUrls=function(){return[]};g.isAmpAdElement=function(){return"AMP-AD"==this.element.tagName||"AMP-EMBED"==this.element.tagName};g.preconnectCallback=function(){var a=this,b=this.getPreconnectUrls();b&&b.forEach(function(b){a.preconnect.url(b,!0)})};
g.resumeCallback=function(){if(!this.J){this.fromResumeCallback=!0;var a=this.getResource();if(a.hasBeenMeasured()&&!a.isMeasureRequested())this.onLayoutMeasure()}};g.getResource=function(){return this.element.getResources().getResourceForElement(this.element)};g.hasAdPromise=function(){return!!this.G};g.inNonAmpPreferenceExp=function(){return!!this.postAdResponseExperimentFeatures.pref_neutral_enabled&&["adsense","doubleclick"].includes(this.element.getAttribute("type"))};
function ic(a){var b=a.getIntersectionElementLayoutBox();if("fluid"!=a.getLayout()&&(0==b.height||0==b.width))return!1;var b=a.win,c=!1,d=0,e=a.element;do{if(ob[e.tagName])d++,c=!1;else{var f=(b.getComputedStyle(e)||E()).position;"fixed"!=f&&"sticky"!=f||(c=!0)}e=e.parentElement}while(e&&"BODY"!=e.tagName);return!c&&1>=d?a.isValidElement()?!0:(B().warn("amp-a4a",a.element.getAttribute("type"),"Amp ad element ignored as invalid",a.element),!1):(B().warn("amp-a4a","<"+a.element.tagName+"> is not allowed to be "+
("placed in elements with position:fixed: "+a.element)),!1)}g.onLayoutMeasure=function(){this.initiateAdRequest()};
g.initiateAdRequest=function(){var a=this;if(this.A)this.A.onLayoutMeasure();if(!this.G&&ic(this)){++this.L;var b=this.verifyStillCurrent();this.G=N(this.getAmpDoc(),"viewer").whenFirstVisible().then(function(){b();var c=a.delayAdRequestEnabled();if(c)return a.getResource().whenWithinViewport("number"==typeof c?c:a.renderOutsideViewport())}).then(function(){b();var c=AMP.BaseElement.prototype.getConsentPolicy.call(a);return c?wb(a.getAmpDoc(),c).catch(function(a){B().error("amp-a4a","Error determining consent state",
a);return 4}):Promise.resolve(null)}).then(function(c){b();return a.getAdUrl(c,jc(a,c))}).then(function(c){b();a.h=c;return!a.isXhrAllowed()&&a.h?(a.I="iframe_get",Promise.reject("IFRAME-GET")):c&&a.sendXhrRequest(c)}).then(function(c){b();Y(a,"adRequestEnd");if(!c||!c.arrayBuffer||c.headers.has("amp-ff-empty-creative"))return a.forceCollapse(),Promise.reject("NO-CONTENT-RESPONSE");c.headers&&c.headers.has("amp-ff-exps")&&kc(a,c.headers.get("amp-ff-exps"));var d=a.getNonAmpCreativeRenderingMethod(c.headers.get("X-AmpAdRender"));
a.I=d;"nameframe"==a.I&&a.preconnect.preload(rb(a.win));var e=a.win.HTMLIFrameElement&&"sandbox"in a.win.HTMLIFrameElement.prototype;a.ba=e&&"true"==c.headers.get("amp-ff-sandbox");var f=c.headers.get("X-AmpSafeFrameVersion");/^[0-9-]+$/.test(f)&&"1-0-23"!=f&&(a.safeframeVersion=f,a.preconnect.preload(a.getSafeframePath()));return c.arrayBuffer().then(function(b){return 0==b.byteLength?(a.forceCollapse(),Promise.reject("NO-CONTENT-RESPONSE")):{bytes:b,headers:c.headers}})}).then(function(c){b();if(!c)return Promise.resolve();
var d=c,e=d.bytes,d=d.headers,f=a.extractSize(c.headers);a.C=f||a.C;"client_cache"!=a.I&&e&&(a.M=e);return a.maybeValidateAmpCreative(e,d)}).then(function(c){b();a.X=!!c;return c&&zb(c)}).then(function(c){b();var d;if(!c||!(d=a.getAmpAdMetadata(c)))return a.inNonAmpPreferenceExp()&&a.updateLayoutPriority(0),null;a.updateLayoutPriority(0);var e=Q(a.win,"extensions");d.customElementExtensions.forEach(function(a){return e.preloadExtension(a)});(d.customStylesheets||[]).forEach(function(b){return a.preconnect.preload(b.href)});
var f=ya(a.getAmpDoc(),"url");(d.images||[]).forEach(function(b){return f.isSecure(b)&&a.preconnect.preload(b)});return d}).catch(function(b){switch(b.message||b){case "IFRAME-GET":case "NETWORK-FAILURE":return null;case "INVALID-SPSA-RESPONSE":case "NO-CONTENT-RESPONSE":return{minifiedCreative:"",customElementExtensions:[],customStylesheets:[]}}lc(a,b);return null})}};
g.maybeValidateAmpCreative=function(a,b){var c=this,d=this.verifyStillCurrent();return this.aa.then(function(){return"fake"!=c.element.getAttribute("type")||c.element.getAttribute("checksig")?hc(c.win).verify(a,b):Promise.resolve(0)}).then(function(b){d();var e=null;switch(b){case 0:e=a;break;case 4:e=c.shouldPreferentialRenderWithoutCrypto()?a:null;break;case 2:case 3:B().error("amp-a4a",c.element.getAttribute("type"),"Signature verification failed")}if(c.isSinglePageStoryAd&&!e)throw Error("INVALID-SPSA-RESPONSE");
return e})};function kc(a,b){b.split(",").forEach(function(b){if(b){var c=b.split("=");2==c.length&&c[0]?a.postAdResponseExperimentFeatures[c[0]]=c[1]:C().warn("amp-a4a","invalid experiment feature "+b)}})}
g.refresh=function(a){var b=this;this.isRefreshing=!0;this.tearDownSlot();this.initiateAdRequest();var c=this.L;return this.G.then(function(){if(b.isRefreshing&&c==b.L)return b.mutateElement(function(){lb(b.element,"ad-refresh");b.togglePlaceholder(!0);return Q(b.win,"timer").promise(1E3).then(function(){b.isRelayoutNeededFlag=!0;b.getResource().layoutCanceled();N(b.getAmpDoc(),"viewer").whenNextVisible().then(function(){Pa(b.getAmpDoc()).requireLayout(b.element)})})});a()})};
function lc(a,b){var c,d=b;if(d&&("string"==typeof d?ia(d,"CANCELLED"):"string"==typeof d.message&&ia(d.message,"CANCELLED")))throw b;b=b&&b.message?ga(b):Error("unknown error "+b);c&&(b.ignoreStack=c);d=a.element.getAttribute("type")||"notype";0!=b.message.indexOf("amp-a4a: "+d+":")&&(b.message="amp-a4a: "+d+": "+b.message);a=a.h;!a||b.args&&b.args.au||(d=a.indexOf("?"),-1!=d&&((b.args||(b.args={})).au=a.substring(d+1,d+251)));u().development||u().log?B().error("amp-a4a",b):(B().warn("amp-a4a",b),
.01>Math.random()&&C().expectedError("amp-a4a",b))}g.layoutCallback=function(){this.isRefreshing&&this.destroyFrame(!0);return this.attemptToRenderCreative()};
g.attemptToRenderCreative=function(){var a=this;if(!this.G)return ic(this)&&C().error("amp-a4a","Null promise in layoutCallback"),Promise.resolve();var b=this.verifyStillCurrent();return this.G.then(function(c){b();return a.W||a.iframe&&!a.isRefreshing?Promise.resolve():c?mc(a,c).catch(function(c){b();B().warn("amp-a4a",a.element.getAttribute("type"),"Error injecting creative in friendly frame",c);return a.renderNonAmpCreative()}):a.renderNonAmpCreative()}).catch(function(b){lc(a,b);throw Error("CANCELLED");
})};g.isXhrAllowed=function(){return!0};g.attemptChangeSize=function(a,b){this.F=this.F||this.getLayoutBox();return AMP.BaseElement.prototype.attemptChangeSize.call(this,a,b)};g.unlayoutCallback=function(){this.tearDownSlot();return!0};
g.tearDownSlot=function(){var a=this;this.L++;this.uiHandler.applyUnlayoutUI();this.F&&AMP.BaseElement.prototype.attemptChangeSize.call(this,this.F.height,this.F.width).then(function(){a.F=null}).catch(function(a){C().warn("amp-a4a","unable to revert to original size",a)});this.W=!1;this.destroyFrame();this.M=this.h=this.G=null;this.fromResumeCallback=this.X=!1;this.I=this.getNonAmpCreativeRenderingMethod();this.postAdResponseExperimentFeatures={}};
g.destroyFrame=function(a){if((a=void 0===a?!1:a)||!this.isRefreshing)this.J&&(this.J.destroy(),this.J=null),this.iframe&&this.iframe.parentElement&&(this.iframe.parentElement.removeChild(this.iframe),this.iframe=null),this.A&&(this.A.freeXOriginIframe(),this.A=null)};g.viewportCallback=function(a){this.J&&Ib(this.J,a);this.A&&this.A.viewportCallback(a)};g.createPlaceholderCallback=function(){return this.uiHandler.createPlaceholder()};
g.getAdUrl=function(){throw Error("getAdUrl not implemented!");};g.resetAdUrl=function(){this.h=null};g.verifyStillCurrent=function(){var a=this,b=this.L;return function(){if(b!=a.L)throw Error("CANCELLED");}};g.extractSize=function(a){a=a.get("X-CreativeSize");if(!a)return null;var b=/^([0-9]+)x([0-9]+)$/.exec(a);return b?{width:Number(b[1]),height:Number(b[2])}:(B().error("amp-a4a","Invalid size header: "+a),null)};
g.forceCollapse=function(){this.isRefreshing?this.isRefreshing=!1:(this.F=this.F||this.getLayoutBox(),this.uiHandler.applyNoContentUI(),this.W=!0)};g.onCreativeRender=function(a){Y(this,a?"renderFriendlyEnd":"renderCrossDomainEnd")};g.onCrossDomainIframeCreated=function(a){C().info("amp-a4a",this.element.getAttribute("type"),"onCrossDomainIframeCreated "+a)};
g.sendXhrRequest=function(a){var b=this;Y(this,"adRequestStart");var c={mode:"cors",method:"GET",credentials:"include"};return Q(this.win,"xhr").fetch(a,c).catch(function(a){if(a.response&&200<a.response.status)return null;var c=b.onNetworkFailure(a,b.h);if(c.frameGetDisabled)C().info("amp-a4a","frame get disabled as part of network failure handler"),b.resetAdUrl();else return b.h=c.adUrl||b.h,Promise.reject("NETWORK-FAILURE");return null})};g.onNetworkFailure=function(){return{}};
g.getSigningServiceNames=function(){return["google"]};
g.renderNonAmpCreative=function(a){var b=this;if("true"==this.element.getAttribute("disable3pfallback"))return B().warn("amp-a4a",this.element.getAttribute("type"),"fallback to 3p disabled"),Promise.resolve(!1);C().warn("amp-a4a","fallback to 3p");var c=this.I,d=Promise.resolve(!1);"safeframe"!=c&&"nameframe"!=c||!this.M?this.h?(qa(this.h,this.element),d=nc(this,this.h)):B().warn("amp-a4a",this.element.getAttribute("type"),"No creative or URL available -- A4A can't render any ad"):(d=oc(this,this.M),
this.M=null);a||this.inNonAmpPreferenceExp()||vb(this.win,d);return d.then(function(a){Y(b,"crossDomainIframeLoaded");return a})};
function mc(a,b){Y(a,"renderFriendlyStart");a.iframe=U(a.element.ownerDocument,"iframe",F({height:a.C.height,width:a.C.width,frameborder:"0",allowfullscreen:"",allowtransparency:"",scrolling:"no"}));a.applyFillContent(a.iframe);var c=[];b.customStylesheets&&b.customStylesheets.forEach(function(a){(a=a.href)&&c.push(a)});var d=a.verifyStillCurrent();return Jb(a.iframe,a.element,{host:a.element,url:a.h,html:b.minifiedCreative,extensionIds:b.customElementExtensions||[],fonts:c},function(b){var c=a.getAmpDoc(),
d=new yb(a.getAmpDoc(),b);Aa(b,new Wb(c,d))}).then(function(c){d();a.J=c;Hb(c,a.isInViewport());var e=c.iframe.contentDocument||c.win.document;ib(e.body,"visibility","visible");fc(a.onCreativeRender,a,function(b){C().error("amp-a4a",a.element.getAttribute("type"),"Error executing onCreativeRender",b)})(b);return c.whenIniLoaded()}).then(function(){d();Y(a,"friendlyIframeIniLoad")})}
function pc(a,b){var c=Object.assign(b,F({height:a.C.height,width:a.C.width}));a.sentinel&&(c["data-amp-3p-sentinel"]=a.sentinel);a.ba&&(c.sandbox="allow-forms allow-pointer-lock allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation");sa(a.win,"no-sync-xhr-in-ads")&&(c.allow="sync-xhr 'none';");a.iframe=U(a.element.ownerDocument,"iframe",Object.assign(c,dc));a.A=new AMP.AmpAdXOriginIframeHandler(a);var d=a.A.init(a.iframe,!0);fc(a.onCreativeRender,
a,function(b){C().error("amp-a4a",a.element.getAttribute("type"),"Error executing onCreativeRender",b)})(null);return d}function nc(a,b){Y(a,"renderCrossDomainStart");return pc(a,F({src:Q(a.win,"xhr").getCorsUrl(a.win,b),name:JSON.stringify(qb(a.win,a.element,a.sentinel))}))}
function oc(a,b){var c=a.I;Y(a,"renderSafeFrameStart");var d=a.verifyStillCurrent();return xa(function(){return zb(b)}).then(function(b){d();var e,k="";switch(c){case "safeframe":e=a.getSafeframePath()+"?n=0";break;case "nameframe":e=rb(a.win);break;default:return B().error("A4A","A4A received unrecognized cross-domain name attribute iframe rendering mode request: %s.  Unable to render a creative for slot %s.",c,a.element.getAttribute("id")),Promise.reject("Unrecognized rendering mode request")}var h=
qb(a.win,a.element,a.sentinel,a.getAdditionalContextMetadata("safeframe"==c));"nameframe"==c?(h.creative=b,k=JSON.stringify(h)):"safeframe"==c&&(h=JSON.stringify(h),k=a.safeframeVersion+";"+b.length+";"+b+(""+h));return pc(a,F({src:e,name:k}))})}
g.getAmpAdMetadata=function(a){for(var b=-1,c,d=0;d<bc.length&&!(c=bc[d],b=a.lastIndexOf(c),0<=b);d++);if(0>b)return C().warn("amp-a4a",this.element.getAttribute("type"),"Could not locate start index for amp meta data in: %s",a),null;var e=a.lastIndexOf("\x3c/script>");if(0>e)return C().warn("amp-a4a",this.element.getAttribute("type"),"Could not locate closing script tag for amp meta data in: %s",a),null;try{var f=JSON.parse(a.slice(b+c.length,e)),k=f.ampRuntimeUtf16CharOffsets;if(!Array.isArray(k)||
2!=k.length||"number"!==typeof k[0]||"number"!==typeof k[1])throw Error("Invalid runtime offsets");var h={};if(f.customElementExtensions){if(h.customElementExtensions=f.customElementExtensions,!Array.isArray(h.customElementExtensions))throw Error("Invalid extensions",h.customElementExtensions);}else h.customElementExtensions=[];if(f.customStylesheets){h.customStylesheets=f.customStylesheets;var l="Invalid custom stylesheets";if(!Array.isArray(h.customStylesheets))throw Error(l);var p=ya(this.getAmpDoc(),
"url");h.customStylesheets.forEach(function(a){if("[object Object]"!==da.call(a)||!a.href||"string"!==typeof a.href||!p.isSecure(a.href))throw Error(l);})}Array.isArray(f.images)&&(h.images=f.images.splice(0,5));if(this.isSinglePageStoryAd){if(!f.ctaUrl||!f.ctaType)throw Error("INVALID-SPSA-RESPONSE");this.element.setAttribute("data-vars-ctatype",f.ctaType);this.element.setAttribute("data-vars-ctaurl",f.ctaUrl)}h.minifiedCreative=a.slice(0,k[0])+a.slice(k[1],b)+a.slice(e+9);return h}catch(q){C().warn("amp-a4a",
this.element.getAttribute("type"),"Invalid amp metadata: %s",a.slice(b+c.length,e));if(this.isSinglePageStoryAd)throw q;return null}};g.getSafeframePath=function(){return"https://tpc.googlesyndication.com/safeframe/"+(this.safeframeVersion+"/html/container.html")};function Y(a,b){if(a.S){var c=ec[b],d=Object.assign({time:Math.round(a.$())},a.getA4aAnalyticsVars(c));lb(a.element,c,d)}}g.getA4aAnalyticsVars=function(){return{}};g.getA4aAnalyticsConfig=function(){return null};
function jc(a,b){if(AMP.RealTimeConfigManager)try{return(new AMP.RealTimeConfigManager(a)).maybeExecuteRealTimeConfig({},b)}catch(c){B().error("amp-a4a","Could not perform Real Time Config.",c)}else a.element.getAttribute("rtc-config")&&B().error("amp-a4a","RTC not supported for ad network "+a.element.getAttribute("type"))}g.shouldPreferentialRenderWithoutCrypto=function(){return!1};
g.getNonAmpCreativeRenderingMethod=function(a){if(a){var b;a:{for(b in cc)if(cc[b]===a){b=!0;break a}b=!1}if(b)return a;C().error("AMP-A4A","cross-origin render mode header "+a)}return Q(this.win,"platform").isIos()?"nameframe":null};g.getAdditionalContextMetadata=function(){};function hc(a){return a.AMP_FAST_FETCH_SIGNATURE_VERIFIER_||(a.AMP_FAST_FETCH_SIGNATURE_VERIFIER_=new Bb(a,cb))};var qc={mode:"cors",method:"GET",ampCors:!1,credentials:"omit"};function rc(a){this.m=a;this.H=new L(5)}rc.prototype.fetch=function(a){var b=sc(a),c=this.H.get(b);c||(c=Q(this.m,"xhr").fetchText(b,qc).then(function(a){return a.text()}),this.H.put(b,c));return c};rc.prototype.render=function(a,b){return Q(this.m,"templates").findAndRenderTemplate(b,a)};
rc.prototype.insertAnalytics=function(a,b){b=Array.isArray(b)?b:[b];for(var c=0;c<b.length;c++){var d=b[c],e=a.ownerDocument.createElement("amp-analytics");d.remote&&e.setAttribute("config",d.remote);d.type&&e.setAttribute("type",d.type);if(d.inline){var f=U(a.ownerDocument,"script",F({type:"application/json"}));f.textContent=JSON.stringify(d.inline);e.appendChild(f)}a.appendChild(e)}};
function sc(a){var b=ja.cdn.slice(8),c=M(a);return 0<c.origin.indexOf(b)?a:"https://"+c.hostname.replace(/-/g,"--").replace(/\./g,"-")+"."+b+"/ad/s/"+c.hostname+c.pathname};var Z;function tc(a){a=gc.call(this,a)||this;a.B=null;a.w=null;Z=Z||new rc(a.win);return a}aa(tc,gc);g=tc.prototype;g.isValidElement=function(){return!!this.getAdUrl()};g.getSigningServiceNames=function(){return[]};g.getAdUrl=function(){var a=this.element.getAttribute("data-r");return"https://engine.adzerk.net/amp?r="+encodeURIComponent(a)};
g.maybeValidateAmpCreative=function(a,b){var c=this;if("amp-mustache"!==b.get("AMP-template-amp-creative"))return Promise.resolve(null);var d=this.verifyStillCurrent();return xa(function(){return zb(a)}).then(function(a){d();c.w=ab(a)||{};return Z.fetch(c.w.templateUrl).then(function(a){var b=c.parseMetadataFromCreative(a);return"undefined"!==typeof TextEncoder?(new TextEncoder("utf-8")).encode(b):Ab(unescape(encodeURIComponent(b)))}).catch(function(a){C().warn("amp-ad-network-adzerk-impl","Error fetching/expanding template",
c.w,a);c.forceCollapse();return Promise.reject("NO-CONTENT-RESPONSE")})})};g.parseMetadataFromCreative=function(a){var b=a.replace(/<script async.+?<\/script>/g,"");this.B={minifiedCreative:b,customElementExtensions:[],extensions:[]};return b};
g.getAmpAdMetadata=function(){this.B||(this.B={});this.B.customElementExtensions||(this.B.customElementExtensions=[]);if(this.w.analytics){var a=this.B.customElementExtensions;0>a.indexOf("amp-analytics")&&a.push("amp-analytics")}a=this.B.customElementExtensions;0>a.indexOf("amp-mustache")&&a.push("amp-mustache");return this.B};
g.onCreativeRender=function(){var a=this;this.w&&this.w.data&&Z.render(this.w.data,this.iframe.contentWindow.document.body).then(function(b){a.w.analytics&&Z.insertAnalytics(b,a.w.analytics);a.iframe.contentWindow.document.body.innerHTML=b.innerHTML})};(function(a){a.registerElement("amp-ad-network-adzerk-impl",tc)})(self.AMP);
})});
//# sourceMappingURL=amp-ad-network-adzerk-impl-0.1.js.map

