(self.AMP=self.AMP||[]).push({n:"amp-ad-network-doubleclick-impl",v:"1533591342461",f:(function(AMP,_){
var g;function aa(a,b){function c(){}c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a;for(var d in b)if(Object.defineProperties){var e=Object.getOwnPropertyDescriptor(b,d);e&&Object.defineProperty(a,d,e)}else a[d]=b[d]}function ba(a,b){b=void 0===b?"":b;try{return decodeURIComponent(a)}catch(c){return b}};var ca=/(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;function p(a){var b=Object.create(null);if(!a)return b;for(var c;c=ca.exec(a);){var d=ba(c[1],c[1]),e=c[2]?ba(c[2],c[2]):"";b[d]=e}return b};var da="";function q(a){var b=a||self,c;if(b.AMP_MODE)c=b.AMP_MODE;else{c=b;var d=p(c.location.originalHash||c.location.hash),e=p(c.location.search);da||(da=c.AMP_CONFIG&&c.AMP_CONFIG.v?c.AMP_CONFIG.v:"011533591342461");c=b.AMP_MODE={localDev:!1,development:!("1"!=d.development&&!c.AMP_DEV_MODE),examiner:"2"==d.development,filter:d.filter,geoOverride:d["amp-geo"],minified:!0,lite:void 0!=e.amp_lite,test:!1,log:d.log,version:"1533591342461",rtvVersion:da}}return c};var ea=Object.prototype.toString;function v(a){return"[object Object]"===ea.call(a)}function fa(a){return"number"===typeof a&&isFinite(a)};function ga(a){var b=a.message,c=String(Math.random());a.message=c;if(a.message===c)return a.message=b,a;var b=Error(a.message),d;for(d in a)b[d]=a[d];b.stack=a.stack;return b}function ia(a){for(var b=null,c="",d=0;d<arguments.length;d++){var e=arguments[d];e instanceof Error&&!b?b=ga(e):(c&&(c+=" "),c+=e)}b?c&&(b.message=c+": "+b.message):b=Error(c);return b}function x(a){var b=ia.apply(null,arguments);setTimeout(function(){self.reportError(b);throw b;})}self.log=self.log||{user:null,dev:null,userForEmbed:null};
var ja=self.log;function z(){if(!ja.user)throw Error("failed to call initLogConstructor");return ja.user}function B(){if(ja.dev)return ja.dev;throw Error("failed to call initLogConstructor");};var C=Object.prototype.hasOwnProperty;function ka(){var a,b=Object.create(null);a&&Object.assign(b,a);return b}function D(a){return a||{}}
function la(a,b){var c;c=void 0===c?10:c;var d=[],e=[];e.push({t:a,s:b,d:0});for(b={};0<e.length;){var f=e.shift();b.t=f.t;b.s=f.s;b.d=f.d;if(d.includes(b.s))throw Error("Source object has a circular reference.");d.push(b.s);b.t!==b.s&&(b.d>c?Object.assign(b.t,b.s):(Object.keys(b.s).forEach(function(a){return function(b){var c=a.s[b];if(C.call(a.t,b)){var d=a.t[b];if(v(c)&&v(d)){e.push({t:d,s:c,d:a.d+1});return}}a.t[b]=c}}(b)),b={s:b.s,t:b.t,d:b.d}))}return a};function ma(a,b){return b.length>a.length?!1:0==a.lastIndexOf(b,0)}function na(a){for(var b=a.length,c=5381,d=0;d<b;d++)c=33*c^a.charCodeAt(d);return String(c>>>0)};var E=self.AMP_CONFIG||{},oa={thirdParty:E.thirdPartyUrl||"https://3p.ampproject.net",thirdPartyFrameHost:E.thirdPartyFrameHost||"ampproject.net",thirdPartyFrameRegex:("string"==typeof E.thirdPartyFrameRegex?new RegExp(E.thirdPartyFrameRegex):E.thirdPartyFrameRegex)||/^d-\d+\.ampproject\.net$/,cdn:E.cdnUrl||"https://cdn.ampproject.org",cdnProxyRegex:("string"==typeof E.cdnProxyRegex?new RegExp(E.cdnProxyRegex):E.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/,localhostRegex:/^https?:\/\/localhost(:\d+)?$/,
errorReporting:E.errorReportingUrl||"https://amp-error-reporting.appspot.com/r",localDev:E.localDev||!1};function pa(a){this.$a=a;this.ua=this.Ca=0;this.na=Object.create(null)}pa.prototype.has=function(a){return!!this.na[a]};pa.prototype.get=function(a){var b=this.na[a];if(b)return b.access=++this.ua,b.payload};pa.prototype.put=function(a,b){this.has(a)||this.Ca++;this.na[a]={payload:b,access:this.ua};if(!(this.Ca<=this.$a)){B().warn("lru-cache","Trimming LRU cache");a=this.na;var c=this.ua+1,d,e;for(e in a){var f=a[e].access;f<c&&(c=f,d=e)}void 0!==d&&(delete a[d],this.Ca--)}};D({c:!0,v:!0,a:!0,ad:!0});var qa,ra,sa=["javascript:","data:","vbscript:"];
function F(a,b){qa||(qa=self.document.createElement("a"),ra=self.UrlCache||(self.UrlCache=new pa(100)));var c=b?null:ra,d=qa;if(c&&c.has(a))a=c.get(a);else{d.href=a;d.protocol||(d.href=d.href);var e={href:d.href,protocol:d.protocol,host:d.host,hostname:d.hostname,port:"0"==d.port?"":d.port,pathname:d.pathname,search:d.search,hash:d.hash,origin:null};"/"!==e.pathname[0]&&(e.pathname="/"+e.pathname);if("http:"==e.protocol&&80==e.port||"https:"==e.protocol&&443==e.port)e.port="",e.host=e.hostname;e.origin=
d.origin&&"null"!=d.origin?d.origin:"data:"!=e.protocol&&e.host?e.protocol+"//"+e.host:e.href;c&&c.put(a,e);a=e}return a}function va(a,b){var c;if(!b)return a;var d=a.split("#",2),e=d[0].split("?",2),f=e[0]+(e[1]?c?"?"+b+"&"+e[1]:"?"+e[1]+"&"+b:"?"+b);return f+=d[1]?"#"+d[1]:""}
function wa(a){var b=[],c;for(c in a){var d=a[c];if(null!=d)if(Array.isArray(d))for(var e=0;e<d.length;e++){var f=d[e];b.push(encodeURIComponent(c)+"="+encodeURIComponent(f))}else b.push(encodeURIComponent(c)+"="+encodeURIComponent(d))}return b.join("&")}function xa(a){"string"==typeof a&&(a=F(a));var b;(b="https:"==a.protocol||"localhost"==a.hostname)||(a=a.hostname,b=a.length-10,b=0<=b&&a.indexOf(".localhost",b)==b);return b}
function ya(a,b){var c;c=void 0===c?"source":c;z().assert(null!=a,"%s %s must be available",b,c);var d=a;z().assert(xa(d)||/^(\/\/)/.test(d),'%s %s must start with "https://" or "//" or be relative and served from either https or from localhost. Invalid value: %s',b,c,d)}function za(a){if(!a)return!0;"string"==typeof a&&(a=F(a));return!sa.includes(a.protocol)};function Aa(a){return a.AMP_CONFIG&&a.AMP_CONFIG.type?a.AMP_CONFIG.type:"unknown"}function G(a,b){var c=Ba(a);return!!c[b]}
function Ba(a){if(a.__AMP__EXPERIMENT_TOGGLES)return a.__AMP__EXPERIMENT_TOGGLES;a.__AMP__EXPERIMENT_TOGGLES=Object.create(null);var b=a.__AMP__EXPERIMENT_TOGGLES;if(a.AMP_CONFIG)for(var c in a.AMP_CONFIG){var d=a.AMP_CONFIG[c];"number"===typeof d&&0<=d&&1>=d&&(b[c]=Math.random()<d)}if(a.AMP_CONFIG&&Array.isArray(a.AMP_CONFIG["allow-doc-opt-in"])&&0<a.AMP_CONFIG["allow-doc-opt-in"].length){var e=a.AMP_CONFIG["allow-doc-opt-in"],f=a.document.head.querySelector('meta[name="amp-experiments-opt-in"]');
if(f){var k=f.getAttribute("content").split(",");for(c=0;c<k.length;c++)-1!=e.indexOf(k[c])&&(b[k[c]]=!0)}}Object.assign(b,Ca(a));if(a.AMP_CONFIG&&Array.isArray(a.AMP_CONFIG["allow-url-opt-in"])&&0<a.AMP_CONFIG["allow-url-opt-in"].length){c=a.AMP_CONFIG["allow-url-opt-in"];a=p(a.location.originalHash||a.location.hash);for(var h=0;h<c.length;h++){var l=a["e-"+c[h]];"1"==l&&(b[c[h]]=!0);"0"==l&&(b[c[h]]=!1)}}return b}
function Ca(a){a:{var b;try{b=a.document.cookie}catch(k){b=""}if(a=b)for(a=a.split(";"),b=0;b<a.length;b++){var c=a[b].trim(),d=c.indexOf("=");if(-1!=d&&"AMP_EXP"==ba(c.substring(0,d).trim(),void 0)){a=c.substring(d+1).trim();a=ba(a,a);break a}}a=null}var e=a,f=e?e.split(/\s*,\s*/g):[];a=Object.create(null);for(b=0;b<f.length;b++)0!=f[b].length&&("-"==f[b][0]?a[f[b].substr(1)]=!1:a[f[b]]=!0);return a}
function Da(a,b){a.experimentBranches=a.experimentBranches||{};var c={},d;for(d in b)if(C.call(b,d))if(C.call(a.experimentBranches,d))c[d]=a.experimentBranches[d];else if(!b[d].isTrafficEligible||!b[d].isTrafficEligible(a))a.experimentBranches[d]=null;else if(!a.experimentBranches[d]&&G(a,d)){var e=b[d].branches,f=e;a.experimentBranches[d]=f[Math.floor(Math.random()*f.length)]||null;c[d]=a.experimentBranches[d]}return c};function H(){var a,b;this.promise=new Promise(function(c,d){a=c;b=d});this.resolve=a;this.reject=b}function Ea(a){return new Promise(function(b){b(a())})};function I(a,b){if(a.nodeType){var c=Fa((a.ownerDocument||a).defaultView,b);if(c)return c}return J(a,b)}function Ga(a,b){var c=Ha(a);Fa(a,"url-replace");Ia(a,a,function(){return b});K(a,"url-replace")}function Fa(a,b){var c=Ha(a);return a!=c&&Ja(a,b)?K(a,b):null}function L(a,b){a=Ha(a);return K(a,b)}function J(a,b){a=Ka(a);a=La(a);return K(a,b)}function Ma(a,b){return Na(La(a),b)}function Ha(a){return a.__AMP_TOP||a}
function Ka(a){return a.nodeType?L((a.ownerDocument||a).defaultView,"ampdoc").getAmpDoc(a):a}function La(a){a=Ka(a);return a.isSingleDoc()?a.win:a}function K(a,b){Ja(a,b);var c=Oa(a);a=c[b];a.obj||(a.obj=new a.ctor(a.context),a.ctor=null,a.context=null,a.resolve&&a.resolve(a.obj));return a.obj}function Ia(a,b,c){var d=Oa(a),e=d["url-replace"];e||(e=d["url-replace"]={obj:null,promise:null,resolve:null,context:null,ctor:null});e.ctor||e.obj||(e.ctor=c,e.context=b,e.resolve&&K(a,"url-replace"))}
function Pa(a,b){var c=Na(a,b);if(c)return c;var d=new H,e=d,f=e.promise,e=e.resolve;Oa(a)[b]={obj:null,promise:f,resolve:e,context:null,ctor:null};return f}function Na(a,b){var c=Oa(a)[b];if(c){if(c.promise)return c.promise;K(a,b);return c.promise=Promise.resolve(c.obj)}return null}function Oa(a){var b=a.services;b||(b=a.services={});return b}
function Qa(a){a=Oa(a);var b={},c;for(c in a)if(b.id=c,Object.prototype.hasOwnProperty.call(a,b.id)){var d=a[b.id];d.obj?Ra(b.id,d.obj):d.promise&&d.promise.then(function(a){return function(b){return Ra(a.id,b)}}(b));b={id:b.id}}}function Ra(a,b){if("function"==typeof b.dispose)try{b.dispose()}catch(c){B().error("SERVICE","failed to dispose service",a,c)}}function Ja(a,b){a=a.services&&a.services[b];return!(!a||!a.ctor&&!a.obj)};/*
 https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
var Sa={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},Ta=/(&|<|>|"|'|`)/g;function Ua(a,b,c){a=a.createElement(b);for(var d in c)a.setAttribute(d,c[d]);return a}function Va(a,b){for(var c,d=a;d&&d!==c;d=d.parentElement)if(b(d))return d;return null}function Wa(a){var b="A";if(a.closest)return a.closest(b);b=b.toUpperCase();return Va(a,function(a){return a.tagName==b})}function Xa(a){return a?a.replace(Ta,Za):a}function Za(a){return Sa[a]};function $a(a,b,c){var d=Ka(a),e=Ma(a,b);return e?e:d.whenBodyAvailable().then(function(){var a;a=d.win;var b=d.getHeadNode(),e;if(b){e=[];for(var b=b.querySelectorAll("script[custom-element]"),l=0;l<b.length;l++)e.push(b[l].getAttribute("custom-element"))}else e=[];a=e.includes(c)?L(a,"extensions").waitForExtension(a,c):Promise.resolve();return a}).then(function(){var e=d.win;return e.ampExtendedElements&&e.ampExtendedElements[c]?Pa(La(a),b):null})};function ab(a){return $a(a,"amp-analytics-instrumentation","amp-analytics")}function M(a){a=Ka(a);a=La(a);return K(a,"documentInfo").get()}function bb(a){return L(a,"extensions")}function cb(a){return J(a,"resources")}function N(a){return L(a,"timer")}function db(a){return I(a,"url-replace")}function Q(a){return J(a,"viewer")};function eb(a){for(var b=[],c=0;a&&1==a.nodeType&&25>c;){var d="";a.id&&(d="/"+a.id);var e=a.nodeName.toLowerCase();b.push(""+e+d+fb(a));c++;a=a.parentElement}return b.join()}function fb(a){for(var b=a.nodeName,c=0,d=0,e=a.previousElementSibling;e&&25>d&&100>c;)e.nodeName==b&&d++,c++,e=e.previousElementSibling;return 25>d&&100>c?"."+d:""};function gb(a){var b=16374,c=hb,d=[],e=c&&null!=c.value&&""!==c.value?encodeURIComponent(c.name)+"="+encodeURIComponent(String(c.value)):null,f=b-49;e&&(f-=e.length+1);for(var k=Object.keys(a),h=0;h<k.length;h++){var l=k[h],m=a[l];if(null!=m&&""!==m){var n=encodeURIComponent(l)+"=",r=encodeURIComponent(String(m)),t=n.length+r.length+1;if(t>f){var w=r.substr(0,f-n.length-1).replace(/%\w?$/,"");w&&d.push(n+w);e&&d.push(e);break}d.push(n+r);f-=t}}return d.length?"https://securepubads.g.doubleclick.net/gampad/ads?"+
d.join("&"):"https://securepubads.g.doubleclick.net/gampad/ads"};function ib(a,b){var c="AMP_ECID_GOOGLE",d="_ga",e=isNaN(b)||null==b?1E3:b,f=Pa(La(a),"cid").then(function(a){if(a)return a.get({scope:c,createCookieIfNotPresent:!0,cookieName:d},Promise.resolve(void 0)).catch(function(a){B().error("AD-CID",a)})});return N(a.win).timeoutPromise(e,f,"cid timeout").catch(function(a){B().warn("AD-CID",a)})};var jb;function kb(a,b,c){var d=void 0,e=a,f=c,k;k=function(a){try{return f(a)}catch(n){throw self.reportError(n),n;}};var h=lb(),l=!1;d&&(l=d.capture);e.addEventListener(b,k,h?d:l);return function(){e&&e.removeEventListener(b,k,h?d:l);k=e=f=null}}function lb(){if(void 0!==jb)return jb;jb=!1;try{var a={get capture(){jb=!0}};self.addEventListener("test-options",null,a);self.removeEventListener("test-options",null,a)}catch(b){}return jb};function mb(a,b,c){var d=c,e=kb(a,b,function(a){try{d(a)}finally{d=null,e()}});return e}function nb(a){var b,c;if(a.complete||"complete"==a.readyState||a.document&&"complete"==a.document.readyState)return Promise.resolve(a);var d=new Promise(function(d,f){var e=a.tagName;b="AUDIO"===e||"VIDEO"===e?mb(a,"loadstart",d):mb(a,"load",d);e&&(c=mb(a,"error",f))});return d.then(function(){c&&c();return a},function(){b&&b();var c=a;c&&c.src&&(c=c.src);throw z().createError("Failed to load:",c);})};function ob(a,b,c){return nb(a).then(function(){return pb(a,b,c)})}function pb(a,b,c){var d=a.performance&&a.performance.timing;if(d&&0!=d.navigationStart){var e=void 0===c?d[b]:d[c]-d[b];if(fa(e)&&!(0>e))return e}}function qb(a,b){var c=a.performance&&a.performance.navigation;if(c&&void 0!==c[b])return c[b]}function rb(a){this.ampdoc=a;this.fa=this.ga=void 0;this.F=Object.create(null);this.qa=!1;sb(this)}g=rb.prototype;g.initialize=function(){};
g.get=function(a){this.qa||(this.initialize(),this.qa=!0);return this.F[a]};g.set=function(a,b){this.F[a]=this.F[a]||{sync:void 0,async:void 0};this.F[a].sync=b;this.fa=this.ga=void 0;return this};g.setAsync=function(a,b){this.F[a]=this.F[a]||{sync:void 0,async:void 0};this.F[a].async=b;this.fa=this.ga=void 0;return this};g.setBoth=function(a,b,c){return this.set(a,b).setAsync(a,c)};
g.getExpr=function(a,b,c){var d=this;this.qa||(this.initialize(),this.qa=!0);var e=a?Object.keys(a):null;if(e&&0<e.length){var f=Object.keys(this.F);e.forEach(function(a){void 0===d.F[a]&&f.push(a)});return tb(this,f,b,c)}this.ga||b||(this.ga=tb(this,Object.keys(this.F)));!this.fa&&b&&(this.fa=tb(this,Object.keys(this.F),b,c));return b?this.fa:this.ga};
function tb(a,b,c,d){sb(a)&&(b=b.filter(function(b){return sb(a).includes(b)}));d&&(b=b.filter(function(a){return d[a]}));b.sort(function(a,b){return b.length-a.length});var e=b.map(function(a){return"$"===a[0]?"\\"+a:a}).join("|"),f="\\$?("+e+")";c||(f+="(?:\\(((?:\\s*[0-9a-zA-Z-_.]*\\s*(?=,|\\)),?)*)\\s*\\))?");return new RegExp(f,"g")}
function sb(a){if(a.Ha)return a.Ha;var b=a.ampdoc.getRootNode().head;if(!b)return null;b=b.querySelector('meta[name="amp-allowed-url-macros"]');if(!b)return null;a.Ha=b.getAttribute("content").split(",").map(function(a){return a.trim()});return a.Ha};function R(a){var b;try{return JSON.parse(a)}catch(c){b&&b(c)}};var ub={"AMP-CAROUSEL":"ac","AMP-FX-FLYING-CARPET":"fc","AMP-LIGHTBOX":"lb","AMP-STICKY-AD":"sa"},vb={visible:"1",hidden:"2",prerender:"3",unloaded:"5"},hb={name:"trunc",value:"1"},wb=/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org((\/.*)|($))+/;function xb(a){var b=a.element.getAttribute("type"),c=a.win;return("doubleclick"==b||"adsense"==b)&&G(c,"a4aProfilingRate")}
function yb(a,b){for(var c=a,d=c.element,c=c.win,e=a.getPageLayoutBox(),f=0;c!=c.parent&&100>f;)c=c.parent,f++;var k=f,h=zb(d),l=d.getAttribute("data-experiment-id");b&&(l=Ab(b,l));return{adf:na(eb(d)),nhd:k,eid:l,adx:e.left,ady:e.top,oid:"2",act:h.length?h.join():null}}
function Bb(a,b){function c(a){return a.element.querySelector("amp-ad[type="+b+"]")}var d=Cb;return cb(a.document).getMeasuredResources(a,function(a){var d="AMP-AD"==a.element.tagName&&a.element.getAttribute("type")==b;if(d)return!0;var e=Object.keys(ub).includes(a.element.tagName)&&!!c(a);return e}).then(function(a){return Promise.all(a.map(function(a){var b;if("AMP-AD"==a.element.tagName)b=a.element;else if(b=c(a),ma(b.tagName,"AMP-"),b.createdCallback)b=Promise.resolve(b);else{if(!b.__AMP_UPG_PRM){var d=
new H;b.__AMP_UPG_PRM=d.promise;b.__AMP_UPG_RES=d.resolve}b=b.__AMP_UPG_PRM}return b}))}).then(function(a){return a.reduce(function(a,b){var c=d(b);(a[c]||(a[c]=[])).push(b.getImpl());return a},{})})}
function Db(a,b){var c=a.win,d=a.getAmpDoc();return Promise.all([ib(d),Q(d).getReferrerUrl()]).then(function(e){var f=e[0],k=M(d);c.gaGlobal=c.gaGlobal||{cid:f,hid:k.pageViewId};var h=c.screen,l=J(d,"viewport"),m=l.getRect(),n=l.getSize(),r=Q(d).getVisibilityState(),t=a.isXhrAllowed()?"3":"5",w=Eb(c,d,f),u=c.gaGlobal.cid||null,y=c.gaGlobal.hid||null,A=m.width,O=m.height,U=h?h.availWidth:null,ta=h?h.availHeight:null,id=h?h.colorDepth:null,jd=h?h.width:null,h=h?h.height:null,kd=-(new Date).getTimezoneOffset(),
Ya;try{Ya=c.history.length}catch(Ie){Ya=0}var ld=c!=c.top?n.width:null,md=c!=c.top?n.height:null,ha;ha=Fb(Aa(c));ha=wb.test(c.location.origin)&&"0"!=ha?ha:null;var nd=vb[r]||"0",od=l.getScrollLeft(),pd=l.getScrollTop(),ua=0,P=c.document;c.SVGElement&&P.createElementNS&&(ua|=Gb);P=P.createElement("iframe");P.sandbox&&P.sandbox.supports&&(P.sandbox.supports("allow-top-navigation-by-user-activation")&&(ua|=Hb),P.sandbox.supports("allow-popups-to-escape-sandbox")&&(ua|=Ib));return{is_amp:t,amp_v:"1533591342461",
d_imp:"1",c:w,ga_cid:u,ga_hid:y,dt:b,biw:A,bih:O,u_aw:U,u_ah:ta,u_cd:id,u_w:jd,u_h:h,u_tz:kd,u_his:Ya,isw:ld,ish:md,art:ha,vis:nd,scr_x:od,scr_y:pd,bc:ua||null,debug_experiment_id:(/(?:#|,)deid=([\d,]+)/i.exec(c.location.hash)||[])[1]||null,url:k.canonicalUrl,top:c!=c.top?Jb(c):null,loc:c.location.href==k.canonicalUrl?null:c.location.href,ref:e[1]||null}})}function Kb(a,b,c,d){var e=yb(a,d);return Db(a,b).then(function(a){Object.assign(c,e,a);return gb(c)+"&dtd="+Lb(b)})}
function Mb(a){return(/^(?:https?:\/\/)?([^\/\?:]+)/i.exec(a)||[])[1]||a}function Jb(a){var b=a.location.ancestorOrigins;if(b){var c=a.location.origin,d=b[b.length-1];if(c==d)return a.top.location.hostname;var e=Nb(a);return e==a||c==b[b.length-2]?Mb(e.document.referrer):Mb(d)}try{return a.top.location.hostname}catch(f){}a=Nb(a);try{return Mb(a.document.referrer)}catch(f){}return null}function Nb(a){for(var b=0;a.parent!=a.parent.parent&&100>b;)a=a.parent,b++;return a}
function Lb(a){a=Date.now()-a;return 1E6<=a?"M":0<=a?a:"-M"}function Eb(a,b,c){if(!a.ampAdPageCorrelator){if(G(a,"exp-new-correlator"))b=Math.floor(4503599627370496*Math.random());else{var d=M(b).pageViewId;b=c;d=Number(d||0);b=b?d+b.replace(/\D/g,"")%1E6*1E6:Math.floor(4503599627370496*Math.random())}a.ampAdPageCorrelator=b}return a.ampAdPageCorrelator}
function Ob(a,b){return D({on:a,request:"csi",sampleSpec:{sampleOn:"a4a-csi-${pageViewId}",threshold:1},selector:"amp-ad",selectionMethod:"closest",extraUrlParams:b})}
function Pb(a){if(!a.has("X-AmpAnalytics"))return null;try{var b=JSON.parse(a.get("X-AmpAnalytics")),c=b.url;if(!c.length)return null;for(var d={transport:{beacon:!1,xhrpost:!1},triggers:{continuousVisible:{on:"visible",visibilitySpec:{selector:"amp-ad",selectionMethod:"closest",visiblePercentageMin:50,continuousTimeMin:1E3}}}},e={},f=1;f<=c.length;f++)e["visibility"+f]=""+c[f-1];d.requests=e;d.triggers.continuousVisible.request=Object.keys(e);return d}catch(k){B().error("AMP-A4A","Invalid analytics",
k,a.get("X-AmpAnalytics"))}return null}function Ab(a,b){var c=a.filter(function(a){return Number(a)}).join(",");b=b||"";return b+(b&&c?",":"")+c}
function Qb(a,b,c,d,e){var f=Eb(a,b),k=Number(b.getAttribute("data-amp-slot-index")),h=encodeURIComponent(b.getAttribute("data-experiment-id")),l=b.getAttribute("type"),m=Number(pb(a,"navigationStart")||Date.now()),n=Math.round(a.performance&&a.performance.now?a.performance.now():Date.now()-m),r="https://csi.gstatic.com/csi?s=a4a"+("&c="+f+"&slotId="+k+"&qqid."+k+"="+d)+("&dt="+m)+("null"!=h?"&e."+k+"="+h:"")+("&rls=1533591342461&adt."+k+"="+l),t=e?"Friendly":"CrossDomain";c.triggers.continuousVisibleIniLoad=
{on:"ini-load",selector:"amp-ad",selectionMethod:"closest",request:"iniLoadCsi"};c.triggers.continuousVisibleRenderStart={on:"render-start",selector:"amp-ad",selectionMethod:"closest",request:"renderStartCsi"};c.requests.iniLoadCsi=r+("&met.a4a."+k+"=iniLoadCsi"+t+"."+n);c.requests.renderStartCsi=r+("&met.a4a."+k+"=renderStartCsi"+t+"."+n);c.requests.visibilityCsi=r+("&met.a4a."+k+"=visibilityCsi."+n);c.triggers.continuousVisible.request.push("visibilityCsi")}
function zb(a){var b={};a=a.parentElement;for(var c=0;a&&20>c;a=a.parentElement,c++){var d=a.tagName.toUpperCase();ub[d]&&(b[ub[d]]=!0)}return Object.keys(b)}function Fb(a){return{production:"0",control:"1",canary:"2"}[a]||null}var Rb=/\.google\.(?:com?\.)?[a-z]{2,3}$/;
function Sb(a,b,c,d,e){c=void 0===c?1:c;e=void 0===e?Date.now():e;d=Tb(a,b,d);return L(a,"xhr").fetchJson(d,{mode:"cors",method:"GET",ampCors:!1,credentials:"include"}).then(function(a){return a.json()}).then(function(d){var f=d.newToken,h=d["1p_jar"]||"",l=d.pucrd||"",m=parseInt(d.freshLifetimeSecs||"",10),n=parseInt(d.validLifetimeSecs||"",10),r=d.altDomain,t=Date.now()-e;return Rb.test(r)?c--?Sb(a,b,c,r,e):{fetchTimeMs:t}:0<m&&0<n&&"string"==typeof f?{token:f,jar:h,pucrd:l,freshLifetimeSecs:m,
validLifetimeSecs:n,fetchTimeMs:t}:{fetchTimeMs:t}}).catch(function(){return{}})}function Tb(a,b,c){!c&&a!=a.top&&a.location.ancestorOrigins&&(c=(a=Rb.exec(a.location.ancestorOrigins[a.location.ancestorOrigins.length-1]))&&a[0]||void 0);c=c||".google.com";var d=Mb(M(b).canonicalUrl);return"https://adservice"+c+"/adsid/integrator.json?domain="+d}var Gb=1,Hb=2,Ib=4;function Ub(a){return a?a.split(","):[]}function Vb(a){return Ub(a.getAttribute("data-experiment-id")).some(function(a){return"117152632"===a})};function Wb(){}Wb.prototype.maybeSelectExperiment=function(a,b,c,d){var e={};e[d]={isTrafficEligible:function(){return!0},branches:c};Da(a,e);return a.experimentBranches?a.experimentBranches[d]:null};new Wb;var Xb={google:"https://cdn.ampproject.org/amp-ad-verifying-keyset.json","google-dev":"https://cdn.ampproject.org/amp-ad-verifying-keyset-dev.json",cloudflare:"https://amp.cloudflare.com/amp-ad-verifying-keyset.json","cloudflare-dev":"https://amp.cloudflare.com/amp-ad-verifying-keyset-dev.json"};var Yb,Zb="Webkit webkit Moz moz ms O o".split(" ");function $b(a,b,c){if(ma(b,"--"))return b;Yb||(Yb=ka());var d=Yb[b];if(!d||c){d=b;if(void 0===a[b]){var e=b.charAt(0).toUpperCase()+b.slice(1);a:{for(var f=0;f<Zb.length;f++){var k=Zb[f]+e;if(void 0!==a[k]){e=k;break a}}e=""}var h=e;void 0!==a[h]&&(d=h)}c||(Yb[b]=d)}return d}function ac(a,b){for(var c in b)a.style.setProperty($b(b,c),b[c].toString(),"important")}function bc(a,b,c){var d;(b=$b(a.style,b,void 0))&&(a.style[b]=d?c+d:c)}
function cc(a,b){if(b=$b(a.style,b,void 0))return a.style[b]}function S(a,b){for(var c in b)bc(a,c,b[c])}function dc(a,b){var c={};b.forEach(function(a){c[a]=null});S(a,c)};function ec(a,b,c){ab(a).then(function(d){d&&d.triggerEventForTarget(a,b,c)})};self.AMPErrors=self.AMPErrors||[];function fc(a){return a?"string"==typeof a?ma(a,"CANCELLED"):"string"==typeof a.message?ma(a.message,"CANCELLED"):!1:!1};function gc(a,b,c){function d(a,b){for(var d=/([^\n]*)(\n)?/g,f;(f=d.exec(a))&&(e+=f[1],f[2]&&(c(e,b&&d.lastIndex===a.length),e=""),d.lastIndex!==a.length););}var e="";if(b.body&&a.TextDecoder){var f=new TextDecoder("utf-8"),k=b.body.getReader();k.read().then(function l(a){a.value&&d(f.decode(a.value,{stream:!0}),a.done);a.done||k.read().then(l)})}else b.text().then(function(a){return d(a,!0)})}
function hc(a){var b;return function(c,d){if(b){var e=R(b)||{},f=Object.keys(e).reduce(function(a,b){a[b.toLowerCase()]=e[b];return a},{});a(ic(c),f,d);b=null}else b=c}}function ic(a){return a.replace(/\\(n|r|\\)/g,function(a,c){return"n"==c?"\n":"r"==c?"\r":"\\"})};function jc(a,b,c,d,e){e=void 0===e?!1:e;for(var f=[],k=a.split(","),h={},l=0;l<k.length;h={minWidth:h.minWidth,minHeight:h.minHeight},l++){var m=k[l],n=m.split("x");if(2!=n.length)z().error("AMP-AD","Invalid multi-size data format '"+m+"'.");else{var r=Number(n[0]),n=Number(n[1]);if(kc(r,n,function(a){return isNaN(a)||0>=a},function(a){return isNaN(a)||0>=a},function(a){return a.map(function(a){return"Invalid "+a.dim+" of "+a.val+" given for secondary size."}).join(" ")})&&(e||kc(r,n,function(a){return a>
b},function(a){return a>c},function(a){return a.map(function(a){return"Secondary "+a.dim+" "+a.val+" "+("can't be larger than the primary "+a.dim+".")}).join(" ")}))){if(d){var t=2/3;h.minWidth=t*b;h.minHeight=t*c;if(!kc(r,n,function(a){return function(b){return b<a.minWidth}}(h),function(a){return function(b){return b<a.minHeight}}(h),function(a){return a.map(function(a){return"Secondary "+a.dim+" "+a.val+" is "+("smaller than 2/3rds of the primary "+a.dim+".")}).join(" ")}))continue}f.push([r,n])}}}return f}
function kc(a,b,c,d,e){var f=[];c(a)&&f.push({dim:"width",val:a});d(b)&&f.push({dim:"height",val:b});f.length&&z().warn("AMP-AD",e(f));return!f.length};var lc={SUFFICIENT:1,INSUFFICIENT:2,UNKNOWN_NOT_REQUIRED:3,UNKNOWN:4};function mc(a,b,c,d){return{left:a,top:b,width:c,height:d,bottom:b+d,right:a+c,x:a,y:b}}function nc(a){for(var b=-Infinity,c=Infinity,d=-Infinity,e=Infinity,f=0;f<arguments.length;f++){var k=arguments[f];if(k&&(b=Math.max(b,k.left),c=Math.min(c,k.left+k.width),d=Math.max(d,k.top),e=Math.min(e,k.top+k.height),c<b||e<d))return null}return Infinity==c?null:mc(b,d,c-b,e-d)}function T(a,b,c){return 0==b&&0==c||0==a.width&&0==a.height?a:mc(a.left+b,a.top+c,a.width,a.height)};function oc(){this.A=null}g=oc.prototype;g.add=function(a){var b=this;this.A||(this.A=[]);this.A.push(a);return function(){b.remove(a)}};g.remove=function(a){this.A&&(a=this.A.indexOf(a),-1<a&&this.A.splice(a,1))};g.removeAll=function(){this.A&&(this.A.length=0)};g.fire=function(a){if(this.A)for(var b=this.A,c=0;c<b.length;c++)(0,b[c])(a)};g.getHandlerCount=function(){return this.A?this.A.length:0};function pc(a,b){var c=1E3;function d(d){k=null;f=a.setTimeout(e,c);b.apply(null,d)}function e(){f=0;k&&d(k)}var f=0,k=null;return function(a){for(var b=[],c=0;c<arguments.length;++c)b[c-0]=arguments[c];f?k=b:d(b)}};var qc={"AMP-FX-FLYING-CARPET":!0,"AMP-LIGHTBOX":!0,"AMP-STICKY-AD":!0,"AMP-LIGHTBOX-GALLERY":!0};function rc(a){return"fixed"==a||"fixed-height"==a||"responsive"==a||"fill"==a||"flex-item"==a||"fluid"==a||"intrinsic"==a}function sc(a){a=parseFloat(a);return fa(a)?a:void 0};function tc(a,b,c,d){var e=Date.now(),f=b.getAttribute("width"),k=b.getAttribute("height");d=d?d:{};d.width=sc(f);d.height=sc(k);b.getAttribute("title")&&(d.title=b.getAttribute("title"));var h=a.location.href;"about:srcdoc"==h&&(h=a.parent.location.href);var l=M(b),f=Q(b),m=f.getUnconfirmedReferrerUrl(),n=b.getPageLayoutBox(),k=d,r=oa.thirdParty+"/1533591342461/ampcontext-v0.js",t=l.sourceUrl,w=l.canonicalUrl,u=l.pageViewId,y={href:h},A=b.tagName,O={localDev:!1,development:q(void 0).development,
filter:q(void 0).filter,minified:!0,lite:q(void 0).lite,test:!1,log:q(void 0).log,version:q(void 0).version,rtvVersion:q(void 0).rtvVersion},U=a;k._context=D({ampcontextVersion:"1533591342461",ampcontextFilepath:r,sourceUrl:t,referrer:m,canonicalUrl:w,pageViewId:u,location:y,startTime:e,tagName:A,mode:O,canary:!(!U.AMP_CONFIG||!U.AMP_CONFIG.canary),hidden:!f.isVisible(),initialLayoutRect:n?{left:n.left,top:n.top,width:n.width,height:n.height}:null,initialIntersection:b.getIntersectionChangeEntry(),
domFingerprint:na(eb(b)),experimentToggles:Ba(a),sentinel:c});var ta=b.getAttribute("src");ta&&(d.src=ta);return d};function uc(a){var b="nameframe",c=b||"frame";a.defaultBootstrapSubDomain=a.defaultBootstrapSubDomain||"d-"+vc(a);return"https://"+a.defaultBootstrapSubDomain+("."+oa.thirdPartyFrameHost+"/1533591342461/")+(c+".html")}function vc(a){var b;if(a.crypto&&a.crypto.getRandomValues){var c=new Uint32Array(2);a.crypto.getRandomValues(c);b=String(c[0])+c[1]}else b=String(a.Math.random()).substr(2)+"0";return b};var wc=null,xc=null;function yc(a,b){void 0===a["3pla"]&&(a["3pla"]=0);a["3pla"]++;if(!wc){var c=new H;wc=c.promise;xc=c.resolve}N(a).timeoutPromise(1E3,b).catch(function(){}).then(function(){--a["3pla"]||(xc(),xc=wc=null)})};function zc(a,b){return $a(a,"consentPolicyManager","amp-consent").then(function(a){return a?a.whenPolicyResolved(b):null})};var Ac="AMPDOC_HOST AMPDOC_HOSTNAME AMPDOC_URL AMP_VERSION AVAILABLE_SCREEN_HEIGHT AVAILABLE_SCREEN_WIDTH BACKGROUND_STATE BROWSER_LANGUAGE CANONICAL_HOST CANONICAL_HOSTNAME CANONICAL_PATH CANONICAL_URL CLIENT_ID COUNTER DOCUMENT_CHARSET DOCUMENT_REFERRER FIRST_CONTENTFUL_PAINT FIRST_VIEWPORT_READY MAKE_BODY_VISIBLE PAGE_VIEW_ID RANDOM SCREEN_COLOR_DEPTH SCREEN_HEIGHT SCREEN_WIDTH SCROLL_HEIGHT SCROLL_LEFT SCROLL_TOP SCROLL_WIDTH SHARE_TRACKING_INCOMING SHARE_TRACKING_OUTGOING SOURCE_HOST SOURCE_HOSTNAME SOURCE_PATH SOURCE_URL TIMESTAMP TIMEZONE TIMEZONE_CODE TITLE TOTAL_ENGAGED_TIME USER_AGENT VARIANT VARIANTS VIEWER VIEWPORT_HEIGHT VIEWPORT_WIDTH".split(" ");
function Bc(a,b){rb.call(this,a);this.eb=db(a).getVariableSource();this.h=b}aa(Bc,rb);
Bc.prototype.initialize=function(){var a=this;this.set("AD_NAV_TIMING",function(b,c){z().assert(b,"The first argument to AD_NAV_TIMING, the start attribute name, is required");return pb(a.h,b,c)}).setAsync("AD_NAV_TIMING",function(b,c){z().assert(b,"The first argument to AD_NAV_TIMING, the start attribute name, is required");return ob(a.h,b,c)});this.set("AD_NAV_TYPE",function(){return qb(a.h,"type")});this.set("AD_NAV_REDIRECT_COUNT",function(){return qb(a.h,"redirectCount")});this.set("HTML_ATTR",
this.fb.bind(this));for(var b=0;b<Ac.length;b++){var c=Ac[b],d=this.eb.get(c);this.set(c,d.sync).setAsync(c,d.async)}};
Bc.prototype.fb=function(a,b){var c=20,d=10,e=10,f="A4AVariableSource",k=Array.prototype.slice.call(arguments,1);if(!a||!k.length)return"[]";if(k.length>e)return z().error(f,"At most "+e+" may be requested."),"[]";a=decodeURI(a);var h;try{h=this.h.document.querySelectorAll(a)}catch(u){return z().error(f,"Invalid selector: "+a),"[]"}if(h.length>c)return z().error(f,"CSS selector may match at most "+(c+" elements.")),"[]";for(var l=[],m=0;m<h.length&&l.length<d;++m){for(var n={},r=!1,t=0;t<k.length;++t){var w=
k[t];h[m].hasAttribute(w)&&(n[w]=h[m].getAttribute(w),r=!0)}r&&l.push(n)}return JSON.stringify(l)};function Cc(a){if("undefined"!==typeof TextDecoder)return(new TextDecoder("utf-8")).decode(a);for(var b=new Uint8Array(a.buffer||a),c=Array(b.length),d=0;d<b.length;d++)c[d]=String.fromCharCode(b[d]);var e=c.join("");return decodeURIComponent(escape(e))}function Dc(a){for(var b=new Uint8Array(a.length),c=0;c<a.length;c++){var d=a.charCodeAt(c);b[c]=d}return b};function Ec(a,b){this.h=a;this.jb=b;this.ka=L(a,"crypto").isPkcsAvailable()?{}:null;this.Pa=a.performance&&a.performance.now?a.performance.now.bind(a.performance):Date.now}Ec.prototype.loadKeyset=function(a){if(this.ka&&!this.ka[a]){var b={},c=Fc(this,b,a,null);this.ka[a]={promise:c,keys:b}}};
Ec.prototype.verify=function(a,b){var c=/^([A-Za-z0-9._-]+):([A-Za-z0-9._-]+):([A-Za-z0-9+/]{341}[AQgw]==)$/;if(!b.has("AMP-Fast-Fetch-Signature"))return Promise.resolve(1);var d=b.get("AMP-Fast-Fetch-Signature");b=c.exec(d);return b?this.verifyCreativeAndSignature(b[1],b[2],Dc(atob(b[3])),a):(z().error("AMP-A4A","Invalid signature header: "+d.split(":")[0]),Promise.resolve(3))};
Ec.prototype.verifyCreativeAndSignature=function(a,b,c,d){var e=this;if(!this.ka)return Promise.resolve(4);var f=this.ka[a];return f.promise.then(function(k){if(!k)return 1;var h=f.keys[b];return void 0===h?(f.promise=Fc(e,f.keys,a,b).then(function(a){void 0===f.keys[b]&&(f.keys[b]=null);return a}),e.verifyCreativeAndSignature(a,b,c,d)):null===h?2:h.then(function(a){if(!a)return 1;var b=L(e.h,"crypto");return b.verifyPkcs(a,c,d).then(function(a){return a?0:3},function(a){a=a&&a.message;B().error("AMP-A4A",
"Failed to verify signature: "+a);return 1})})})};
function Fc(a,b,c,d){var e=a.jb[c];null!=d&&(e+="?kid="+encodeURIComponent(d));return L(a.h,"xhr").fetchJson(e,{mode:"cors",method:"GET",ampCors:!1,credentials:"omit"}).then(function(d){d.headers.get("Content-Type");return d.json().then(function(d){if(!d||!Array.isArray(d.keys))return Gc(c,"Key set ("+JSON.stringify(d)+') has no "keys"'),!1;d.keys.forEach(function(d){d&&"string"==typeof d.kid?void 0===b[d.kid]&&(b[d.kid]=L(a.h,"crypto").importPkcsKey(d).catch(function(a){var b=JSON.stringify(d);Gc(c,
"Failed to import key ("+b+"): "+(a&&a.message));return null})):Gc(c,"Key ("+JSON.stringify(d)+') has no "kid"')});return!0},function(a){Gc(c,"Failed to parse JSON: "+(a&&a.response));return!1})},function(a){a&&a.response&&Gc(c,"Status code "+a.response.status);return!1})}function Gc(a,b){B().error("AMP-A4A","Signing service error for "+a+": "+b)};function Hc(a,b,c){var d=!0,d=void 0===d?!1:d;c=void 0===c?!1:c;var e=a.ownerDocument,f=Ua(e,"amp-analytics",D({sandbox:"true",trigger:c?"":"immediate"})),k=Ua(e,"script",D({type:"application/json"}));k.textContent=JSON.stringify(b);f.appendChild(k);f.CONFIG=b;d?(b=bb(a.ownerDocument.defaultView),d=Ka(a),b.installExtensionForDoc(d,"amp-analytics")):ab(a).then(function(){});a.appendChild(f);return f};function Ic(){this.L=ka();this.D=null}g=Ic.prototype;g.get=function(a){return this.L[a]||null};g.whenSignal=function(a){var b=this.D&&this.D[a];if(!b){var c=this.L[a];null!=c?b={promise:"number"==typeof c?Promise.resolve(c):Promise.reject(c)}:(c=new H,b={promise:c.promise,resolve:c.resolve,reject:c.reject});this.D||(this.D=ka());this.D[a]=b}return b.promise};
g.signal=function(a,b){if(null==this.L[a]){var c=b||Date.now();this.L[a]=c;(a=this.D&&this.D[a])&&a.resolve&&(a.resolve(c),a.resolve=void 0,a.reject=void 0)}};g.rejectSignal=function(a,b){null==this.L[a]&&(this.L[a]=b,(a=this.D&&this.D[a])&&a.reject&&(a.reject(b),a.resolve=void 0,a.reject=void 0))};g.reset=function(a){this.L[a]&&delete this.L[a];var b=this.D&&this.D[a];b&&!b.resolve&&delete this.D[a]};var Jc=["AMP-AD","AMP-ANALYTICS","AMP-PIXEL","AMP-AD-EXIT"],Kc;function Lc(a,b){Mc(a,b)}
function Nc(a,b,c,d){function e(){a.contentWindow.addEventListener("securitypolicyviolation",function(a){B().warn("FIE","security policy violation",a)})}var f=Ha(a.ownerDocument.defaultView),k=bb(f);bc(a,"visibility","hidden");a.setAttribute("referrerpolicy","unsafe-url");c.extensionIds&&c.extensionIds.forEach(function(a){return k.preloadExtension(a)});var h=Oc(c);a.onload=function(){a.readyState="complete"};var l;void 0===Kc&&(Kc="srcdoc"in HTMLIFrameElement.prototype);if(Kc)a.srcdoc=h,l=nb(a),b.appendChild(a),
e();else{a.src="about:blank";b.appendChild(a);var m=a.contentWindow.document;m.open();e();m.write(h);l=nb(a.contentWindow);m.close()}var n;n=Pc(a)?Promise.resolve():new Promise(function(b){var c=f.setInterval(function(){Pc(a)&&(b(),f.clearInterval(c))},5);l.catch(function(a){x(a)}).then(function(){b();f.clearInterval(c)})});return n.then(function(){var b=new Qc(a,c,l);a.__AMP_EMBED__=b;k.installExtensionsInChildWindow(a.contentWindow,c.extensionIds||[],d);Rc(b);return b})}
function Pc(a){a=a.contentWindow&&a.contentWindow.document;return!!(a&&"loading"!=a.readyState&&"uninitialized"!=a.readyState&&a.body&&a.body.firstChild)}
function Oc(a){var b=a.html,c=b.toUpperCase(),d=c.indexOf("<HEAD");-1!=d&&(d=c.indexOf(">",d+1)+1);-1==d&&(d=c.indexOf("<BODY"));-1==d&&(d=c.indexOf("<HTML"),-1!=d&&(d=c.indexOf(">",d+1)+1));var e=[];0<d&&e.push(b.substring(0,d));e.push('<base href="'+Xa(a.url)+'">');a.fonts&&a.fonts.forEach(function(a){e.push('<link href="'+Xa(a)+'" rel="stylesheet" type="text/css">')});e.push("<meta http-equiv=Content-Security-Policy content=\"script-src 'none';object-src 'none';child-src 'none'\">");0<d?e.push(b.substring(d)):
e.push(b);return e.join("")}function Qc(a,b,c){this.iframe=a;this.win=a.contentWindow;this.spec=b;this.host=b.host||null;this.kb=Date.now();this.ta=!1;this.Ya=new oc;this.ja=this.host?this.host.signals():new Ic;this.mb=Promise.all([c,this.whenReady()])}g=Qc.prototype;g.destroy=function(){cb(this.iframe).removeForChildWindow(this.win);Qa(this.win)};g.getStartTime=function(){return this.kb};g.getUrl=function(){return this.spec.url};g.signals=function(){return this.ja};g.whenReady=function(){return this.ja.whenSignal("render-start")};
g.whenWindowLoaded=function(){return this.mb};g.whenIniLoaded=function(){return this.ja.whenSignal("ini-load")};
function Rc(a){a.host?a.host.renderStarted():a.ja.signal("render-start");bc(a.iframe,"visibility","");a.win.document&&a.win.document.body&&(a.win.document.documentElement.classList.add("i-amphtml-fie"),S(a.win.document.body,{opacity:1,visibility:"visible",animation:"none"}));var b;b=a.host?a.host.getLayoutBox():mc(0,0,a.win.innerWidth,a.win.innerHeight);Promise.all([a.whenReady(),Sc(a.iframe,a.win,b)]).then(function(){a.ja.signal("ini-load")})}g.isVisible=function(){return this.ta};
g.onVisibilityChanged=function(a){return this.Ya.add(a)};function Mc(a,b){a.ta!=b&&(a.ta=b,a.Ya.fire(a.ta))}g.getBodyElement=function(){return(this.iframe.contentDocument||this.iframe.contentWindow.document).body};function Tc(a,b){return cb(a.iframe).measureMutateElement(a.iframe,b.measure||null,b.mutate)}
g.enterFullOverlayMode=function(){var a=this,b=this.iframe.parentNode;z().assert("amp-ad"==b.tagName.toLowerCase(),"Only <amp-ad> is allowed to enter lightbox mode.");var c={background:"transparent",position:"absolute",bottom:"auto",right:"auto",top:"",left:"",width:"",height:""},d={position:"fixed",left:0,right:0,bottom:0,width:"100vw",top:0,height:"100vh"};return Tc(this,{measure:function(){var b=a.host?a.host.getLayoutBox():a.iframe.getBoundingClientRect(),d=-J(a.iframe,"viewport").getScrollTop(),
b=T(b,0,d);Object.assign(c,{top:b.top+"px",left:b.left+"px",width:b.width+"px",height:b.height+"px"})},mutate:function(){ac(a.iframe,d);ac(a.getBodyElement(),c)}})};g.leaveFullOverlayMode=function(){var a=this;return Tc(this,{mutate:function(){dc(a.iframe,"position left right top bottom width height".split(" "));dc(a.getBodyElement(),"position top left width height bottom right".split(" "))}})};
function Sc(a,b,c){return cb(a).getResourcesInRect(b,c).then(function(a){var b=[];a.forEach(function(a){Jc.includes(a.element.tagName)||b.push(a.loadedOnce())});return Promise.all(b)})};var Uc={ANCESTOR_ORIGIN:!0};function Vc(a){this.S=a}Vc.prototype.expand=function(a,b,c,d,e){if(!a.length)return d?a:Promise.resolve(a);e=this.S.getExpr(b,!0,e);e=Wc(a,e);return e.length?Xc(this,a,e,b,c,d):d?a:Promise.resolve(a)};function Wc(a,b){var c=[];a.replace(b,function(a,b,f){a=a.length;var d=a+f-1;c.push({start:f,stop:d,name:b,length:a})});return c}
function Xc(a,b,c,d,e,f){function k(){for(var u="",y=[];l<b.length&&m<=c.length;){if(n&&l===n.start){var A=void 0;d&&C.call(d,n.name)?A={name:n.name,prioritized:d[n.name]}:(A=a.S.get(n.name),A.name=n.name);l=n.stop+1;n=c[++m];"("===b[l]?(l++,r++,h.push(A),u.trim().length&&y.push(u),y.push(k())):(u.length&&y.push(u),y.push(Yc(A,void 0,e,f)));u=""}else{if("`"===b[l])t?t=!1:(w=t=!0,z().assert(""===u.trim(),'The substring "'+u+'" was lost during url-replacement. Please ensure the url syntax is correct'),
u="");else if(r&&","===b[l]&&!t){if(u.length){var O=w?u:u.trim();y.push(O);w=!1}","===b[l+1]&&(y.push(""),l++);u=""}else{if(r&&")"===b[l]&&!t){l++;r--;var U=h.pop();y.push(w?u:u.trim());w=!1;return Yc(U,y,e,f)}u+=b[l]}l++}l===b.length&&u.length&&y.push(u)}return f?y.join(""):Promise.all(y).then(function(a){return a.join("")}).catch(function(a){x(a);return""})}var h=[],l=0,m=0,n=c[m],r=0,t=!1,w=!1;return k()}
function Yc(a,b,c,d){var e=a.name,f;a.prioritized?f=a.prioritized:d&&a.sync?f=a.sync:d?(z().error("Expander","ignoring async replacement key: ",a.name),f=""):f=a.async||a.sync;var k;if(d){d=f;try{var h="function"===typeof d?d.apply(null,b):d,l;h&&h.then?(z().error("Expander","ignoring async macro resolution"),l=""):l="string"===typeof h||"number"===typeof h?Uc[e]?h.toString():encodeURIComponent(h):"";c&&(c[e]=l);k=l}catch(m){x(m),c&&(c[e]=""),k=""}}else k=Zc(f,e,b,c);return k}
function Zc(a,b,c,d){var e;try{return e="function"===typeof a?c?Promise.all(c).then(function(b){return a.apply(null,b)}):Ea(a):Promise.resolve(a),e.then(function(a){a=null==a?"":Uc[b]?a:encodeURIComponent(a);d&&(d[b]=a);return a}).catch(function(a){x(a);d&&(d[b]="");return Promise.resolve("")})}catch(f){return x(f),d&&(d[b]=""),Promise.resolve("")}};function $c(a,b){this.ampdoc=a;this.S=b;this.bb=new Vc(this.S)}g=$c.prototype;g.expandStringSync=function(a,b,c,d){return V(this,a,b,c,!0,d)};g.expandStringAsync=function(a,b){return V(this,a,b)};g.expandUrlSync=function(a,b,c,d){return ad(a,V(this,a,b,c,!0,d))};g.expandUrlAsync=function(a,b,c){return V(this,a,b,void 0,void 0,c).then(function(b){return ad(a,b)})};g.expandInputValueAsync=function(a){return bd(this,a,!1)};g.expandInputValueSync=function(a){return bd(this,a,!0)};
function bd(a,b,c){"INPUT"==b.tagName&&b.getAttribute("type");var d=cd(b);if(!d)return c?b.value:Promise.resolve(b.value);void 0===b["amp-original-value"]&&(b["amp-original-value"]=b.value);a=V(a,b["amp-original-value"]||b.value,void 0,void 0,c,d);return c?b.value=a:a.then(function(a){return b.value=a})}
function cd(a,b){if(a=a.getAttribute("data-amp-replace")){var c={};a.trim().split(/\s+/).forEach(function(a){!b||C.call(b,a)?c[a]=!0:z().warn("URL","Ignoring unsupported replacement",a)});return c}}
g.maybeExpandLink=function(a,b){var c={CLIENT_ID:!0,QUERY_PARAM:!0},d=a.getAttribute("data-amp-addparams")||"",e=cd(a,c);if(e||d||b){var f=a["amp-original-href"]||a.getAttribute("href"),k=F(f);null==a["amp-original-href"]&&(a["amp-original-href"]=f);if(d)var h=p(d),f=va(f,wa(h));a:if(h=M(this.ampdoc),k.origin==F(h.canonicalUrl).origin||k.origin==F(h.sourceUrl).origin)k=!0;else{if((h=this.ampdoc.getRootNode().querySelector("meta[name=amp-link-variable-allowed-origin]"))&&h.hasAttribute("content"))for(var h=
h.getAttribute("content").trim().split(/\s+/),l=0;l<h.length;l++)if(k.origin==F(h[l]).origin){k=!0;break a}k=!1}var m=k;if(!m)return e&&z().warn("URL","Ignoring link replacement",f," because the link does not go to the document's source, canonical, or whitelisted origin."),a.href=f;if(b){if(!e||!e.QUERY_PARAM){var n={QUERY_PARAM:!0};b=this.expandUrlSync(b,void 0,void 0,n)}k=p(b);f=va(f,wa(k))}e&&(f=this.expandUrlSync(f,void 0,void 0,e));return a.href=f}};
function V(a,b,c,d,e,f){var k=G(a.ampdoc.win,"url-replacement-v2");if(k)return a.bb.expand(b,c,d,e,f);var h=a.S.getExpr(c),l,m=b.replace(h,function(b,k,h){var n=[];"string"==typeof h&&(n=h.split(/,\s*/));if(f&&!f[k])return b;var r;if(c&&k in c)r=c[k];else if(r=a.S.get(k))if(e){if(r=r.sync,!r)return z().error("UrlReplacements","ignoring async replacement key: ",k),""}else r=r.async||r.sync;var t;try{t="function"==typeof r?r.apply(null,n):r}catch(O){e&&(t=""),x(O)}if(t&&t.then){if(e)return z().error("UrlReplacements",
"ignoring promise value for key: ",k),"";var A=t.catch(function(a){x(a)}).then(function(a){m=m.replace(b,Uc[b]?a:null==a?"":encodeURIComponent(a));d&&(d[b]=a)});l=l?l.then(function(){return A}):A;return b}d&&(d[b]=t);return Uc[b]?t:null==t?"":encodeURIComponent(t)});l&&(l=l.then(function(){return m}));return e?m:l||Promise.resolve(m)}g.collectVars=function(a,b){var c=Object.create(null);return V(this,a,b,c).then(function(){return c})};
g.collectUnwhitelistedVarsSync=function(a){var b=a.getAttribute("src"),c=Object.create(null);this.expandStringSync(b,void 0,c);var d=Object.keys(c),e=cd(a);return e?d.filter(function(a){return!e[a]}):d};function ad(a,b){var c=F(b,!0).protocol,d=F(a,!0).protocol;if(c!=d)return z().error("UrlReplacements","Illegal replacement of the protocol: ",a),a;z().assert(za(b),"The replacement url has invalid protocol: %s",b);return b}g.getVariableSource=function(){return this.S};var dd=["<script amp-ad-metadata type=application/json>",'<script type="application/json" amp-ad-metadata>',"<script type=application/json amp-ad-metadata>"],ed={CLIENT_CACHE:"client_cache",SAFEFRAME:"safeframe",NAMEFRAME:"nameframe",IFRAME_GET:"iframe_get"},fd=D({frameborder:"0",allowfullscreen:"",allowtransparency:"",scrolling:"no",marginwidth:"0",marginheight:"0"}),gd={adRequestStart:"ad-request-start",adRequestEnd:"ad-response-end",renderFriendlyStart:"ad-render-start",renderCrossDomainStart:"ad-render-start",
renderSafeFrameStart:"ad-render-start",renderFriendlyEnd:"ad-render-end",renderCrossDomainEnd:"ad-render-end",friendlyIframeIniLoad:"ad-iframe-loaded",crossDomainIframeLoaded:"ad-iframe-loaded"};function hd(a,b,c){return function(d){for(var e=[],f=0;f<arguments.length;++f)e[f-0]=arguments[f];try{return a.apply(b,e)}catch(k){if(c)try{return e.unshift(k),c.apply(b,e)}catch(h){}}}}
function W(a){a=AMP.BaseElement.call(this,a)||this;a.Sa=null;a.N=null;a.Y=0;a.w=null;a.P=null;a.uiHandler=null;a.J=null;a.xa=!1;a.aa=null;a.l=null;a.M=null;a.O=a.getNonAmpCreativeRenderingMethod();a.Va=!1;a.Pa=a.win.performance&&a.win.performance.now?a.win.performance.now.bind(a.win.performance):Date.now;var b;b=window;for(var c=0,d=b;d&&d!=d.parent;d=d.parent)c++;b=String(c)+"-"+vc(b);a.sentinel=b;a.W=!1;a.iframe=null;a.fromResumeCallback=!1;a.safeframeVersion="1-0-23";a.isRefreshing=!1;a.isRelayoutNeededFlag=
!1;a.pb=Fb(Aa(a.win))||"-1";a.postAdResponseExperimentFeatures={};a.la=null;a.Za=null;a.isSinglePageStoryAd=!1;return a}aa(W,AMP.BaseElement);g=W.prototype;g.getLayoutPriority=function(){var a=!this.element.getAmpDoc().isSingleDoc();return a?1:2};g.isLayoutSupported=function(a){return rc(a)};g.isRelayoutNeeded=function(){return this.isRelayoutNeededFlag};
g.buildCallback=function(){var a=this;this.l={width:this.element.getAttribute("width"),height:this.element.getAttribute("height")};var b=Math.round(this.getResource().getUpgradeDelayMs());B().info("amp-a4a","upgradeDelay "+this.element.getAttribute("type")+": "+b);this.uiHandler=new AMP.AmpAdUIHandler(this);var c=qd(this.win);this.Sa=Q(this.getAmpDoc()).whenFirstVisible().then(function(){a.getSigningServiceNames().forEach(function(a){c.loadKeyset(a)})});if(this.la=this.getA4aAnalyticsConfig())this.Za=
Hc(this.element,this.la);this.isSinglePageStoryAd=this.element.hasAttribute("amp-story")};
g.renderOutsideViewport=function(){if(!this.xa&&this.win["3pla"]&&!this.inNonAmpPreferenceExp())return!1;var a;var b=this.element.getAttribute("data-loading-strategy");null==b?a=null:"prefer-viewability-over-views"==b||""==b?a=1.25:(a="Value of data-loading-strategy should be a float number in range of [0, 3], but got "+b,b=z().assertNumber(parseFloat(b),a),z().assert(0<=b&&3>=b,a),a=b);var c=a;return null!==c?c:AMP.BaseElement.prototype.renderOutsideViewport.call(this)};g.isValidElement=function(){return!0};
g.getCreativeSize=function(){return this.l};g.delayAdRequestEnabled=function(){return!1};g.getPreconnectUrls=function(){return[]};g.getPrefetchUrls=function(){return[]};g.isAmpAdElement=function(){return"AMP-AD"==this.element.tagName||"AMP-EMBED"==this.element.tagName};g.preconnectCallback=function(){var a=this,b=this.getPreconnectUrls();b&&b.forEach(function(b){a.preconnect.url(b,!0)})};
g.resumeCallback=function(){if(!this.P){this.fromResumeCallback=!0;var a=this.getResource();if(a.hasBeenMeasured()&&!a.isMeasureRequested())this.onLayoutMeasure()}};g.getResource=function(){return this.element.getResources().getResourceForElement(this.element)};g.hasAdPromise=function(){return!!this.N};g.inNonAmpPreferenceExp=function(){return!!this.postAdResponseExperimentFeatures.pref_neutral_enabled&&["adsense","doubleclick"].includes(this.element.getAttribute("type"))};
function rd(a){var b=a.getIntersectionElementLayoutBox();if("fluid"!=a.getLayout()&&(0==b.height||0==b.width))return!1;var b=a.win,c=!1,d=0,e=a.element;do{if(qc[e.tagName])d++,c=!1;else{var f=(b.getComputedStyle(e)||ka()).position;"fixed"!=f&&"sticky"!=f||(c=!0)}e=e.parentElement}while(e&&"BODY"!=e.tagName);return!c&&1>=d?a.isValidElement()?!0:(z().warn("amp-a4a",a.element.getAttribute("type"),"Amp ad element ignored as invalid",a.element),!1):(z().warn("amp-a4a","<"+a.element.tagName+"> is not allowed to be "+
("placed in elements with position:fixed: "+a.element)),!1)}g.onLayoutMeasure=function(){this.initiateAdRequest()};
g.initiateAdRequest=function(){var a=this;if(this.J)this.J.onLayoutMeasure();if(!this.N&&rd(this)){++this.Y;var b=this.verifyStillCurrent();this.N=Q(this.getAmpDoc()).whenFirstVisible().then(function(){b();var c=a.delayAdRequestEnabled();if(c)return a.getResource().whenWithinViewport("number"==typeof c?c:a.renderOutsideViewport())}).then(function(){b();var c=AMP.BaseElement.prototype.getConsentPolicy.call(a);return c?zc(a.getAmpDoc(),c).catch(function(a){z().error("amp-a4a","Error determining consent state",
a);return 4}):Promise.resolve(null)}).then(function(c){b();return a.getAdUrl(c,sd(a,c))}).then(function(c){b();a.w=c;return!a.isXhrAllowed()&&a.w?(a.O="iframe_get",Promise.reject("IFRAME-GET")):c&&a.sendXhrRequest(c)}).then(function(c){b();X(a,"adRequestEnd");if(!c||!c.arrayBuffer||c.headers.has("amp-ff-empty-creative"))return a.forceCollapse(),Promise.reject("NO-CONTENT-RESPONSE");c.headers&&c.headers.has("amp-ff-exps")&&td(a,c.headers.get("amp-ff-exps"));var d=a.getNonAmpCreativeRenderingMethod(c.headers.get("X-AmpAdRender"));
a.O=d;"nameframe"==a.O&&a.preconnect.preload(uc(a.win));var e=a.win.HTMLIFrameElement&&"sandbox"in a.win.HTMLIFrameElement.prototype;a.Va=e&&"true"==c.headers.get("amp-ff-sandbox");var f=c.headers.get("X-AmpSafeFrameVersion");/^[0-9-]+$/.test(f)&&"1-0-23"!=f&&(a.safeframeVersion=f,a.preconnect.preload(a.getSafeframePath()));return c.arrayBuffer().then(function(b){return 0==b.byteLength?(a.forceCollapse(),Promise.reject("NO-CONTENT-RESPONSE")):{bytes:b,headers:c.headers}})}).then(function(c){b();if(!c)return Promise.resolve();
var d=c,e=d.bytes,d=d.headers,f=a.extractSize(c.headers);a.l=f||a.l;"client_cache"!=a.O&&e&&(a.aa=e);return a.maybeValidateAmpCreative(e,d)}).then(function(c){b();a.xa=!!c;return c&&Cc(c)}).then(function(c){b();var d;if(!c||!(d=a.getAmpAdMetadata(c)))return a.inNonAmpPreferenceExp()&&a.updateLayoutPriority(0),null;a.updateLayoutPriority(0);var e=bb(a.win);d.customElementExtensions.forEach(function(a){return e.preloadExtension(a)});(d.customStylesheets||[]).forEach(function(b){return a.preconnect.preload(b.href)});
var f=I(a.getAmpDoc(),"url");(d.images||[]).forEach(function(b){return f.isSecure(b)&&a.preconnect.preload(b)});return d}).catch(function(b){switch(b.message||b){case "IFRAME-GET":case "NETWORK-FAILURE":return null;case "INVALID-SPSA-RESPONSE":case "NO-CONTENT-RESPONSE":return{minifiedCreative:"",customElementExtensions:[],customStylesheets:[]}}ud(a,b);return null})}};
g.maybeValidateAmpCreative=function(a,b){var c=this,d=this.verifyStillCurrent();return this.Sa.then(function(){return"fake"!=c.element.getAttribute("type")||c.element.getAttribute("checksig")?qd(c.win).verify(a,b):Promise.resolve(0)}).then(function(b){d();var e=null;switch(b){case 0:e=a;break;case 4:e=c.shouldPreferentialRenderWithoutCrypto()?a:null;break;case 2:case 3:z().error("amp-a4a",c.element.getAttribute("type"),"Signature verification failed")}if(c.isSinglePageStoryAd&&!e)throw Error("INVALID-SPSA-RESPONSE");
return e})};function td(a,b){b.split(",").forEach(function(b){if(b){var c=b.split("=");2==c.length&&c[0]?a.postAdResponseExperimentFeatures[c[0]]=c[1]:B().warn("amp-a4a","invalid experiment feature "+b)}})}
g.refresh=function(a){var b=this;this.isRefreshing=!0;this.tearDownSlot();this.initiateAdRequest();var c=this.Y;return this.N.then(function(){if(b.isRefreshing&&c==b.Y)return b.mutateElement(function(){ec(b.element,"ad-refresh");b.togglePlaceholder(!0);return N(b.win).promise(1E3).then(function(){b.isRelayoutNeededFlag=!0;b.getResource().layoutCanceled();Q(b.getAmpDoc()).whenNextVisible().then(function(){cb(b.getAmpDoc()).requireLayout(b.element)})})});a()})};
function ud(a,b){var c;if(fc(b))throw b;b=b&&b.message?ga(b):Error("unknown error "+b);c&&(b.ignoreStack=c);var d=a.element.getAttribute("type")||"notype";0!=b.message.indexOf("amp-a4a: "+d+":")&&(b.message="amp-a4a: "+d+": "+b.message);vd(b,a.w);q().development||q().log?z().error("amp-a4a",b):(z().warn("amp-a4a",b),.01>Math.random()&&B().expectedError("amp-a4a",b))}g.layoutCallback=function(){this.isRefreshing&&this.destroyFrame(!0);return this.attemptToRenderCreative()};
g.attemptToRenderCreative=function(){var a=this;if(!this.N)return rd(this)&&B().error("amp-a4a","Null promise in layoutCallback"),Promise.resolve();var b=this.verifyStillCurrent();return this.N.then(function(c){b();return a.W||a.iframe&&!a.isRefreshing?Promise.resolve():c?wd(a,c).catch(function(c){b();z().warn("amp-a4a",a.element.getAttribute("type"),"Error injecting creative in friendly frame",c);return a.renderNonAmpCreative()}):a.renderNonAmpCreative()}).catch(function(b){ud(a,b);throw Error("CANCELLED");
})};g.isXhrAllowed=function(){return!0};g.attemptChangeSize=function(a,b){this.M=this.M||this.getLayoutBox();return AMP.BaseElement.prototype.attemptChangeSize.call(this,a,b)};g.unlayoutCallback=function(){this.tearDownSlot();return!0};
g.tearDownSlot=function(){var a=this;this.Y++;this.uiHandler.applyUnlayoutUI();this.M&&AMP.BaseElement.prototype.attemptChangeSize.call(this,this.M.height,this.M.width).then(function(){a.M=null}).catch(function(a){B().warn("amp-a4a","unable to revert to original size",a)});this.W=!1;this.destroyFrame();this.aa=this.w=this.N=null;this.fromResumeCallback=this.xa=!1;this.O=this.getNonAmpCreativeRenderingMethod();this.postAdResponseExperimentFeatures={}};
g.destroyFrame=function(a){if((a=void 0===a?!1:a)||!this.isRefreshing)this.P&&(this.P.destroy(),this.P=null),this.iframe&&this.iframe.parentElement&&(this.iframe.parentElement.removeChild(this.iframe),this.iframe=null),this.J&&(this.J.freeXOriginIframe(),this.J=null)};g.viewportCallback=function(a){this.P&&Mc(this.P,a);this.J&&this.J.viewportCallback(a)};g.createPlaceholderCallback=function(){return this.uiHandler.createPlaceholder()};
g.getAdUrl=function(){throw Error("getAdUrl not implemented!");};g.resetAdUrl=function(){this.w=null};g.verifyStillCurrent=function(){var a=this,b=this.Y;return function(){if(b!=a.Y)throw Error("CANCELLED");}};g.extractSize=function(a){a=a.get("X-CreativeSize");if(!a)return null;var b=/^([0-9]+)x([0-9]+)$/.exec(a);return b?{width:Number(b[1]),height:Number(b[2])}:(z().error("amp-a4a","Invalid size header: "+a),null)};
g.forceCollapse=function(){this.isRefreshing?this.isRefreshing=!1:(this.M=this.M||this.getLayoutBox(),this.uiHandler.applyNoContentUI(),this.W=!0)};g.onCreativeRender=function(a){X(this,a?"renderFriendlyEnd":"renderCrossDomainEnd")};g.onCrossDomainIframeCreated=function(a){B().info("amp-a4a",this.element.getAttribute("type"),"onCrossDomainIframeCreated "+a)};
g.sendXhrRequest=function(a){var b=this;X(this,"adRequestStart");var c={mode:"cors",method:"GET",credentials:"include"};return L(this.win,"xhr").fetch(a,c).catch(function(a){if(a.response&&200<a.response.status)return null;var c=b.onNetworkFailure(a,b.w);if(c.frameGetDisabled)B().info("amp-a4a","frame get disabled as part of network failure handler"),b.resetAdUrl();else return b.w=c.adUrl||b.w,Promise.reject("NETWORK-FAILURE");return null})};g.onNetworkFailure=function(){return{}};
g.getSigningServiceNames=function(){return["google"]};
g.renderNonAmpCreative=function(a){var b=this;if("true"==this.element.getAttribute("disable3pfallback"))return z().warn("amp-a4a",this.element.getAttribute("type"),"fallback to 3p disabled"),Promise.resolve(!1);B().warn("amp-a4a","fallback to 3p");var c=this.O,d=Promise.resolve(!1);"safeframe"!=c&&"nameframe"!=c||!this.aa?this.w?(ya(this.w,this.element),d=xd(this,this.w)):z().warn("amp-a4a",this.element.getAttribute("type"),"No creative or URL available -- A4A can't render any ad"):(d=yd(this,this.aa),
this.aa=null);a||this.inNonAmpPreferenceExp()||yc(this.win,d);return d.then(function(a){X(b,"crossDomainIframeLoaded");return a})};
function wd(a,b){X(a,"renderFriendlyStart");a.iframe=Ua(a.element.ownerDocument,"iframe",D({height:a.l.height,width:a.l.width,frameborder:"0",allowfullscreen:"",allowtransparency:"",scrolling:"no"}));a.applyFillContent(a.iframe);var c=[];b.customStylesheets&&b.customStylesheets.forEach(function(a){(a=a.href)&&c.push(a)});var d=a.verifyStillCurrent();return Nc(a.iframe,a.element,{host:a.element,url:a.w,html:b.minifiedCreative,extensionIds:b.customElementExtensions||[],fonts:c},function(b){var c=a.getAmpDoc(),
d=new Bc(a.getAmpDoc(),b);Ga(b,new $c(c,d))}).then(function(c){d();a.P=c;Lc(c,a.isInViewport());var e=c.iframe.contentDocument||c.win.document;bc(e.body,"visibility","visible");hd(a.onCreativeRender,a,function(b){B().error("amp-a4a",a.element.getAttribute("type"),"Error executing onCreativeRender",b)})(b);return c.whenIniLoaded()}).then(function(){d();X(a,"friendlyIframeIniLoad")})}
function zd(a,b){var c=Object.assign(b,D({height:a.l.height,width:a.l.width}));a.sentinel&&(c["data-amp-3p-sentinel"]=a.sentinel);a.Va&&(c.sandbox="allow-forms allow-pointer-lock allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation");G(a.win,"no-sync-xhr-in-ads")&&(c.allow="sync-xhr 'none';");a.iframe=Ua(a.element.ownerDocument,"iframe",Object.assign(c,fd));a.J=new AMP.AmpAdXOriginIframeHandler(a);var d=a.J.init(a.iframe,!0);hd(a.onCreativeRender,
a,function(b){B().error("amp-a4a",a.element.getAttribute("type"),"Error executing onCreativeRender",b)})(null);return d}function xd(a,b){X(a,"renderCrossDomainStart");return zd(a,D({src:L(a.win,"xhr").getCorsUrl(a.win,b),name:JSON.stringify(tc(a.win,a.element,a.sentinel))}))}
function yd(a,b){var c=a.O;X(a,"renderSafeFrameStart");var d=a.verifyStillCurrent();return Ea(function(){return Cc(b)}).then(function(b){d();var e,k="";switch(c){case "safeframe":e=a.getSafeframePath()+"?n=0";break;case "nameframe":e=uc(a.win);break;default:return z().error("A4A","A4A received unrecognized cross-domain name attribute iframe rendering mode request: %s.  Unable to render a creative for slot %s.",c,a.element.getAttribute("id")),Promise.reject("Unrecognized rendering mode request")}var h=
tc(a.win,a.element,a.sentinel,a.getAdditionalContextMetadata("safeframe"==c));"nameframe"==c?(h.creative=b,k=JSON.stringify(h)):"safeframe"==c&&(h=JSON.stringify(h),k=a.safeframeVersion+";"+b.length+";"+b+(""+h));return zd(a,D({src:e,name:k}))})}
g.getAmpAdMetadata=function(a){for(var b=-1,c,d=0;d<dd.length&&!(c=dd[d],b=a.lastIndexOf(c),0<=b);d++);if(0>b)return B().warn("amp-a4a",this.element.getAttribute("type"),"Could not locate start index for amp meta data in: %s",a),null;var e=a.lastIndexOf("\x3c/script>");if(0>e)return B().warn("amp-a4a",this.element.getAttribute("type"),"Could not locate closing script tag for amp meta data in: %s",a),null;try{var f=JSON.parse(a.slice(b+c.length,e)),k=f.ampRuntimeUtf16CharOffsets;if(!Array.isArray(k)||
2!=k.length||"number"!==typeof k[0]||"number"!==typeof k[1])throw Error("Invalid runtime offsets");var h={};if(f.customElementExtensions){if(h.customElementExtensions=f.customElementExtensions,!Array.isArray(h.customElementExtensions))throw Error("Invalid extensions",h.customElementExtensions);}else h.customElementExtensions=[];if(f.customStylesheets){h.customStylesheets=f.customStylesheets;var l="Invalid custom stylesheets";if(!Array.isArray(h.customStylesheets))throw Error(l);var m=I(this.getAmpDoc(),
"url");h.customStylesheets.forEach(function(a){if(!v(a)||!a.href||"string"!==typeof a.href||!m.isSecure(a.href))throw Error(l);})}Array.isArray(f.images)&&(h.images=f.images.splice(0,5));if(this.isSinglePageStoryAd){if(!f.ctaUrl||!f.ctaType)throw Error("INVALID-SPSA-RESPONSE");this.element.setAttribute("data-vars-ctatype",f.ctaType);this.element.setAttribute("data-vars-ctaurl",f.ctaUrl)}h.minifiedCreative=a.slice(0,k[0])+a.slice(k[1],b)+a.slice(e+9);return h}catch(n){B().warn("amp-a4a",this.element.getAttribute("type"),
"Invalid amp metadata: %s",a.slice(b+c.length,e));if(this.isSinglePageStoryAd)throw n;return null}};g.getSafeframePath=function(){return"https://tpc.googlesyndication.com/safeframe/"+(this.safeframeVersion+"/html/container.html")};function X(a,b){if(a.la){var c=gd[b],d=Object.assign({time:Math.round(a.Pa())},a.getA4aAnalyticsVars(c));ec(a.element,c,d)}}g.getA4aAnalyticsVars=function(){return{}};g.getA4aAnalyticsConfig=function(){return null};
function sd(a,b){if(AMP.RealTimeConfigManager)try{return(new AMP.RealTimeConfigManager(a)).maybeExecuteRealTimeConfig(a.Oa(),b)}catch(c){z().error("amp-a4a","Could not perform Real Time Config.",c)}else a.element.getAttribute("rtc-config")&&z().error("amp-a4a","RTC not supported for ad network "+a.element.getAttribute("type"))}g.Oa=function(){return{}};g.shouldPreferentialRenderWithoutCrypto=function(){return!1};
g.getNonAmpCreativeRenderingMethod=function(a){if(a){var b;a:{for(b in ed)if(ed[b]===a){b=!0;break a}b=!1}if(b)return a;B().error("AMP-A4A","cross-origin render mode header "+a)}return L(this.win,"platform").isIos()?"nameframe":null};g.getAdditionalContextMetadata=function(){};function vd(a,b){if(!(!b||a.args&&a.args.au)){var c=b.indexOf("?");-1!=c&&((a.args||(a.args={})).au=b.substring(c+1,c+251))}}
function qd(a){return a.AMP_FAST_FETCH_SIGNATURE_VERIFIER_||(a.AMP_FAST_FETCH_SIGNATURE_VERIFIER_=new Ec(a,Xb))};var Ad={medianet:{url:"https://amprtc.media.net/rtb/getrtc?cid=CID&w=ATTR(width)&h=ATTR(height)&ow=ATTR(data-override-width)&oh=ATTR(data-override-height)&ms=ATTR(data-multi-size)&slot=ATTR(data-slot)&tgt=TGT&curl=CANONICAL_URL&to=TIMEOUT&purl=HREF",macros:["CID"],errorReportingUrl:"https://qsearch-a.akamaihd.net/log?logid=kfk&evtid=projectevents&project=amprtc_error&error=ERROR_TYPE&rd=HREF",disableKeyAppend:!0},prebidappnexus:{url:"https://prebid.adnxs.com/pbs/v1/openrtb2/amp?tag_id=PLACEMENT_ID&w=ATTR(width)&h=ATTR(height)&ow=ATTR(data-override-width)&oh=ATTR(data-override-height)&ms=ATTR(data-multi-size)&slot=ATTR(data-slot)&targeting=TGT&curl=CANONICAL_URL&timeout=TIMEOUT&adcid=ADCID&purl=HREF",
macros:["PLACEMENT_ID"],disableKeyAppend:!0},prebidrubicon:{url:"https://prebid-server.rubiconproject.com/openrtb2/amp?tag_id=REQUEST_ID&w=ATTR(width)&h=ATTR(height)&ow=ATTR(data-override-width)&oh=ATTR(data-override-height)&ms=ATTR(data-multi-size)&slot=ATTR(data-slot)&targeting=TGT&curl=CANONICAL_URL&timeout=TIMEOUT&adc=ADCID&purl=HREF",macros:["REQUEST_ID"],disableKeyAppend:!0},indexexchange:{url:"https://amp.casalemedia.com/amprtc?v=1&w=ATTR(width)&h=ATTR(height)&ow=ATTR(data-override-width)&oh=ATTR(data-override-height)&ms=ATTR(data-multi-size)&s=SITE_ID&p=CANONICAL_URL",
macros:["SITE_ID"],disableKeyAppend:!0},lotame:{url:"https://ad.crwdcntrl.net/5/pe=y/c=CLIENT_ID/an=AD_NETWORK",macros:["CLIENT_ID","AD_NETWORK"]},yieldbot:{url:"https://i.yldbt.com/m/YB_PSN/v1/amp/init?curl=CANONICAL_URL&sn=YB_SLOT&w=ATTR(width)&h=ATTR(height)&ow=ATTR(data-override-width)&oh=ATTR(data-override-height)&ms=ATTR(data-multi-size)&aup=ATTR(data-slot)&pvi=PAGEVIEWID&tgt=TGT&adcid=ADCID&href=HREF",macros:["YB_PSN","YB_SLOT"],disableKeyAppend:!0},salesforcedmp:{url:"https://cdn.krxd.net/userdata/v2/amp/ORGANIZATION_ID?segments_key=SEGMENTS_KEY&kuid_key=USER_KEY",
macros:["ORGANIZATION_ID","SEGMENTS_KEY","USER_KEY"],disableKeyAppend:!0},purch:{url:"https://ads.servebom.com/tmntag.js?v=1.2&fmt=amp&o={%22p%22%3APLACEMENT_ID}&div_id=DIV_ID",macros:["PLACEMENT_ID","DIV_ID"],disableKeyAppend:!0},aps:{url:"https://aax.amazon-adsystem.com/e/dtb/bid?src=PUB_ID&amp=1&u=CANONICAL_URL&slots=%5B%7B%22sd%22%3A%22ATTR(data-slot)%22%2C%22s%22%3A%5B%22ATTR(width)xATTR(height)%22%5D%7D%5D&pj=PARAMS",macros:["PUB_ID","PARAMS"],disableKeyAppend:!0},openwrap:{url:"https://ow.pubmatic.com/amp?v=1&w=ATTR(width)&h=ATTR(height)&ms=ATTR(data-multi-size)&auId=ATTR(data-slot)&purl=HREF&pubId=PUB_ID&profId=PROFILE_ID",
macros:["PUB_ID","PROFILE_ID"],errorReportingUrl:"https://ow.pubmatic.com/amp_error?e=ERROR_TYPE&h=HREF",disableKeyAppend:!0},criteo:{url:"https://bidder.criteo.com/amp/rtc?zid=ZONE_ID&nid=NETWORK_ID&psubid=PUBLISHER_SUB_ID&lir=LINE_ITEM_RANGES&w=ATTR(width)&h=ATTR(height)&ow=ATTR(data-override-width)&oh=ATTR(data-override-height)&ms=ATTR(data-multi-size)&slot=ATTR(data-slot)&timeout=TIMEOUT&href=HREF",macros:["ZONE_ID","NETWORK_ID","PUBLISHER_SUB_ID","LINE_ITEM_RANGES"],disableKeyAppend:!0}};var Bd=.01>Math.random();function Cd(a){this.K=a;this.h=this.K.win;this.Ba={};this.Aa=null;this.za=[];this.m=null;this.Ka=this.K.getAmpDoc();this.U=null}function Y(a,b,c,d,e){B().warn("real-time-config","RTC callout to "+c+" caused "+b);d&&a.sendErrorMessage(b,d);return Promise.resolve({error:b,callout:c,rtcTime:e||0})}g=Cd.prototype;
g.sendErrorMessage=function(a,b){if(Bd){var c={ERROR_TYPE:a,HREF:this.h.location.href};b=db(this.Ka).expandUrlSync(b,c,{ERROR_TYPE:!0,HREF:!0});(new this.h.Image).src=b}};function Dd(a,b){a=I(a.K.getAmpDoc(),"url").parse(b);return(a.hostname+a.pathname).substr(0,50)}
g.maybeExecuteRealTimeConfig=function(a,b){if(Ed(this,this.K.element))return this.U=b,this.modifyRtcConfigForConsentStateSettings(),a=this.assignMacros(a),this.Aa=Date.now(),this.handleRtcForCustomUrls(a),this.handleRtcForVendorUrls(a),Promise.all(this.za)};
g.isValidCalloutForConsentState=function(a,b){var c=a.sendRegardlessOfConsentState;if(!v(a)||!c)return!!b;if("boolean"==typeof c)return c;if(Array.isArray(c)){for(var d=0;d<c.length;d++){if(this.U==lc[c[d]])return!0;lc[c[d]]||B().warn("real-time-config","Invalid RTC consent state given: "+c[d])}return!1}z().warn("real-time-config","Invalid value for sendRegardlessOfConsentState:"+c);return!!b};
g.modifyRtcConfigForConsentStateSettings=function(){var a=this;if(void 0!=this.U&&1!=this.U&&3!=this.U){var b=this.isValidCalloutForConsentState(this.m);this.m.urls=(this.m.urls||[]).filter(function(c){return a.isValidCalloutForConsentState(c,b)});Object.keys(this.m.vendors||{}).forEach(function(c){a.isValidCalloutForConsentState(a.m.vendors[c],b)||delete a.m.vendors[c]})}};
g.assignMacros=function(a){var b=this;a.TIMEOUT=function(){return b.m.timeoutMillis};a.CONSENT_STATE=function(){return b.U};return a};g.handleRtcForCustomUrls=function(a){var b=this;(this.m.urls||[]).forEach(function(c){var d,e;v(c)?(d=c.url,e=c.errorReportingUrl):"string"==typeof c?d=c:B().warn("real-time-config","Invalid url: "+c);Fd(b,d,a,e)})};
g.handleRtcForVendorUrls=function(a){var b=this;Object.keys(this.m.vendors||[]).forEach(function(c){var d=Ad[c.toLowerCase()],e=d?d.url:"",f=d&&d.errorReportingUrl?d.errorReportingUrl:"";if(!e)return b.za.push(Y(b,"9",c,f));var k=v(b.m.vendors[c].macros)?b.m.vendors[c].macros:b.m.vendors[c],h={};Object.keys(k).forEach(function(a){if(d.macros&&d.macros.includes(a)){var b=k[a];h[a]=v(b)||Array.isArray(b)?JSON.stringify(b):b}else z().error("real-time-config","Unknown macro: "+a+" for vendor: "+c)});
var l=Object.assign(h,a);Fd(b,e,l,f,c.toLowerCase())})};
function Fd(a,b,c,d,e){function f(b){if(5==Object.keys(a.Ba).length)return Y(a,"7",h,d);if(!I(a.K.getAmpDoc(),"url").isSecure(b))return Y(a,"6",h,d);if(a.Ba[b])return Y(a,"5",h,d);a.Ba[b]=!0;16384<b.length&&(b=b.substr(0,16372).replace(/%\w?$/,""),b+="&__trunc__=1");return Gd(a,b,k,h,l,d)}var k=a.m.timeoutMillis,h=e||Dd(a,b),l=a.K.verifyStillCurrent.bind(a.K)(),m={};Object.keys(c).forEach(function(a){return m[a]=!0});var n=Date.now();a.za.push(N(a.h).timeoutPromise(k,db(a.Ka).expandUrlAsync(b,c,m)).then(function(a){l();
k-=n-Date.now();return f(a)}).catch(function(b){return fc(b)?void 0:Y(a,"11",h,d)}))}function Gd(a,b,c,d,e,f){return N(a.h).timeoutPromise(c,L(a.h,"xhr").fetchJson(b,{credentials:"include"}).then(function(b){e();return b.text().then(function(b){e();var c=Date.now()-a.Aa;return b?(b=R(b))?{response:b,rtcTime:c,callout:d}:Y(a,"4",d,f,c):{rtcTime:c,callout:d}})})).catch(function(b){return fc(b)?void 0:Y(a,/^timeout/.test(b.message)?"10":"8",d,f,Date.now()-a.Aa)})}
function Ed(a,b){var c=1E3,d=b.getAttribute("rtc-config");if(!d)return!1;var e=R(d);if(!e)return z().warn("real-time-config","Could not JSON parse rtc-config attribute"),!1;var f;try{z().assert(e.vendors||e.urls,"RTC Config must specify vendors or urls");Object.keys(e).forEach(function(a){switch(a){case "vendors":z().assert(v(e[a]),"RTC invalid vendors");break;case "urls":z().assert(Array.isArray(e[a]),"RTC invalid urls");break;case "timeoutMillis":f=parseInt(e[a],10);if(isNaN(f))z().warn("real-time-config",
"Invalid RTC timeout is NaN, "+("using default timeout "+c+"ms")),f=void 0;else if(f>=c||0>f)z().warn("real-time-config","Invalid RTC timeout: "+f+"ms, "+("using default timeout "+c+"ms")),f=void 0;break;default:z().warn("real-time-config","Unknown RTC Config key: "+a)}});if(!Object.keys(e.vendors||{}).length&&!(e.urls||[]).length)return!1;var k=function(b){var c=b.errorReportingUrl;c&&!I(a.K.getAmpDoc(),"url").isSecure(c)&&(B().warn("real-time-config","Insecure RTC errorReportingUrl: "+c),b.errorReportingUrl=
void 0)};(e.urls||[]).forEach(function(a){v(a)&&k(a)});k(e)}catch(h){return!1}e.timeoutMillis=void 0!==f?f:c;a.m=e;return!0}AMP.RealTimeConfigManager=Cd;var Hd=Date.now();function Id(a,b){this.La=a;var c=b&&b.threshold,c=c?Array.isArray(c)?c:[c]:[0];for(a=0;a<c.length;a++)fa(c[a]);this.lb=c.sort();this.ya=null;this.Ta=void 0;this.H=[]}Id.prototype.disconnect=function(){this.H.length=0};Id.prototype.observe=function(a){for(var b=0;b<this.H.length;b++)if(this.H[b].element===a){B().warn("INTERSECTION-OBSERVER","should observe same element once");return}var c={element:a,currentThresholdSlot:0};this.ya&&(a=Jd(this,c,this.ya,this.Ta))&&this.La([a]);this.H.push(c)};
Id.prototype.unobserve=function(a){for(var b=0;b<this.H.length;b++)if(this.H[b].element===a){this.H.splice(b,1);return}B().warn("INTERSECTION-OBSERVER","unobserve non-observed element")};Id.prototype.tick=function(a,b){b&&(a=T(a,-b.left,-b.top),b=T(b,-b.left,-b.top));this.ya=a;this.Ta=b;for(var c=[],d=0;d<this.H.length;d++){var e=Jd(this,this.H[d],a,b);e&&c.push(e)}c.length&&this.La(c)};
function Jd(a,b,c,d){var e=b.element,f=null,k=e.getLayoutBox(),h=e.getOwner(),f=h&&h.getLayoutBox(),l=nc(k,f,c,d)||mc(0,0,0,0),h=l,m=k,h=h.width*h.height/(m.width*m.height);a=a.lb;var m=0,n=a.length;if(0==h)a=0;else{for(var r=(m+n)/2|0;m<r;)h<a[r]?n=r:m=r,r=(m+n)/2|0;a=n}var t=a;if(t==b.currentThresholdSlot)return null;b.currentThresholdSlot=t;c=d?null:c;d=l;a=k;if(m=c)d=T(d,-c.left,-c.top),a=T(a,-c.left,-c.top),m=T(m,-c.left,-c.top);var w={time:"undefined"!==typeof performance&&performance.now?performance.now():
Date.now()-Hd,rootBounds:m,boundingClientRect:a,intersectionRect:d,intersectionRatio:h,target:e};return w};function Kd(a,b,c){this.da=new Id(a,c);this.Xa={};this.o=b.getViewport();this.Ga=!1}Kd.prototype.observe=function(a){var b=this,c=a.getAttribute("data-amp-ad-refresh-id");if(!this.Xa[c]){var d=a.viewportCallback.bind(a);this.Xa[c]=d;a.viewportCallback=function(a){b.Ga&&b.da.tick(b.o.getRect());d(a)}}this.Ga=!0;this.da.observe(a);this.da.tick(this.o.getRect())};Kd.prototype.unobserve=function(a){this.da.tick(this.o.getRect());this.da.unobserve(a);this.Ga=!1};function Ld(a,b){var c=a.getAttribute("data-enable-refresh");if(c)return Md(c);var d,e=(d=b.document.getElementsByName("amp-ad-enable-refresh"))&&d[0]&&d[0].getAttribute("content");if(!e)return null;var f=e.split(",");for(b=0;b<f.length;b++){var k=f[b].split("=");z().assert(2==k.length,"refresh metadata config must be of the form `network_type=refresh_interval`");if(k[0].toLowerCase()==a.getAttribute("type").toLowerCase())return Md(k[1])}return null}
function Md(a){var b=Number(a);return isNaN(b)||30>b?(z().warn("AMP-AD","invalid refresh interval, must be a number no less than 30: "+a),null):1E3*b}var Nd={},Od={},Pd=0;function Qd(a,b){var c=Ld(a.element,a.win);return!c||b&&!b()?null:new Rd(a,{visiblePercentageMin:50,continuousTimeMin:1},c)}
function Rd(a,b,c){this.Z="initial";this.Ja=a;this.h=a.win;this.ca=a.element;this.nb=this.ca.getAttribute("type").toLowerCase();this.hb=c;b.continuousTimeMin*=1E3;b.visiblePercentageMin/=100;this.$=b;this.Da=N(this.h);this.Ia=this.ib=null;var d=String(Pd++);this.ca.setAttribute("data-amp-ad-refresh-id",d);Od[d]=this;this.initiateRefreshCycle()}
function Sd(a,b){var c=String(b);return Nd[c]||(Nd[c]="IntersectionObserver"in a.h?new a.h.IntersectionObserver(a.Ra,{threshold:b}):new Kd(a.Ra,a.Ja,{threshold:b}))}
Rd.prototype.Ra=function(a){a.forEach(function(a){var b=a.target.getAttribute("data-amp-ad-refresh-id"),d=Od[b];if(a.target==d.ca)switch(d.Z){case "initial":a.intersectionRatio>=d.$.visiblePercentageMin&&(d.Z="view_pending",d.Ia=d.Da.delay(function(){d.Z="refresh_pending";Td(d)},d.$.continuousTimeMin));break;case "view_pending":a.intersectionRatio<d.$.visiblePercentageMin&&(d.Da.cancel(d.Ia),d.Ia=null,d.Z="initial")}})};
Rd.prototype.initiateRefreshCycle=function(){switch(this.Z){case "initial":Sd(this,this.$.visiblePercentageMin).observe(this.ca)}};function Td(a){new Promise(function(b){a.ib=a.Da.delay(function(){a.Z="initial";a.unobserve();a.Ja.refresh(function(){return a.initiateRefreshCycle()});b(!0)},a.hb)})}Rd.prototype.unobserve=function(){Sd(this,this.$.visiblePercentageMin).unobserve(this.ca)};function Ud(a,b){b.document.documentElement.addEventListener("click",Vd.bind(null,a),!0)}function Vd(a,b){var c=Wa(b.target);if(c&&c.href){var d=c.getAttribute("data-a4a-orig-href")||c.getAttribute("href");d&&(a=db(a).expandUrlSync(d,{CLICK_X:function(){return b.pageX},CLICK_Y:function(){return b.pageY}},void 0,{CLICK_X:!0,CLICK_Y:!0}),a!=d&&(c.getAttribute("data-a4a-orig-href")||c.setAttribute("data-a4a-orig-href",d),c.setAttribute("href",a)))}};var Wd={},Xd=!1;function Yd(a){var b=R(a.data);if("https://tpc.googlesyndication.com"==a.origin&&b){a=R(b.p)||{};var c=b.e||a.sentinel,d=Wd[c];d?d.channel?a&&d.processMessage(a,b.s):d.connectMessagingChannel(b.c):B().warn("AMP-DOUBLECLICK-SAFEFRAME","Safeframe Host for sentinel: "+c+" not found.")}}
function Zd(a,b,c,d){this.j=a;this.oa=this.j.verifyStillCurrent.bind(this.j)();this.h=this.j.win;this.ia=this.j.sentinel;this.ba=this.channel=this.B=null;this.ab=Math.random();this.Ea=Math.random();this.gb=b;this.l=c;this.pa=Object.assign({},c);this.V=d;this.ob=null;this.o=this.j.getViewport();this.W=!0;this.ra=!1;var e=Object(R(this.j.element.getAttribute("data-safeframe-config"))||{});this.Ma=C.call(e,"expandByOverlay")?e.expandByOverlay:!0;this.Na=C.call(e,"expandByPush")?e.expandByPush:!0;this.Fa=
null;this.registerSafeframeHost()}g=Zd.prototype;
g.getSafeframeNameAttr=function(){var a=D({});a.uid=this.Ea;a.hostPeerName=this.h.location.origin;a.initialGeometry=this.getInitialGeometry();a.permissions=JSON.stringify(D({expandByOverlay:this.Ma,expandByPush:this.Na,readCookie:!1,writeCookie:!1}));a.metadata=JSON.stringify(D({shared:{sf_ver:this.j.safeframeVersion,ck_on:1,flash_ver:"26.0.0",canonical_url:this.maybeGetCanonicalUrl(),amp:{canonical_url:this.maybeGetCanonicalUrl()}}}));a.reportCreativeGeometry=this.gb;a.isDifferentSourceWindow=!1;
a.sentinel=this.ia;return a};g.maybeGetCanonicalUrl=function(){var a=M(this.j.getAmpDoc()).canonicalUrl,b=this.h.document.querySelector("meta[name='referrer']");if(!b)return a;switch(b.getAttribute("content")){case "same-origin":return;case "no-referrer":return;case "origin":return F(a).origin}return a};
g.getInitialGeometry=function(){var a=this.j.getPageLayoutBox(),b=(a.height-this.l.height)/2,c=(a.width-this.l.width)/2,d={top:a.top+b,bottom:a.bottom-b,left:a.left+c,right:a.right-c,height:this.pa.height,width:this.pa.width};return $d(this,d)};g.registerSafeframeHost=function(){Wd[this.ia]=Wd[this.ia]||this;Xd||(Xd=!0,this.h.addEventListener("message",Yd,!1))};g.connectMessagingChannel=function(a){this.B=this.j.iframe;this.channel=a;ae(this);be(this,{message:"connect",c:this.channel},"")};
function ae(a){var b=pc(a.h,a.Wa.bind(a)),c=a.o.onScroll(b),d=a.o.onChanged(b);a.Fa=function(){c();d()};a.Wa()}g.Wa=function(){var a=this;this.B&&this.o.getClientRectAsync(this.B).then(function(b){a.oa();var c=$d(a,b);be(a,{newGeometry:c,uid:a.Ea},"geometry_update")}).catch(function(a){return B().error("AMP-DOUBLECLICK-SAFEFRAME",a)})};
function $d(a,b){var c=a.o.getSize(),d=a.o.getScrollLeft(),e=a.o.getScrollTop(),f={windowCoords_t:0,windowCoords_r:c.width,windowCoords_b:c.height,windowCoords_l:0,frameCoords_t:b.top+e,frameCoords_r:b.right+d,frameCoords_b:b.bottom+e,frameCoords_l:b.left+d,posCoords_t:b.top,posCoords_b:b.bottom,posCoords_r:b.right,posCoords_l:b.left,styleZIndex:cc(a.j.element,"zIndex"),allowedExpansion_r:c.width-b.width,allowedExpansion_b:c.height-b.height,allowedExpansion_t:0,allowedExpansion_l:0,yInView:a.getPercInView(c.height,
b.top,b.bottom),xInView:a.getPercInView(c.width,b.left,b.right)};a.ba=f;return JSON.stringify(f)}g.getPercInView=function(a,b,c){var d=c>=a?a-b:c,e=d/(c-b);return Math.max(0,Math.min(1,e))||0};function be(a,b,c){if(a.B.contentWindow){var d={};d.c=a.channel;d.p=JSON.stringify(b);d.s=c;d.e=a.ia;d.i=a.ab;a.B.contentWindow.postMessage(JSON.stringify(d),"https://tpc.googlesyndication.com")}else B().error("AMP-DOUBLECLICK-SAFEFRAME","Frame contentWindow unavailable.")}
g.processMessage=function(a,b){switch(b){case "creative_geometry_update":ce(this,a);break;case "expand_request":if(this.ra){b=Number(this.l.height)+a.expand_b+a.expand_t;var c=Number(this.l.width)+a.expand_r+a.expand_l;isNaN(b)||isNaN(c)||a.push&&!this.Na||!a.push&&!this.Ma&&(c>this.l.width||b>this.l.height)?(B().error("AMP-DOUBLECLICK-SAFEFRAME","Invalid expand values."),this.sendResizeResponse(!1,"expand_response")):b>this.o.getSize().height||c>this.o.getSize().width?this.sendResizeResponse(!1,
"expand_response"):this.handleSizeChange(b,c,"expand_response")}break;case "register_done":this.ra=!0;break;case "collapse_request":this.W||!this.ra?this.sendResizeResponse(!1,"collapse_response"):this.handleSizeChange(this.pa.height,this.pa.width,"collapse_response",!0);break;case "resize_request":this.ra&&(b=Number(this.l.height)+(a.resize_b+a.resize_t),a=Number(this.l.width)+(a.resize_r+a.resize_l),isNaN(a)||isNaN(b)||a>this.l.width||b>this.l.height?B().error("AMP-DOUBLECLICK-SAFEFRAME","Invalid resize values."):
this.resizeAmpAdAndSafeframe(b,a,"resize_response",!0))}};g.resizeSafeframe=function(a,b,c){var d=this;this.W="collapse_response"==c;this.j.measureMutateElement(function(){d.j.getResource().measure()},function(){d.B&&(S(d.B,{height:a+"px",width:b+"px"}),d.l.height=a,d.l.width=b);d.sendResizeResponse(!0,c)},this.B)};
g.handleSizeChange=function(a,b,c,d){var e=this;return this.o.getClientRectAsync(this.j.element).then(function(f){!d&&b<=f.width&&a<=f.height?e.resizeSafeframe(a,b,c):e.resizeAmpAdAndSafeframe(a,b,c,d)})};
g.sendResizeResponse=function(a,b){var c=this;this.B&&this.o.getClientRectAsync(this.B).then(function(d){c.oa();d=$d(c,d);be(c,{uid:c.Ea,success:a,newGeometry:d,expand_t:c.ba.allowedExpansion_t,expand_b:c.ba.allowedExpansion_b,expand_r:c.ba.allowedExpansion_r,expand_l:c.ba.allowedExpansion_l,push:!0},b)}).catch(function(a){return B().error("AMP-DOUBLECLICK-SAFEFRAME",a)})};
g.resizeAmpAdAndSafeframe=function(a,b,c,d){var e=this;this.j.attemptChangeSize(a,b).then(function(){e.oa();e.resizeSafeframe(a,b,c)},function(){e.j.getResource().resetPendingChangeSize();d?e.resizeSafeframe(a,b,c):e.sendResizeResponse(!1,c)}).catch(function(a){"CANCELLED"==a.message?B().error("AMP-DOUBLECLICK-SAFEFRAME",a):(B().error("AMP-DOUBLECLICK-SAFEFRAME","Resizing failed: "+a),e.sendResizeResponse(!1,c))})};
function ce(a,b){var c;b&&(c=parseInt(b.height,10))?a.j.attemptChangeHeight(c).then(function(){a.oa();var b=c,e=a.j.iframe;(parseInt(cc(e,"height"),10)||0)!=b&&S(e,{height:b+"px"});a.V&&(a.j.fireDelayedImpressions(a.V),a.V=null);a.B.contentWindow.postMessage(JSON.stringify(D({message:"resize-complete",c:a.channel})),"https://tpc.googlesyndication.com")}).catch(function(b){"CANCELLED"==b.message?B().error("AMP-DOUBLECLICK-SAFEFRAME",b):a.j.forceCollapse()}):a.j.forceCollapse()}
g.destroy=function(){this.B=null;delete Wd[this.ia];this.Fa&&this.Fa();0==Object.keys(Wd).length&&(window.removeEventListener("message",Yd,!1),Xd=!1)};var pe=[de,ee,fe,ge,he,ie,je,ke,le,me,ne,oe];function qe(a){var b={output:"ldjh",impl:"fifs"};pe.forEach(function(c){return Object.assign(b,c(a))});return b}function re(a,b){for(var c=0;c<a.length;c++){var d=b(a[c]);if(d)return d}return null}
function de(a){var b={},c=[],d=0,e=[];a.forEach(function(a){var f=a.element.getAttribute("data-slot"),h=f.split("/"),l=[];for(a=0;a<h.length;a++)if(""!=h[a]){var m=b[h[a]];void 0==m&&(c.push(h[a]),b[h[a]]=m=d++);l.push(m)}e.push(l.join("/"))});return{iu_parts:c.join(),enc_prev_ius:e.join()}}function ee(a){return re(a,function(a){return a.jsonTargeting&&a.jsonTargeting.cookieOptOut?{co:"1"}:null})}function fe(a){return{adks:a.map(function(a){return a.adKey}).join()}}
function ge(a){return{prev_iu_szs:a.map(function(a){return a.parameterSize}).join()}}function he(a){return re(a,function(a){return a.jsonTargeting&&a.jsonTargeting.tagForChildDirectedTreatment?{tfcd:a.jsonTargeting.tagForChildDirectedTreatment}:null})}function ie(a){return re(a,function(a){return Vb(a.element)?{adtest:"on"}:null})}
function je(a){var b=!1,c=[];a.forEach(function(a){a.jsonTargeting&&(a.jsonTargeting.targeting||a.jsonTargeting.categoryExclusions)?(b=!0,c.push(se(a.jsonTargeting.targeting||null,a.jsonTargeting.categoryExclusions||null))):c.push("")});return b?{prev_scp:c.join("|")}:null}
function ke(a){var b={},c=a.length&&/(?:#|,)deid=([\d,]+)/i.exec(a[0].win.location.hash)||[];(c[1]||"").split(",").forEach(function(a){return a&&(b[a]=1)});a.forEach(function(a){return a.experimentIds.forEach(function(a){return b[a]=1})});var d=Object.keys(b).join();return d?{eid:d}:null}function le(a){return re(a,function(a){return a.buildIdentityParams()})}function me(a){var b=!1,c=[];a.forEach(function(a){b=b||a.forceSafeframe;c.push(Number(a.forceSafeframe))});return b?{fsfs:c.join()}:null}
function ne(a){var b=[],c=[];a.forEach(function(a){var d=a.getPageLayoutBox();b.push(d.left);c.push(d.top)});return{adxs:b.join(),adys:c.join()}}function oe(a){var b=!1,c=[];a.forEach(function(a){a=zb(a.element);c.push(a.join());b=b||!!a.length});return b?{acts:c.join("|")}:null}function se(a,b){var c=a?Object.keys(a).map(function(b){return te(b,a[b])}):[];b&&c.push(te("excl_cat",b));return c.length?c.join("&"):null}
function te(a,b){var c=(Array.isArray(b)?b:[b]).map(encodeURIComponent).join();return encodeURIComponent(a)+"="+c}
function ue(a,b,c,d,e){var f=Object.keys(b);1==f.length&&v(b[f[0]])&&(b=b[f[0]],b=Object.keys(b).reduce(function(a,c){a[c.toLowerCase()]=b[c];return a},{}));b["x-ampadrender"]="safeframe";d.shift()({headers:{get:function(a){(a=b[a.toLowerCase()])&&"string"!=typeof a&&(a=JSON.stringify(a));return a},has:function(a){return!!b[a.toLowerCase()]}},arrayBuffer:function(){return Ea(function(){return"undefined"!==typeof TextEncoder?(new TextEncoder("utf-8")).encode(a):Dc(unescape(encodeURIComponent(a)))})}});
c&&d.length&&B().warn("amp-ad-network-doubleclick-impl","Premature end of SRA response",d.length,e)};var ve={SRA_CONTROL:"117152666",SRA:"117152667",SRA_NO_RECOVER:"21062235"},Z={},we=null,xe;
function ye(a){a=W.call(this,a)||this;a.T=null;a.cb=bb(a.win);a.sa=null;a.R=null;a.parameterSize=null;a.ha=null;a.ma=null;a.jsonTargeting=null;a.adKey=0;a.experimentIds=[];a.useSra=!1;a.sraDeferred=new H;a.ea=null;a.Ua=0;a.va=0;a.C=!1;a.V=null;a.Qa=null;a.identityToken=null;a.G={};a.wa=null;a.X=!1;a.I=null;a.forceSafeframe=!1;"forceSafeframe"in a.element.dataset&&(/^(1|(true))$/i.test(a.element.dataset.forceSafeframe)?a.forceSafeframe=!0:z().warn("amp-ad-network-doubleclick-impl","Ignoring invalid data-force-safeframe attribute: "+
a.element.dataset.forceSafeframe));a.consentState=null;a.getAdUrlDeferred=new H;return a}aa(ye,W);function ze(a){if(a.X)return a.X;if(a.element.getAttribute("data-loading-strategy"))return!1;var b=a.postAdResponseExperimentFeatures["render-idle-vp"],c=parseInt(b,10);return b&&isNaN(c)?!1:c||12}g=ye.prototype;g.idleRenderOutsideViewport=function(){var a=this,b=ze(this);if(!1===b)return b;this.X=!0;this.getResource().whenWithinViewport(this.renderOutsideViewport()).then(function(){return a.X=!1});return b};
g.isLayoutSupported=function(a){return(this.C="fluid"==a)||rc(a)};g.isValidElement=function(){return this.isAmpAdElement()};
g.setPageLevelExperiments=function(){var a=this;wb.test(this.win.location.origin)||G(this.win,"expDfpInvOrigDeprecated")||this.experimentIds.push("21060933");var b={},b=(b.doubleclickSraExp={isTrafficEligible:function(){return!a.win.document.querySelector("meta[name=amp-ad-enable-refresh], amp-ad[type=doubleclick][data-enable-refresh], meta[name=amp-ad-doubleclick-sra]")},branches:Object.keys(ve).map(function(a){return ve[a]})},b),c=Da(this.win,b);Object.keys(c).forEach(function(b){return c[b]&&a.experimentIds.push(c[b])})};
function Ae(a){function b(a){return z().warn("amp-ad-network-doubleclick-impl",a+" is no longer supported for DoubleClick.Please refer to https://github.com/ampproject/amphtml/issues/11834 for more information")}var c="useSameDomainRenderingUntilDeprecated",d=c in a.element.dataset||(R(a.element.getAttribute("json"))||{})[c];d&&b(c);a.win.document.querySelector("meta[name=amp-3p-iframe-src]")&&b("remote.html")}
g.buildCallback=function(){var a=this;W.prototype.buildCallback.call(this);Ae(this);this.setPageLevelExperiments();this.useSra=!!this.win.document.querySelector("meta[name=amp-ad-doubleclick-sra]")||!!this.experimentIds.filter(function(a){return"117152667"==a||"21062235"==a}).length;this.Qa=Q(this.getAmpDoc()).whenFirstVisible().then(function(){var b=a.win,c=a.getAmpDoc();b.goog_identity_prom=b.goog_identity_prom||Sb(b,c);return b.goog_identity_prom});this.G.slotId=this.element.getAttribute("data-slot");
this.G.slotIndex=this.element.getAttribute("data-amp-slot-index")};g.shouldPreferentialRenderWithoutCrypto=function(){wb.test(this.win.location.origin);return!0};g.getPageParameters=function(a,b){b=b||[this];var c=this.win.devicePixelRatio,d=this.getLocationQueryParameterValue("google_preview")||null,e=b,f=[],k;for(k in Z)e.includes(Z[k])||f.push(k);return{npa:2==a||4==a?1:null,gdfp_req:"1",sfv:"1-0-23",u_sd:c,gct:d,psts:f}};
function Be(a){var b=a.jsonTargeting&&a.jsonTargeting.tagForChildDirectedTreatment;a.win.ampAdGoogleIfiCounter=a.win.ampAdGoogleIfiCounter||1;a.va=a.isRefreshing&&a.va||a.win.ampAdGoogleIfiCounter++;var c=a.isSinglePageStoryAd?a.element.getPageLayoutBox():null;return Object.assign({iu:a.element.getAttribute("data-slot"),co:a.jsonTargeting&&a.jsonTargeting.cookieOptOut?"1":null,adk:a.adKey,sz:a.isSinglePageStoryAd?"1x1":a.parameterSize,output:"html",impl:"ifr",tfcd:void 0==b?null:b,adtest:Vb(a.element)?
"on":null,ifi:a.va,rc:a.Ua||null,frc:Number(a.fromResumeCallback)||null,fluid:a.C?"height":null,fsf:a.forceSafeframe?"1":null,scp:se(a.jsonTargeting&&a.jsonTargeting.targeting||null,a.jsonTargeting&&a.jsonTargeting.categoryExclusions||null),spsa:a.isSinglePageStoryAd?c.width+"x"+c.height:null},yb(a))}
g.populateAdUrlState=function(a){this.consentState=a;a=Number(this.element.getAttribute("data-override-width"))||Number(this.element.getAttribute("width"));var b=Number(this.element.getAttribute("data-override-height"))||Number(this.element.getAttribute("height"));this.R=this.C?{width:0,height:0}:a&&b?{width:a,height:b}:this.getIntersectionElementLayoutBox();this.jsonTargeting=R(this.element.getAttribute("json"))||{};this.adKey=Ce(this,this.R.width+"x"+this.R.height);this.parameterSize=this.C?"320x50":
this.R.width+"x"+this.R.height;if(a=this.element.getAttribute("data-multi-size"))"responsive"==this.element.getAttribute("layout")&&(z().warn("amp-ad-network-doubleclick-impl","Behavior of multi-size and responsive layout is currently not well defined. Forcefully overriding layout to `fixed`."),this.element.setAttribute("layout","fixed")),b=this.element.getAttribute("data-multi-size-validation")||"true",a=jc(a,this.R.width,this.R.height,"true"==b,this.C),a.length&&(this.parameterSize+="|"+a.map(function(a){return a.join("x")}).join("|"))};
g.getConsentPolicy=function(){return null};
g.getAdUrl=function(a,b){var c=this;if(4==a&&"true"!=this.element.getAttribute("data-npa-on-unknown-consent"))return z().info("amp-ad-network-doubleclick-impl","Ad request suppressed due to unknown consent"),this.getAdUrlDeferred.resolve(""),Promise.resolve("");if(this.iframe&&!this.isRefreshing)return B().warn("amp-ad-network-doubleclick-impl","Frame already exists, sra: "+this.useSra),this.getAdUrlDeferred.resolve(""),Promise.resolve("");b=b||Promise.resolve();this.populateAdUrlState(a);var d=Date.now(),
e=N(this.win).timeoutPromise(1E3,this.Qa).catch(function(){return{}}),f=this.verifyStillCurrent();Promise.all([b,e]).then(function(b){f();var e=De(c,b[0]);c.identityToken=b[1];Kb(c,d,Object.assign(Be(c),c.buildIdentityParams(),c.getPageParameters(a),e),c.experimentIds).then(function(a){return c.getAdUrlDeferred.resolve(a)})});return this.G.adUrl=this.getAdUrlDeferred.promise};
g.buildIdentityParams=function(){return this.identityToken?{adsid:this.identityToken.token||null,jar:this.identityToken.jar||null,pucrd:this.identityToken.pucrd||null}:{}};
function De(a,b){if(!b)return null;var c=[],d=[],e=[],f;b.forEach(function(b){if(b&&(c.push(b.rtcTime),d.push(b.error||"2"),e.push(b.callout),b.response)){if(b.response.targeting){var h=Ee(b.response.targeting,b.callout);a.jsonTargeting.targeting=a.jsonTargeting.targeting?la(a.jsonTargeting.targeting,h):h}b.response.categoryExclusions&&(f||(f={},a.jsonTargeting.categoryExclusions&&a.jsonTargeting.categoryExclusions.forEach(function(a){f[a]=!0})),b.response.categoryExclusions.forEach(function(a){f[a]=
!0}))}});f&&(a.jsonTargeting.categoryExclusions=Object.keys(f));return{artc:c.join()||null,ati:d.join(),ard:e.join()}}
g.Oa=function(){var a=this,b={height:!0,width:!0,"data-slot":!0,"data-multi-size":!0,"data-multi-size-validation":!0,"data-override-width":!0,"data-override-height":!0};return{PAGEVIEWID:function(){return M(a.element).pageViewId},HREF:function(){return a.win.location.href},REFERRER:function(b){return Fe(a,b)},TGT:function(){return JSON.stringify((R(a.element.getAttribute("json"))||{}).targeting)},ADCID:function(b){return ib(a.getAmpDoc(),parseInt(b,10))},ATTR:function(c){if(b[c.toLowerCase()])return a.element.getAttribute(c);
B().warn("TAG","Invalid attribute "+c)},CANONICAL_URL:function(){return M(a.element).canonicalUrl}}};function Fe(a,b){var c=parseInt(b,10),d=Q(a.getAmpDoc()).getReferrerUrl();return isNaN(c)||0>c?d:N(a.win).timeoutPromise(c,d).catch(function(){})}function Ee(a,b){if(!Ad[b]||Ad[b].disableKeyAppend)return a;var c={};Object.keys(a).forEach(function(d){c[d+"_"+b]=a[d]});return c}
g.onNetworkFailure=function(a,b){B().info("amp-ad-network-doubleclick-impl","network error, attempt adding of error parameter",a);a=(new RegExp("[?|&]("+encodeURIComponent(hb.name)+"="+(encodeURIComponent(String(hb.value))+"|aet=[^&]*)$"))).test(b)?void 0:b+"&aet=n";return{adUrl:a}};
g.extractSize=function(a){this.T=Pb(a);this.sa=a.get("X-QQID");this.G.creativeId=a.get("google-creative-id");this.G.lineItemId=a.get("google-lineitem-id");this.T&&this.cb.installExtensionForDoc(this.getAmpDoc(),"amp-analytics");var b=W.prototype.extractSize.call(this,a);b?(this.ha=b,Ge(this,b.width,b.height)):b=this.getSlotSize();this.C&&!this.ha&&(this.V=a.get("X-AmpImps"));a.get("amp-ff-pageview-tokens")&&(this.removePageviewStateToken(),this.setPageviewStateToken(a.get("amp-ff-pageview-tokens")));
return b};g.getSlotSize=function(){var a=Number(this.element.getAttribute("width")),b=Number(this.element.getAttribute("height"));return a&&b?{width:a,height:b}:this.getIntersectionElementLayoutBox()};
g.tearDownSlot=function(){W.prototype.tearDownSlot.call(this);this.element.setAttribute("data-amp-slot-index",this.win.ampAdSlotIdCounter++);if(this.ma){var a=this.ma;a.parentElement&&a.parentElement.removeChild(a);this.ma=null}this.wa=this.jsonTargeting=this.T=null;this.X=!1;we=this.ha=this.parameterSize=null;this.sraDeferred=new H;this.consentState=this.sa=null;this.getAdUrlDeferred=new H;this.removePageviewStateToken()};
g.renderNonAmpCreative=function(){var a=this;if(this.postAdResponseExperimentFeatures["render-idle-throttle"]&&this.X){if(this.win["3pla"])return(wc||Promise.resolve()).then(function(){return W.prototype.renderNonAmpCreative.call(a)});yc(this.win);return W.prototype.renderNonAmpCreative.call(this,!0)}return W.prototype.renderNonAmpCreative.call(this)};g.unlayoutCallback=function(){this.ea&&this.ea.unobserve();if(!this.useSra&&this.wa)return!1;this.I&&(this.I.destroy(),this.I=null);return W.prototype.unlayoutCallback.call(this)};
g.cleanupAfterTest=function(){this.I&&(this.I.destroy(),this.I=null)};g.refresh=function(a){this.Ua++;return W.prototype.refresh.call(this,a)};
g.onCreativeRender=function(a){var b=this;W.prototype.onCreativeRender.call(this,a);this.wa=!!a;a&&!a.customElementExtensions.includes("amp-ad-exit")&&Ud(this.getAmpDoc(),this.iframe.contentWindow);this.T&&(xb(this)&&Qb(this.win,this.element,this.T,this.sa,!!a),this.ma=Hc(this.element,this.T,!!this.postAdResponseExperimentFeatures.avr_disable_immediate));this.isRefreshing&&(this.ea.initiateRefreshCycle(),this.isRelayoutNeededFlag=this.isRefreshing=!1);a=this.ha||this.getSlotSize();var c=this.C&&this.ha&&
!(0==a.width&&0==a.height);S(this.iframe,{width:a.width+"px",height:a.height+"px",position:c?"relative":null});c&&(this.element.removeAttribute("height"),S(this.element,{width:a.width+"px"}));this.ea=this.ea||Qd(this,function(){return b.useSra?(z().warn("amp-ad-network-doubleclick-impl","Refresh not compatible with SRA."),!1):zb(b.element).filter(function(a){return a!=ub["AMP-CAROUSEL"]&&a!=ub["AMP-STICKY-AD"]}).length?(z().warn("amp-ad-network-doubleclick-impl","Refresh not compatible with ad-containers, except for AMP-CAROUSEL and AMP-STICKY-AD"),
!1):!0});this.postTroubleshootMessage()};function Ce(a,b){a=a.element;var c=eb(a),d=a.getAttribute("data-slot")||"",e=a.getAttribute("data-multi-size")||"";return na(d+":"+b+":"+e+":"+c)}function Ge(a,b,c){var d=a.element.getAttribute("width"),e=a.element.getAttribute("height");(a.C&&b&&c||(b!=d||c!=e)&&b<=d&&c<=e)&&a.attemptChangeSize(c,b).catch(function(){})}
g.sendXhrRequest=function(a){var b=this;if(!this.useSra)return W.prototype.sendXhrRequest.call(this,a);this.initiateSraRequests();return this.sraDeferred.promise.then(function(c){return c||W.prototype.sendXhrRequest.call(b,a)})};
g.fireDelayedImpressions=function(a,b){var c=this;a&&a.split(",").forEach(function(a){try{xa(a)?c.win.document.body.appendChild(Ua(c.win.document,"amp-pixel",D({src:a,referrerpolicy:b?"no-referrer":""}))):B().warn("amp-ad-network-doubleclick-impl","insecure impression url: "+a)}catch(e){}})};g.groupSlotsForSra=function(){return Bb(this.win,this.element.getAttribute("type"))};
g.initiateSraRequests=function(){var a=this;if(!we){var b=this.verifyStillCurrent();we=this.groupSlotsForSra().then(function(c){b();Object.keys(c).forEach(function(d){var e=c[d];Promise.all(e).then(function(c){b();var e=c.filter(function(a){var b=a.hasAdPromise();b||B().info("amp-ad-network-doubleclick-impl","Ignoring instance without ad promise as likely invalid",a.element);return b});if(e.length)if(1==e.length)B().info("amp-ad-network-doubleclick-impl","single block in network "+d),e[0].sraDeferred.resolve(null);
else{var f,l=e.map(function(a){return a.sraDeferred.resolve}),m=hc(function(a,c,d){b();ue(a,c,d,l,f)});return He(a,e).then(function(c){b();f=c;return L(a.win,"xhr").fetch(f,{mode:"cors",method:"GET",credentials:"include"})}).then(function(c){b();return gc(a.win,c,m)}).catch(function(b){fc(b)?e.forEach(function(a){return a.sraDeferred.reject(b)}):a.win.document.querySelector("meta[name=amp-ad-doubleclick-sra]")||a.experimentIds.includes("21062235")?(vd(b,f),a.warnOnError("SRA request failure",b),e.forEach(function(a){a.resetAdUrl();
a.attemptCollapse();a.sraDeferred.reject(b)})):e.forEach(function(a){return a.sraDeferred.resolve(null)})})}})})})}};g.warnOnError=function(a,b){B().warn("amp-ad-network-doubleclick-impl",a,b)};g.getPreconnectUrls=function(){return["https://securepubads.g.doubleclick.net/"]};g.getNonAmpCreativeRenderingMethod=function(a){return this.forceSafeframe||this.C?"safeframe":W.prototype.getNonAmpCreativeRenderingMethod.call(this,a)};
g.getLocationQueryParameterValue=function(a){xe=xe||p(this.win.location&&this.win.location.search||"");return xe[a]};g.getAdditionalContextMetadata=function(a){a=void 0===a?!1:a;if(this.C||a){var b=this.getCreativeSize();this.I=this.I||new Zd(this,this.C,b,this.V);return this.I.getSafeframeNameAttr()}};
g.postTroubleshootMessage=function(){var a=this;return this.win.opener&&/[?|&]dfpdeb/.test(this.win.location.search)?this.G.adUrl.then(function(b){var c=a.G.slotId+"_"+a.G.slotIndex;b=D({gutData:JSON.stringify(D({events:[{timestamp:Date.now(),slotid:c,messageId:4}],slots:[{contentUrl:b||"",id:c,leafAdUnitName:a.G.slotId,domId:c,lineItemId:a.G.lineItemId,creativeId:a.G.creativeId}]})),userAgent:navigator.userAgent,referrer:a.win.location.href,messageType:"LOAD"});a.win.opener.postMessage(b,"*")}):
null};g.setPageviewStateToken=function(a){Z[a]=this};g.removePageviewStateToken=function(){for(var a in Z)if(Z[a]==this){delete Z[a];break}};
g.getA4aAnalyticsVars=function(a){var b=this.sa,c=this.win,d=this.getAmpDoc(),e=Q(d),f=c.performance&&c.performance.timing&&c.performance.timing.navigationStart||0,c={correlator:Eb(c,d),slotId:this.element.getAttribute("data-amp-slot-index"),viewerLastVisibleTime:e.getLastVisibleTime()-f};b&&(c.qqid=b);"ad-render-start"==a&&(c.scheduleTime=this.element.layoutScheduleTime-f);return c};
g.getA4aAnalyticsConfig=function(){return D({requests:{csi:"https://csi.gstatic.com/csi?"},transport:{xhrpost:!1},triggers:{adRequestStart:Ob("ad-request-start",{"met.a4a":"afs_lvt.${viewerLastVisibleTime}~afs.${time}"}),adResponseEnd:Ob("ad-response-end",{"met.a4a":"afe.${time}"}),adRenderStart:Ob("ad-render-start",{"met.a4a":"ast.${scheduleTime}~ars_lvt.${viewerLastVisibleTime}~ars.${time}",qqid:"${qqid}"}),adIframeLoaded:Ob("ad-iframe-loaded",{"met.a4a":"ail.${time}"})},extraUrlParams:{s:"ampad",
ctx:"2",c:"${correlator}",slotId:"${slotId}",puid:"${requestCount}~${timestamp}"}})};(function(a){a.registerElement("amp-ad-network-doubleclick-impl",ye)})(self.AMP);function Cb(a){return(a=/^(?:\/)?(\d+)/.exec(a.getAttribute("data-slot")))?a[1]:""}
function He(a,b){var c=Date.now();return Promise.all(b.map(function(a){return a.getAdUrlDeferred.promise})).then(function(){return Db(a,c)}).then(function(a){var d=qe(b),f=Object.assign(d,a,b[0].getPageParameters(b[0].consentState,b));return gb(f)+"&dtd="+Lb(c)})};
})});
//# sourceMappingURL=amp-ad-network-doubleclick-impl-0.1.js.map

