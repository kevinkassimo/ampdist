(self.AMP=self.AMP||[]).push({n:"amp-consent",v:"1533591342461",f:(function(AMP,_){
var h;function aa(a,b){function c(){}c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a;for(var d in b)if(Object.defineProperties){var e=Object.getOwnPropertyDescriptor(b,d);e&&Object.defineProperty(a,d,e)}else a[d]=b[d]}function k(a,b){b=void 0===b?"":b;try{return decodeURIComponent(a)}catch(c){return b}};var ca=/(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;var da=Object.prototype.toString;function ea(a){return"number"===typeof a&&isFinite(a)}function l(a,b){for(var c in a)if(a[c]===b)return!0;return!1};self.log=self.log||{user:null,dev:null,userForEmbed:null};var m=self.log;function n(){if(!m.user)throw Error("failed to call initLogConstructor");return m.user}function q(){if(m.dev)return m.dev;throw Error("failed to call initLogConstructor");};var fa=Object.prototype.hasOwnProperty;function r(){var a,b=Object.create(null);a&&Object.assign(b,a);return b};function t(a,b){return b.length>a.length?!1:0==a.lastIndexOf(b,0)};var u=self.AMP_CONFIG||{},ga={thirdParty:u.thirdPartyUrl||"https://3p.ampproject.net",thirdPartyFrameHost:u.thirdPartyFrameHost||"ampproject.net",thirdPartyFrameRegex:("string"==typeof u.thirdPartyFrameRegex?new RegExp(u.thirdPartyFrameRegex):u.thirdPartyFrameRegex)||/^d-\d+\.ampproject\.net$/,cdn:u.cdnUrl||"https://cdn.ampproject.org",cdnProxyRegex:("string"==typeof u.cdnProxyRegex?new RegExp(u.cdnProxyRegex):u.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/,localhostRegex:/^https?:\/\/localhost(:\d+)?$/,
errorReporting:u.errorReportingUrl||"https://amp-error-reporting.appspot.com/r",localDev:u.localDev||!1};function w(a){this.ka=a;this.T=this.aa=0;this.H=Object.create(null)}w.prototype.has=function(a){return!!this.H[a]};w.prototype.get=function(a){var b=this.H[a];if(b)return b.access=++this.T,b.payload};w.prototype.put=function(a,b){this.has(a)||this.aa++;this.H[a]={payload:b,access:this.T};if(!(this.aa<=this.ka)){q().warn("lru-cache","Trimming LRU cache");a=this.H;var c=this.T+1,d,e;for(e in a){var f=a[e].access;f<c&&(c=f,d=e)}void 0!==d&&(delete a[d],this.aa--)}};var ha={c:!0,v:!0,a:!0,ad:!0},x,y,ia=/[?&]amp_js[^&]*/,ja=/[?&]amp_gsa[^&]*/,ka=/[?&]amp_r[^&]*/,la=/[?&]usqp[^&]*/;
function z(a){var b;x||(x=self.document.createElement("a"),y=self.UrlCache||(self.UrlCache=new w(100)));var c=b?null:y,d=x;if(c&&c.has(a))a=c.get(a);else{d.href=a;d.protocol||(d.href=d.href);var e={href:d.href,protocol:d.protocol,host:d.host,hostname:d.hostname,port:"0"==d.port?"":d.port,pathname:d.pathname,search:d.search,hash:d.hash,origin:null};"/"!==e.pathname[0]&&(e.pathname="/"+e.pathname);if("http:"==e.protocol&&80==e.port||"https:"==e.protocol&&443==e.port)e.port="",e.host=e.hostname;e.origin=
d.origin&&"null"!=d.origin?d.origin:"data:"!=e.protocol&&e.host?e.protocol+"//"+e.host:e.href;c&&c.put(a,e);a=e}return a}function ma(a){"string"==typeof a&&(a=z(a));var b;(b="https:"==a.protocol||"localhost"==a.hostname)||(a=a.hostname,b=a.length-10,b=0<=b&&a.indexOf(".localhost",b)==b);return b}
function A(a,b){var c;c=void 0===c?"source":c;n().assert(null!=a,"%s %s must be available",b,c);var d=a;n().assert(ma(d)||/^(\/\/)/.test(d),'%s %s must start with "https://" or "//" or be relative and served from either https or from localhost. Invalid value: %s',b,c,d)}
function na(a){"string"==typeof a&&(a=z(a));var b=a;"string"==typeof b&&(b=z(b));if(!ga.cdnProxyRegex.test(b.origin))return a.href;var b=a.pathname.split("/"),c=b[1];n().assert(ha[c],"Unknown path prefix in url %s",a.href);var d=b[2],e="s"==d?"https://"+decodeURIComponent(b[3]):"http://"+decodeURIComponent(d);n().assert(0<e.indexOf("."),"Expected a . in origin %s",e);b.splice(1,"s"==d?3:2);b=e+b.join("/");c=(c=a.search)&&"?"!=c?(c=c.replace(ia,"").replace(ja,"").replace(ka,"").replace(la,"").replace(/^[?&]/,
""))?"?"+c:"":"";return b+c+(a.hash||"")}function oa(a,b){"string"==typeof b&&(b=z(b));var c;if("function"==typeof URL)c=(new URL(a,b.href)).toString();else{c=a;var d=b;"string"==typeof d&&(d=z(d));c=c.replace(/\\/g,"/");var e=z(c);c=t(c.toLowerCase(),e.protocol)?e.href:t(c,"//")?d.protocol+c:t(c,"/")?d.origin+c:d.origin+d.pathname.replace(/\/[^/]*$/,"/")+c}return c};function B(a){var b="multi-consent",c;if(a.__AMP__EXPERIMENT_TOGGLES)c=a.__AMP__EXPERIMENT_TOGGLES;else{a.__AMP__EXPERIMENT_TOGGLES=Object.create(null);c=a.__AMP__EXPERIMENT_TOGGLES;if(a.AMP_CONFIG)for(var d in a.AMP_CONFIG){var e=a.AMP_CONFIG[d];"number"===typeof e&&0<=e&&1>=e&&(c[d]=Math.random()<e)}if(a.AMP_CONFIG&&Array.isArray(a.AMP_CONFIG["allow-doc-opt-in"])&&0<a.AMP_CONFIG["allow-doc-opt-in"].length&&(d=a.AMP_CONFIG["allow-doc-opt-in"],e=a.document.head.querySelector('meta[name="amp-experiments-opt-in"]')))for(var e=
e.getAttribute("content").split(","),f=0;f<e.length;f++)-1!=d.indexOf(e[f])&&(c[e[f]]=!0);Object.assign(c,pa(a));if(a.AMP_CONFIG&&Array.isArray(a.AMP_CONFIG["allow-url-opt-in"])&&0<a.AMP_CONFIG["allow-url-opt-in"].length){d=a.AMP_CONFIG["allow-url-opt-in"];e=a.location.originalHash||a.location.hash;a=Object.create(null);if(e)for(var g;g=ca.exec(e);)f=k(g[1],g[1]),g=g[2]?k(g[2],g[2]):"",a[f]=g;for(e=0;e<d.length;e++)f=a["e-"+d[e]],"1"==f&&(c[d[e]]=!0),"0"==f&&(c[d[e]]=!1)}}var p=c;return!!p[b]}
function pa(a){a:{var b;try{b=a.document.cookie}catch(g){b=""}if(a=b)for(a=a.split(";"),b=0;b<a.length;b++){var c=a[b].trim(),d=c.indexOf("=");if(-1!=d&&"AMP_EXP"==k(c.substring(0,d).trim(),void 0)){a=c.substring(d+1).trim();a=k(a,a);break a}}a=null}var e=a,f=e?e.split(/\s*,\s*/g):[];a=Object.create(null);for(b=0;b<f.length;b++)0!=f[b].length&&("-"==f[b][0]?a[f[b].substr(1)]=!1:a[f[b]]=!0);return a};function C(){var a,b;this.promise=new Promise(function(c,d){a=c;b=d});this.resolve=a;this.reject=b};function D(a,b){a=a.__AMP_TOP||a;return E(a,b)}function F(a){a=G(a);a=H(a);return E(a,"viewer")}function I(a,b){a=H(a);var c=J(a,b);if(!c){var d=new C,c=d.promise,d=d.resolve;K(a)[b]={obj:null,promise:c,resolve:d,context:null,ctor:null}}b=c;return b}function G(a){return a.nodeType?D((a.ownerDocument||a).defaultView,"ampdoc").getAmpDoc(a):a}function H(a){a=G(a);return a.isSingleDoc()?a.win:a}
function E(a,b){var c=K(a);a=c[b];a.obj||(a.obj=new a.ctor(a.context),a.ctor=null,a.context=null,a.resolve&&a.resolve(a.obj));return a.obj}function J(a,b){var c=K(a)[b];if(c){if(c.promise)return c.promise;E(a,b);return c.promise=Promise.resolve(c.obj)}return null}function K(a){var b=a.services;b||(b=a.services={});return b};/*
 https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
var L;function M(a,b){if(null==L){var c=a.ownerDocument;try{var d=c.createElement("div"),e=c.createElement("div");d.appendChild(e);L=d.querySelector(":scope div")===e}catch(f){L=!1}}if(L)return a.querySelectorAll(":scope "+b);a.classList.add("i-amphtml-scoped");b=a.querySelectorAll(".i-amphtml-scoped "+b);a.classList.remove("i-amphtml-scoped");return b}function qa(a){return"SCRIPT"==a.tagName&&"APPLICATION/JSON"==a.getAttribute("type").toUpperCase()};function ra(a){var b=G(a),c=J(H(a),"geo");return c?c:b.whenBodyAvailable().then(function(){var a;a=b.win;var c=b.getHeadNode(),f;if(c){f=[];for(var c=c.querySelectorAll("script[custom-element]"),g=0;g<c.length;g++)f.push(c[g].getAttribute("custom-element"))}else f=[];a=f.includes("amp-geo")?D(a,"extensions").waitForExtension(a,"amp-geo"):Promise.resolve();return a}).then(function(){return J(H(a),"geo")})};function sa(a,b){try{return JSON.parse(a)}catch(c){b&&b(c)}};var N,O="Webkit webkit Moz moz ms O o".split(" ");function P(a,b,c){if(t(b,"--"))return b;N||(N=r());var d=N[b];if(!d||c){d=b;if(void 0===a[b]){var e=b.charAt(0).toUpperCase()+b.slice(1);a:{for(var f=0;f<O.length;f++){var g=O[f]+e;if(void 0!==a[g]){e=g;break a}}e=""}var p=e;void 0!==a[p]&&(d=p)}c||(N[b]=d)}return d}function Q(a,b){for(var c in b)a.style.setProperty(P(b,c),b[c].toString(),"important")}
function R(a){var b=!0;if(void 0===b){var c;c=(c=P(a.style,"display",void 0))?a.style[c]:void 0;b="none"==c}c=b?"":"none";var d=P(a.style,"display",void 0);d&&(a.style[d]=c)};function S(){this.o=null}h=S.prototype;h.add=function(a){var b=this;this.o||(this.o=[]);this.o.push(a);return function(){b.remove(a)}};h.remove=function(a){this.o&&(a=this.o.indexOf(a),-1<a&&this.o.splice(a,1))};h.removeAll=function(){this.o&&(this.o.length=0)};h.fire=function(a){if(this.o)for(var b=this.o,c=0;c<b.length;c++)(0,b[c])(a)};h.getHandlerCount=function(){return this.o?this.o.length:0};function T(){this.F=0;this.ga=Promise.resolve();this.ea=function(){};this.fa=function(){}}T.prototype.onQueueEmpty=function(a){this.ea=a;0==this.F&&a()};T.prototype.onQueueNotEmpty=function(a){this.fa=a;0<this.F&&a()};T.prototype.registerUI=function(a){var b=this;0==this.F&&this.fa();this.F++;var c=this.ga.then(function(){return a().then(function(){b.F--;0==b.F&&b.ea()})});return this.ga=c};var ta={ACCEPTED:1,REJECTED:2,DISMISSED:3,NOT_REQUIRED:4,UNKNOWN:5};function U(a){this.w=a;this.h={};this.I={};this.K={};this.J={}}h=U.prototype;h.registerConsentInstance=function(a,b){this.h[a]?q().error("CONSENT-STATE-MANAGER","instance "+a+" already registered"):(this.h[a]=new V(this.w,a,b),this.I[a]=new S,this.K[a]&&(this.K[a](),this.J[a]=null,this.K[a]=null))};
h.updateConsentInstanceState=function(a,b){this.h[a]&&this.I[a]?(this.I[a].fire(b),this.h[a].update(b)):q().error("CONSENT-STATE-MANAGER","instance "+a+" not registered")};h.getConsentInstanceState=function(a){return this.h[a].get()};h.onConsentStateChange=function(a,b){var c=this.I[a].add(b);this.getConsentInstanceState(a).then(function(a){b(a)});return c};h.setConsentInstanceSharedData=function(a,b){this.h[a].sharedDataPromise=b};h.getConsentInstanceSharedData=function(a){return this.h[a].sharedDataPromise};
h.whenConsentReady=function(a){if(this.h[a])return Promise.resolve();if(!this.J[a]){var b=new C;this.J[a]=b.promise;this.K[a]=b.resolve}return this.J[a]};function V(a,b,c){this.w=a;this.ma=b;this.sharedDataPromise=null;this.ia=I(a,"storage");this.m=null;this.ha="amp-consent:"+b;(this.N=c.onUpdateHref||null)&&A(this.N,"AMP-CONSENT")}
V.prototype.update=function(a){var b=this;l(ta,a)||(a=5);if(3==a)this.m=this.m||5;else if(4==a)this.m&&5!=this.m||(this.m=4);else if(a!==this.m&&(this.m=a,5!=a)){var c=1==a;this.ia.then(function(d){a==b.m&&(d.set(b.ha,c),ua(b,c))})}};
V.prototype.get=function(){var a=this;return this.m?Promise.resolve(this.m):this.ia.then(function(b){return b.get(a.ha)}).then(function(b){if(a.m)return a.m;a.m=void 0===b?5:b?1:2;return a.m}).catch(function(a){q().error("CONSENT-STATE-MANAGER","Failed to read storage",a);return 5})};
function ua(a,b){if(a.N){var c=I(a.w,"cid").then(function(a){return a.get({scope:"AMP-CONSENT",createCookieIfNotPresent:!0},Promise.resolve())});c.then(function(c){var d={credentials:"include",method:"POST",body:{consentInstanceId:a.ma,ampUserId:c,consentState:b},ampCors:!1};F(a.w).whenFirstVisible().then(function(){D(a.w.win,"xhr").fetchJson(a.N,d)})})}};var W={"default":!0,_till_responded:!0,_till_accepted:!0,_auto_reject:!0};function X(a){this.w=a;this.P=r();this.O=r();this.h=r();this.ca=I(this.w,"consentStateManager");a=new C;this.ja=a.promise;this.U=a.resolve}h=X.prototype;
h.registerConsentPolicyInstance=function(a,b){var c=this;this.h[a]&&q().error("consent-policy-manager","policy "+a+" already registered");var d=Object.keys(b.waitFor||{}),e=new va(b);this.h[a]=e;this.O[a]&&(this.O[a](),this.O[a]=null,this.P[a]=null);var f=[];this.ca.then(function(a){for(var b={},g=0;g<d.length;b={consentId:b.consentId,resolver:b.resolver},g++){b.consentId=d[g];var ba=new C,za=ba.promise;b.resolver=ba.resolve;a.whenConsentReady(b.consentId).then(function(b){return function(){a.onConsentStateChange(b.consentId,
function(a){b.resolver&&(b.resolver(),b.resolver=null);e.consentStateChangeHandler(b.consentId,a)})}}(b));f.push(za)}c.ja.then(function(){Promise.all(f).then(function(){e.startTimeout(c.w.win)})})})};h.enableTimeout=function(){this.U&&this.U();this.U=null};
h.whenPolicyResolved=function(a){var b=this;return B(this.w.win)||W[a]?wa(this,a).then(function(){return b.h[a].getReadyPromise().then(function(){return b.h[a].getCurrentPolicyStatus()})}):(n().error("consent-policy-manager","can not find defined policy "+a+", only supported predefined policy supported now"),Promise.resolve(4))};
h.whenPolicyUnblock=function(a){var b=this;return B(this.w.win)||W[a]?wa(this,a).then(function(){return b.h[a].getReadyPromise().then(function(){return b.h[a].shouldBlock()})}):(n().error("consent-policy-manager","can not find defined policy "+a+", only supported predefined policy supported now"),Promise.resolve(!1))};
h.getMergedSharedData=function(a){var b=this;return this.whenPolicyResolved(a).then(function(){return b.ca}).then(function(c){var d=b.h[a].getConsentInstanceIds().map(function(a){return c.getConsentInstanceSharedData(a)});return Promise.all(d)}).then(function(a){a.unshift({});return Object.assign.apply(null,a)})};function wa(a,b){if(a.h[b])return Promise.resolve();if(!a.P[b]){var c=new C;a.P[b]=c.promise;a.O[b]=c.resolve}return a.P[b]}
function va(a){var b=Object.keys(a.waitFor||{});this.la=a;this.l=r();var c=new C;this.na=c.promise;this.$=c.resolve;this.ba=4;this.pa=a.unblockOn||[1,3];this.X(b)}h=va.prototype;h.X=function(a){for(var b=0;b<a.length;b++)this.l[a[b]]=null};h.getConsentInstanceIds=function(){return Object.keys(this.l)};
h.startTimeout=function(a){var b=this,c=this.la.timeout,d=null,e;void 0!=c&&("[object Object]"===da.call(c)?(c.fallbackAction&&"reject"==c.fallbackAction?e=2:c.fallbackAction&&"dismiss"!=c.fallbackAction&&n().error("consent-policy-manager","unsupported fallbackAction "+c.fallbackAction),d=c.seconds):d=c,n().assert(ea(d),"invalid timeout value "+d));null!=d&&a.setTimeout(function(){xa(b,!0,e)},1E3*d)};
h.consentStateChangeHandler=function(a,b){if(!fa.call(this.l,a))q().error("consent-policy-manager","cannot find "+a+" in policy state");else if(5!=b){if(4==b){var c=1!=this.l[a]&&2!=this.l[a];c&&(this.l[a]=4)}else 3==b?null===this.l[a]&&(this.l[a]=5):this.l[a]=b;xa(this)}};
function xa(a,b,c){b=void 0===b?!1:b;for(var d=!0,e=!0,f=!1,g=Object.keys(a.l),p=0;p<g.length;p++){var v=g[p];if(null===a.l[v])if(b)a.l[v]=c||5;else return;4==a.l[v]&&(d=!1);2==a.l[v]&&(e=d=!1);5==a.l[v]&&(e=d=!1,f=!0)}a.ba=d?1:e?3:f?4:2;a.$&&(a.$(),a.$=null)}h.getReadyPromise=function(){return this.na};h.getCurrentPolicyStatus=function(){return this.ba};h.shouldBlock=function(){return-1<this.pa.indexOf(this.ba)};var ya={ACCEPT:"accept",REJECT:"reject",DISMISS:"dismiss"};function Y(a){a=AMP.BaseElement.call(this,a)||this;a.C=null;a.V=null;a.G=null;a.L=r();a.B={};a.A={};a.da=r();a.R=!1;a.j=null;a.D=null;a.M=r();a.W=r();a.Y=!1;a.S=a.getVsync();a.Z=!1;return a}aa(Y,AMP.BaseElement);Y.prototype.getConsentPolicy=function(){return null};
Y.prototype.buildCallback=function(){var a=this;this.Y=B(this.win);n().assert(this.element.getAttribute("id"),"amp-consent should have an id");Aa(this);for(var b=this.getRealChildren(),c=0;c<b.length;c++)this.setAsOwner(b[c]);var d=I(this.getAmpDoc(),"consentPolicyManager").then(function(b){a.V=b;var c=Object.keys(a.B);b={};for(var d=0;d<c.length;d++)b[c[d]]=void 0;var c={waitFor:b},d=[4,1,2,3],e={waitFor:b,timeout:{seconds:0,fallbackAction:"reject"},unblockOn:d};a.A._till_responded={waitFor:b,unblockOn:d};
a.A._till_accepted=c;a.A._auto_reject=e;a.A&&a.A["default"]||(a.A["default"]=c);var f=Object.keys(a.A);for(b=0;b<f.length;b++)a.V.registerConsentPolicyInstance(f[b],a.A[f[b]])}),e=I(this.getAmpDoc(),"consentStateManager").then(function(b){a.C=b}),f=I(this.getAmpDoc(),"notificationUIManager").then(function(b){a.G=b});Promise.all([e,f,d]).then(function(){a.X()})};
function Ba(a){a.registerAction("accept",function(){return Z(a,"accept")});a.registerAction("reject",function(){return Z(a,"reject")});a.registerAction("dismiss",function(){return Z(a,"dismiss")});a.registerAction("prompt",function(b){var c=b.args,d=c&&c.consent;a.Y||(d=Object.keys(a.B)[0]);d=d||"";n().assert(a.B[d],"consent with id "+d+" not found");Ca(a,d)});Da(a)}
function Da(a){a.win.addEventListener("message",function(b){if(a.j){var c=b.data;if(c&&"consent-response"==c.type)if(c.action)for(var d=M(a.element,"amp-iframe iframe"),e=0;e<d.length;e++){if(d[e].contentWindow===b.source){var f=c.action;Z(a,f);break}}else n().error("amp-consent","consent-response message missing required info")}})}function Ca(a,b){a.G||q().error("amp-consent","notification ui manager not found");!a.W[b]&&a.L[b]&&(a.W[b]=!0,a.G.registerUI(a.oa.bind(a,b)))}
Y.prototype.oa=function(a){var b=this;this.j&&q().error("amp-consent","other consent instance on display "+this.j);this.S.mutate(function(){b.R||(b.R=!0,R(b.element));b.element.classList.remove("amp-hidden");b.element.classList.add("amp-active");b.getViewport().addToFixedLayer(b.element);b.j=a;var c=b.L[b.j];Q(c,{display:"block"});b.scheduleLayout(c)});var c=new C;this.M[a]=c.resolve;return c.promise};
function Ea(a){var b=a.j&&a.L[a.j];a.S.mutate(function(){a.element.classList.add("amp-hidden");a.element.classList.remove("amp-active");a.getViewport().removeFromFixedLayer(a.element);b||q().error("amp-consent",a.j+" no consent ui to hide");Q(b,{display:"none"})});var c=a.j;a.M[c]&&(a.M[c](),a.M[c]=null);a.W[c]=!1;a.j=null}
function Z(a,b){l(ya,b)&&a.j&&(a.C?("accept"==b?a.C.updateConsentInstanceState(a.j,1):"reject"==b?a.C.updateConsentInstanceState(a.j,2):"dismiss"==b&&a.C.updateConsentInstanceState(a.j,3),Ea(a)):q().error("amp-consent","No consent state manager"))}
Y.prototype.X=function(){for(var a=this,b=Object.keys(this.B),c=[],d={},e=0;e<b.length;d={instanceId:d.instanceId},e++){d.instanceId=b[e];this.C.registerConsentInstance(d.instanceId,this.B[d.instanceId]);var f=Fa(this,d.instanceId,this.B[d.instanceId]),g=f.then(function(b){return function(){return Ga(a,b.instanceId)}}(d)).catch(function(){});c.push(g)}Promise.all(c).then(function(){Ha(a);a.V.enableTimeout()});Ba(this)};
function Fa(a,b,c){n().assert(c.checkConsentHref||c.promptIfUnknownForGeoGroup,"neither checkConsentHref nor promptIfUnknownForGeoGroup is defined");var d=Promise.resolve(null);c.checkConsentHref&&(d=Ia(a,b),Ja(a,b,d));var e=Promise.resolve();if(c.promptIfUnknownForGeoGroup)var f=c.promptIfUnknownForGeoGroup,e=Ka(a,f);return e.then(function(c){return d.then(function(d){var e=a.da,f=c;d&&1==d.promptIfUnknown?f=!0:d&&0==d.promptIfUnknown?f=!1:void 0==f&&(f=!1);e[b]=f})})}
function Ja(a,b,c){var d=c.then(function(a){return a&&void 0!==a.sharedData?a.sharedData:null});a.C.setConsentInstanceSharedData(b,d)}function Ka(a,b){return ra(a.element).then(function(a){n().assert(a,"requires <amp-geo> to use promptIfUnknownForGeoGroup");return 0<=a.ISOCountryGroups.indexOf(b)})}
function Ia(a,b){var c={credentials:"include",method:"POST",body:{consentInstanceId:b},requireAmpResponseSourceOrigin:!1},d=a.B[b].checkConsentHref;A(d,a.element);b=a.getAmpDoc();var e=na(b.getUrl()),f=oa(d,e),g=F(b);return g.whenFirstVisible().then(function(){return D(a.win,"xhr").fetchJson(f,c).then(function(a){return a.json()})})}
function Aa(a){var b=M(a.element,"> script");n().assert(1==b.length,"amp-consent should have (only) one <script> child");var c=b[0];n().assert(qa(c),'amp-consent consent instance config should be put in a <script>tag with type= "application/json"');var b=sa(c.textContent,function(){n().assert(!1,"amp-consent: Error parsing config")}),d=b.consents;n().assert(d,"amp-consent: consents config is required");n().assert(0!=Object.keys(d).length,"amp-consent: can't find consent instance");if(!a.Y&&(n().assert(1>=
Object.keys(d).length,"amp-consent: only single consent instance is supported"),b.policy))for(var e=Object.keys(b.policy),f=0;f<e.length;f++)"default"!=e[f]&&(n().warn("amp-consent","policy "+e[f]+" is currently not supportedand will be ignored"),delete b.policy[e[f]]);a.B=d;if(b.postPromptUI){var g=b.postPromptUI;a.D=a.getAmpDoc().getElementById(g);a.D||a.user().error("amp-consent","postPromptUI element with "+("id="+g+" not found"))}a.A=b.policy||a.A}
function Ga(a,b){var c=a.B[b].promptUI;if(c){var d=a.getAmpDoc().getElementById(c);d&&a.element.contains(d)||(d=null,a.user().error("amp-consent","child element of <amp-consent> with "+("promptUI id "+c+" not found")));a.L[b]=d}return a.C.getConsentInstanceState(b).then(function(c){if(1==c||2==c)a.Z=!0;5==c&&(a.da[b]?(a.Z=!0,Ca(a,b)):a.C.updateConsentInstanceState(b,4))})}
function Ha(a){if(a.Z){var b=a.element.classList;a.G.onQueueEmpty(function(){a.D&&a.S.mutate(function(){a.R||(a.R=!0,R(a.element));b.add("amp-active");b.remove("amp-hidden");a.getViewport().addToFixedLayer(a.element);Q(a.D,{display:"block"})})});a.G.onQueueNotEmpty(function(){a.D&&a.S.mutate(function(){a.j||(b.add("amp-hidden"),b.remove("amp-active"));a.getViewport().removeFromFixedLayer(a.element);Q(a.D,{display:"none"})})})}}
(function(a){a.registerElement("amp-consent",Y,"amp-consent{position:fixed;bottom:0;left:0;overflow:hidden!important;background:hsla(0,0%,100%,0.7);z-index:1000;width:100%}amp-consent>*{display:none!important;max-height:100vh!important}amp-consent.amp-active{visibility:visible}amp-consent.amp-hidden{visibility:hidden}\n/*# sourceURL=/extensions/amp-consent/0.1/amp-consent.css*/");a.registerServiceForDoc("notificationUIManager",T);a.registerServiceForDoc("consentStateManager",U);a.registerServiceForDoc("consentPolicyManager",
X)})(self.AMP);
})});
//# sourceMappingURL=amp-consent-0.1.js.map

