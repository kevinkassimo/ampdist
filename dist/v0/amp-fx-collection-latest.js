(self.AMP=self.AMP||[]).push({n:"amp-fx-collection",v:"1533591342461",f:(function(AMP,_){
var k;function l(a){for(var b=null,c="",e=0;e<arguments.length;e++){var d=arguments[e];if(d instanceof Error&&!b){var b=void 0,f=d.message,g=String(Math.random());d.message=g;if(d.message===g)d.message=f,b=d;else{f=Error(d.message);for(b in d)f[b]=d[b];f.stack=d.stack;b=f}}else c&&(c+=" "),c+=d}b?c&&(b.message=c+": "+b.message):b=Error(c);return b}function m(a){var b=l.apply(null,arguments);setTimeout(function(){self.reportError(b);throw b;})}self.log=self.log||{user:null,dev:null,userForEmbed:null};
var q=self.log;function r(){if(!q.user)throw Error("failed to call initLogConstructor");return q.user};function t(){var a,b=Object.create(null);a&&Object.assign(b,a);return b};function u(a,b){return b.length>a.length?!1:0==a.lastIndexOf(b,0)};function v(a,b){var c=w(a),e=x(c);a=e;var d=y(a),f=d["position-observer"];f||(f=d["position-observer"]={obj:null,promise:null,resolve:null,context:null,ctor:null});f.ctor||f.obj||(f.ctor=b,f.context=c,f.resolve&&z(a,"position-observer"))}function A(a,b){a=a.__AMP_TOP||a;return z(a,b)}function B(a,b){a=w(a);a=x(a);return z(a,b)}function w(a){return a.nodeType?A((a.ownerDocument||a).defaultView,"ampdoc").getAmpDoc(a):a}function x(a){a=w(a);return a.isSingleDoc()?a.win:a}
function z(a,b){var c=y(a);a=c[b];a.obj||(a.obj=new a.ctor(a.context),a.ctor=null,a.context=null,a.resolve&&a.resolve(a.obj));return a.obj}function y(a){var b=a.services;b||(b=a.services={});return b};/*
 https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
function C(a,b){for(var c=0,e;void 0!==(e=a[c]);c++)b(e,c)};function D(a){return B(a,"viewport")};var E;function F(a,b){var c=void 0,e=a,d=b,f;f=function(a){try{return d(a)}catch(p){throw self.reportError(p),p;}};var g=H(),h=!1;c&&(h=c.capture);e.addEventListener("amp:dom-update",f,g?c:h)}function H(){if(void 0!==E)return E;E=!1;try{var a={get capture(){E=!0}};self.addEventListener("test-options",null,a);self.removeEventListener("test-options",null,a)}catch(b){}return E};var I,J="Webkit webkit Moz moz ms O o".split(" ");function K(a,b){for(var c in b){var e=a,d=b[c],f;f=e.style;var g=c;if(u(g,"--"))f=g;else{I||(I=t());var h=I[g];if(!h){h=g;if(void 0===f[g]){var n=g.charAt(0).toUpperCase()+g.slice(1);b:{for(var p=0;p<J.length;p++){var G=J[p]+n;if(void 0!==f[G]){n=G;break b}}n=""}void 0!==f[n]&&(h=n)}I[g]=h}f=h}f&&(e.style[f]=d)}}function L(a,b){return a.getComputedStyle(b)||t()};function M(a,b){return{left:0,top:0,width:a,height:b,bottom:0+b,right:0+a,x:0,y:0}}function N(a,b){return a&&b?a.left==b.left&&a.top==b.top&&a.width==b.width&&a.height==b.height:!1};function aa(a,b){function c(){e=0;var g=500-(a.Date.now()-d);if(0<g)e=a.setTimeout(c,g);else{var h=f;f=null;b.apply(null,h)}}var e=0,d=0,f=null;return function(b){for(var g=[],n=0;n<arguments.length;++n)g[n-0]=arguments[n];d=a.Date.now();f=g;e||(e=a.setTimeout(c,500))}};function O(a,b,c,e){this.element=b;this.I=e;this.fidelity=c;this.turn=0==c?Math.floor(4*Math.random()):0;this.m=null;this.j=D(a)}
O.prototype.update=function(a){var b=this;if(!a){if(0!=this.turn){this.turn--;return}0==this.fidelity&&(this.turn=4)}var c=this.j.getSize(),e=M(c.width,c.height);this.j.getClientRectAsync(this.element).then(function(a){var c={positionRect:a,viewportRect:e,relativePos:""},d=b.m;if(!(d&&N(d.positionRect,c.positionRect)&&N(d.viewportRect,c.viewportRect))){var d=c.positionRect,h=c.viewportRect;c.relativePos=d.top<h.top?"top":d.bottom>h.bottom?"bottom":"inside";h=c.viewportRect;d.top<=h.bottom&&h.top<=
d.bottom&&d.left<=h.right&&h.left<=d.right?(b.m=c,b.I(c)):b.m&&(b.m=null,c.positionRect=null,b.I(c))}})};function P(a){var b=this;this.l=a;this.O=a.win;this.c=[];this.Y=A(this.O,"vsync");this.j=D(a);this.w=[];this.A=this.F=this.D=!1;this.P=aa(this.O,function(){b.D=!1})}P.prototype.observe=function(a,b,c){var e=this,d=new O(this.l,a,b,c);this.c.push(d);this.A||ba(this);d.update();return function(){for(var a=0;a<e.c.length;a++)if(e.c[a]==d){e.c.splice(a,1);0==e.c.length&&Q(e);break}}};
P.prototype.unobserve=function(a){for(var b=0;b<this.c.length;b++)if(this.c[b].element==a){this.c.splice(b,1);0==this.c.length&&Q(this);return}if(q.dev)a=q.dev;else throw Error("failed to call initLogConstructor");a.error("POSITION_OBSERVER","cannot unobserve unobserved element")};function ba(a){a.A=!0;a.w.push(a.j.onScroll(function(){a.P();a.D=!0;a.F||R(a)}));a.w.push(a.j.onResize(function(){a.updateAllEntries(!0)}))}function Q(a){for(a.A=!1;a.w.length;)a.w.pop()()}
P.prototype.updateAllEntries=function(a){for(var b=0;b<this.c.length;b++)this.c[b].update(a)};function R(a){a.updateAllEntries();a.F=!0;a.D?a.Y.measure(function(){R(a)}):a.F=!1}function ca(a){v(a,function(){return new P(a)})};var S={parallax:{userAsserts:function(a){var b=r().assert(a.getAttribute("data-parallax-factor"),"data-parallax-factor=<number> attribute must be provided for: %s",a);r().assert(0<parseFloat(b),"data-parallax-factor must be a number and greater than 0 for: %s",a)},update:function(a){var b=this,c=a.positionRect?a.positionRect.top:null;if(c&&!(c>b.adjustedViewportHeight)){var e=-(parseFloat(b.getFactor())-1);b.setOffset((b.adjustedViewportHeight-c)*e);b.isMutateScheduled()||(b.setIsMutateScheduled(!0),
b.getResources().mutateElement(b.getElement(),function(){b.setIsMutateScheduled(!1);K(b.getElement(),{transform:"translateY("+b.getOffset().toFixed(0)+"px)"})}))}}},"fly-in-bottom":{userAsserts:function(a){var b=parseFloat(a.getAttribute("data-margin-start"));b&&r().assert(0<=b&&100>=b,"data-margin-start must be a percentage value and be between 0% and 100% for: %s",a)},update:function(a){var b=this;!(a=a.positionRect?a.positionRect.top:null)||a-b.adjustedViewportHeight*b.getFlyInDistance()/100>(1-
b.getMarginStart())*b.adjustedViewportHeight||b.isMutateScheduled()||(b.initialTrigger||b.getResources().mutateElement(b.getElement(),function(){var a=L(b.getAmpDoc().win,b.getElement());K(b.getElement(),{top:"calc("+a.top+" + "+b.getFlyInDistance()+"vh)",visibility:"visible"});b.initialTrigger=!0}),b.setIsMutateScheduled(!0),b.getResources().mutateElement(b.getElement(),function(){b.setIsMutateScheduled(!1);K(b.getElement(),{"transition-duration":b.getDuration(),"transition-timing-function":b.getEasing(),
transform:"translateY(-"+b.getFlyInDistance()+"vh)"})}))}},"fly-in-left":{userAsserts:function(a){var b=parseFloat(a.getAttribute("data-margin-start"));b&&r().assert(0<=b&&100>=b,"data-margin-start must be a percentage value and be between 0% and 100% for: %s",a)},update:function(a){var b=this;!(a=a.positionRect?a.positionRect.top:null)||a>(1-b.getMarginStart())*b.adjustedViewportHeight||b.isMutateScheduled()||(b.initialTrigger||b.getResources().mutateElement(b.getElement(),function(){var a=L(b.getAmpDoc().win,
b.getElement());K(b.getElement(),{left:"calc("+a.left+" - "+b.getFlyInDistance()+"vw)",visibility:"visible"});b.initialTrigger=!0}),b.setIsMutateScheduled(!0),b.getResources().mutateElement(b.getElement(),function(){b.setIsMutateScheduled(!1);K(b.getElement(),{"transition-duration":b.getDuration(),"transition-timing-function":b.getEasing(),transform:"translateX("+b.getFlyInDistance()+"vw)"})}))}},"fly-in-right":{userAsserts:function(a){var b=parseFloat(a.getAttribute("data-margin-start"));b&&r().assert(0<=
b&&100>=b,"data-margin-start must be a percentage value and be between 0% and 100% for: %s",a)},update:function(a){var b=this;!(a=a.positionRect?a.positionRect.top:null)||a>(1-b.getMarginStart())*b.adjustedViewportHeight||b.isMutateScheduled()||(b.initialTrigger||b.getResources().mutateElement(b.getElement(),function(){var a=L(b.getAmpDoc().win,b.getElement());K(b.getElement(),{left:"calc("+a.left+" + "+b.getFlyInDistance()+"vw)",visibility:"visible"});b.initialTrigger=!0}),b.setIsMutateScheduled(!0),
b.getResources().mutateElement(b.getElement(),function(){b.setIsMutateScheduled(!1);K(b.getElement(),{"transition-duration":b.getDuration(),"transition-timing-function":b.getEasing(),transform:"translateX(-"+b.getFlyInDistance()+"vw)"})}))}},"fly-in-top":{userAsserts:function(a){var b=parseFloat(a.getAttribute("data-margin-start"));b&&r().assert(0<=b&&100>=b,"data-margin-start must be a percentage value and be between 0% and 100% for: %s",a)},update:function(a){var b=this;!(a=a.positionRect?a.positionRect.top:
null)||a+b.adjustedViewportHeight*b.getFlyInDistance()/100>(1-b.getMarginStart())*b.adjustedViewportHeight||b.isMutateScheduled()||(b.initialTrigger||b.getResources().mutateElement(b.getElement(),function(){var a=L(b.getAmpDoc().win,b.getElement());K(b.getElement(),{top:"calc("+a.top+" - "+b.getFlyInDistance()+"vh)",visibility:"visible"});b.initialTrigger=!0}),b.setIsMutateScheduled(!0),b.getResources().mutateElement(b.getElement(),function(){b.setIsMutateScheduled(!1);K(b.getElement(),{"transition-duration":b.getDuration(),
"transition-timing-function":b.getEasing(),transform:"translateY("+b.getFlyInDistance()+"vh)"})}))}},"fade-in":{userAsserts:function(a){var b=parseFloat(a.getAttribute("data-margin-start"));b&&r().assert(0<=b&&100>=b,"data-margin-start must be a percentage value and be between 0% and 100% for: %s",a)},update:function(a){var b=this;!(a=a.positionRect?a.positionRect.top:null)||a>(1-b.getMarginStart())*b.adjustedViewportHeight||b.isMutateScheduled()||(b.setIsMutateScheduled(!0),b.getResources().mutateElement(b.getElement(),
function(){b.setIsMutateScheduled(!1);K(b.getElement(),{"transition-duration":b.getDuration(),"transition-timing-function":b.getEasing(),opacity:1})}))}},"fade-in-scroll":{userAsserts:function(a){var b=parseFloat(a.getAttribute("data-margin-start")),c=parseFloat(a.getAttribute("data-margin-end"));if(b||c)r().assert(0<=b&&100>=b,"data-margin-start must be a percentage value and be between 0% and 100% for: %s",a),r().assert(0<=c&&100>=c,"data-margin-end must be a percentage value and be between 0% and 100% for: %s",
a),r().assert(c>b,"data-margin-end must be greater than data-margin-start for: %s",a)},update:function(a){var b=this;a=a.positionRect?a.positionRect.top:null;if(!(!a||a>(1-b.getMarginStart())*b.adjustedViewportHeight||b.isMutateScheduled()||!b.hasRepeat()&&1<=b.getOffset())){var c=b.getMarginEnd()-b.getMarginStart();a=1*(b.adjustedViewportHeight-a-b.getMarginStart()*b.adjustedViewportHeight)/(c*b.adjustedViewportHeight);b.setOffset(a);b.isMutateScheduled()||(b.setIsMutateScheduled(!0),b.getResources().mutateElement(b.getElement(),
function(){b.setIsMutateScheduled(!1);K(b.getElement(),{opacity:b.getOffset()})}))}}}};function da(a){switch(a){case "linear":return"cubic-bezier(0.00, 0.00, 1.00, 1.00)";case "ease-in-out":return"cubic-bezier(0.80, 0.00, 0.20, 1.00)";case "ease-in":return"cubic-bezier(0.80, 0.00, 0.60, 1.00)";case "ease-out":return"cubic-bezier(0.40, 0.00, 0.40, 1.00)";default:return r().assert(u(a,"cubic-bezier"),"All custom bezier curves should be specified by following the `cubic-bezier()` function notation."),a}}function T(a){var b=parseFloat(a);return isNaN(b)?null:b/100}
function ea(a){switch(a){case "parallax":return{"will-change":"transform"};case "fade-in":return{"will-change":"opacity",opacity:0};case "fade-in-scroll":return{"will-change":"opacity",opacity:0};case "fly-in-bottom":case "fly-in-top":case "fly-in-left":case "fly-in-right":return{"will-change":"transform"};default:return{visibility:"visible"}}}
function fa(a,b){switch(b){case "fade-in":return"1000ms";case "fly-in-bottom":case "fly-in-top":case "fly-in-left":case "fly-in-right":return a=D(a).getSize().width,a=Math.min(1E3,a),480>a?a=480:1E3<a&&(a=1E3),200*(a-480)/520+400+"ms";default:return"1ms"}}function U(a){switch(a){case "fade-in":case "fly-in-right":case "fly-in-left":case "fly-in-top":case "fly-in-bottom":return{start:.05};case "fade-in-scroll":return{start:0,end:.5};default:return{start:0,end:1}}};function V(a,b){this.j=D(a);this.o=B(a,"resources");ca(a);var c=w(a),c=x(c);this.G=z(c,"position-observer");this.l=a;this.h=b}V.prototype.installOn=function(a){new W(a,this.G,this.j,this.o,this.l,this.h);K(a,ea(this.h))};
function W(a,b,c,e,d,f){var g=this;this.G=b;this.j=c;this.o=e;this.adjustedViewportHeight=null;this.B=a;this.J=!1;this.K=0;this.h=f;this.l=d;S[this.h].userAsserts(a);this.T=parseFloat(a.getAttribute("data-parallax-factor"));this.X=a.hasAttribute("data-margin-start")?T(a.getAttribute("data-margin-start")):U(this.h).start;this.W=a.hasAttribute("data-margin-end")?T(a.getAttribute("data-margin-end")):U(this.h).end;if(a.hasAttribute("data-easing"))d=a.getAttribute("data-easing");else a:switch(this.h){case "fade-in":d=
"ease-in";break a;case "fly-in-right":case "fly-in-left":case "fly-in-top":case "fly-in-bottom":d="ease-out";break a;default:d="ease-in"}this.S=da(d);this.R=a.hasAttribute("data-duration")?a.getAttribute("data-duration"):fa(this.l,this.h);if(a.hasAttribute("data-fly-in-distance"))d=parseFloat(a.getAttribute("data-fly-in-distance"));else a:switch(this.h){case "fly-in-bottom":case "fly-in-top":d=1E3>D(this.l).getSize().width?25:33;break a;case "fly-in-left":case "fly-in-right":d=100;break a;default:d=
1}this.U=d;this.V=a.hasAttribute("data-repeat");this.initialTrigger=!1;X(this).then(function(a){g.adjustedViewportHeight=a;ga(g)})}function ga(a){a.G.observe(a.B,1,S[a.h].update.bind(a));a.j.onResize(function(){X(a).then(function(b){a.adjustedViewportHeight=b})})}function X(a){return a.o.measureElement(function(){for(var b=a.j.getHeight(),c=0,e=a.B;e;e=e.offsetParent)c+=e.offsetTop;var d=c<b;return d?c:b})}k=W.prototype;k.getAmpDoc=function(){return this.l};k.getFactor=function(){return this.T};
k.getDuration=function(){return this.R};k.getMarginStart=function(){return this.X};k.getMarginEnd=function(){return this.W};k.getFlyInDistance=function(){return this.U};k.getEasing=function(){return this.S};k.getElement=function(){return this.B};k.getResources=function(){return this.o};k.getOffset=function(){return this.K};k.setOffset=function(a){this.K=a};k.isMutateScheduled=function(){return this.J};k.hasRepeat=function(){return this.V};k.setIsMutateScheduled=function(a){this.J=a};var ha={PARALLAX:"parallax",FADE_IN:"fade-in",FADE_IN_SCROLL:"fade-in-scroll",FLY_IN_BOTTOM:"fly-in-bottom",FLY_IN_LEFT:"fly-in-left",FLY_IN_RIGHT:"fly-in-right",FLY_IN_TOP:"fly-in-top"},Y={parallax:["fly-in-top","fly-in-bottom"],"fly-in-top":["parallax","fly-in-bottom"],"fly-in-bottom":["fly-in-top","parallax"],"fly-in-right":["fly-in-left"],"fly-in-left":["fly-in-right"],"fade-in":["fade-in-scroll"],"fade-in-scroll":["fade-in"]};
function Z(a){var b=this;this.l=a;this.L=a.getRootNode();this.H=[];this.N=B(a,"viewer");this.C=t();Promise.all([a.whenReady(),this.N.whenFirstVisible()]).then(function(){b.M();var a=b.M.bind(b);F(b.L,a)})}Z.prototype.M=function(){var a=this,b=this.L.querySelectorAll("[amp-fx]");C(b,function(b){if(!a.H.includes(b))try{ia(a,b),a.H.push(b)}catch(e){m(e)}})};function ia(a,b){a.H.includes(b);a.N.isVisible();var c=ja(b);c.forEach(function(c){a.C[c]||(a.C[c]=new V(a.l,c));var d=a.C[c];d.installOn(b)})}
function ja(a){a=a.getAttribute("amp-fx").trim().toLowerCase().split(/\s+/);r().assert(a.length,"No value provided for `amp-fx` attribute");a.forEach(function(a){r().assertEnumValue(ha,a,"amp-fx")});ka(a);return a}function ka(a){for(var b=0;b<a.length;b++){var c=a[b];if(c in Y)for(var e=b+1;e<a.length;e++)-1!==Y[c].indexOf(a[e])&&(r().warn("amp-fx-collection","%s preset can't be combined with %s preset as the resulting animation isn't valid.",c,a[e]),a.splice(e,1))}}
(function(a){a.registerServiceForDoc("amp-fx-collection",Z)})(self.AMP);
})});
//# sourceMappingURL=amp-fx-collection-0.1.js.map

