(self.AMP=self.AMP||[]).push({n:"amp-pan-zoom",v:"1533591342461",f:(function(AMP,_){
var f;function m(a,b){function c(){}c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a;for(var d in b)if(Object.defineProperties){var e=Object.getOwnPropertyDescriptor(b,d);e&&Object.defineProperty(a,d,e)}else a[d]=b[d]};self.log=self.log||{user:null,dev:null,userForEmbed:null};var n=self.log;function q(){if(!n.user)throw Error("failed to call initLogConstructor");return n.user}function t(){if(n.dev)return n.dev;throw Error("failed to call initLogConstructor");};function u(){var a,b;this.promise=new Promise(function(c,d){a=c;b=d});this.resolve=a;this.reject=b};function aa(a){if(a.nodeType){var b=(a.ownerDocument||a).defaultView;if(b=b!=(b.__AMP_TOP||b)&&v(b,"action")?w(b,"action"):null)return b}b=x(a);b=x(b);b=b.isSingleDoc()?b.win:b;return w(b,"action")}function y(a,b){a=a.__AMP_TOP||a;return w(a,b)}function x(a){return a.nodeType?y((a.ownerDocument||a).defaultView,"ampdoc").getAmpDoc(a):a}
function w(a,b){v(a,b);var c=a.services;c||(c=a.services={});var d=c;a=d[b];a.obj||(a.obj=new a.ctor(a.context),a.ctor=null,a.context=null,a.resolve&&a.resolve(a.obj));return a.obj}function v(a,b){a=a.services&&a.services[b];return!(!a||!a.ctor&&!a.obj)};/*
 https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
function z(a,b,c,d){var e={detail:c};Object.assign(e,d);if("function"==typeof a.CustomEvent)return new a.CustomEvent(b,e);a=a.document.createEvent("CustomEvent");a.initCustomEvent(b,!!e.bubbles,!!e.cancelable,c);return a};var A,ba="Webkit webkit Moz moz ms O o".split(" ");function ca(a,b){for(var c in b){var d=a,e=b[c],g;g=d.style;var h=c;if(2>h.length?0:0==h.lastIndexOf("--",0))g=h;else{A||(A=Object.create(null));var k=A[h];if(!k){k=h;if(void 0===g[h]){var l=h.charAt(0).toUpperCase()+h.slice(1);b:{for(var p=0;p<ba.length;p++){var r=ba[p]+l;if(void 0!==g[r]){l=r;break b}}l=""}void 0!==g[l]&&(k=l)}A[h]=k}g=k}g&&(d.style[g]=e)}};function da(a,b,c,d){return{left:a,top:b,width:c,height:d,bottom:b+d,right:a+c,x:a,y:b}};function B(){this.H=null}f=B.prototype;f.add=function(a){var b=this;this.H||(this.H=[]);this.H.push(a);return function(){b.remove(a)}};f.remove=function(a){this.H&&(a=this.H.indexOf(a),-1<a&&this.H.splice(a,1))};f.removeAll=function(){this.H&&(this.H.length=0)};f.fire=function(a){if(this.H)for(var b=this.H,c=0;c<b.length;c++)(0,b[c])(a)};f.getHandlerCount=function(){return this.H?this.H.length:0};function ea(a,b){for(var c=0;c<a.length;c++)if(b(a[c],c,a))return c;return-1};function C(a,b,c){var d=this;this.eb=y(a,"timer");this.ib=b;this.gb=c||0;this.ba=-1;this.za=0;this.S=!1;this.fb=function(){return d.na()}}C.prototype.isPending=function(){return-1!=this.ba};C.prototype.schedule=function(a){var b=a||this.gb;this.S&&10>b&&(b=10);var c=Date.now()+b;return!this.isPending()||-10>c-this.za?(this.cancel(),this.za=c,this.ba=this.eb.delay(this.fb,b),!0):!1};C.prototype.na=function(){this.ba=-1;this.za=0;this.S=!0;this.ib();this.S=!1};
C.prototype.cancel=function(){this.isPending()&&(this.eb.cancel(this.ba),this.ba=-1)};function fa(a,b,c){var d=Date.now();this.type=a;this.data=b;this.time=d;this.event=c}
function ga(a,b){this.M=a;this.j=[];this.W=[];this.K=[];this.l=[];this.w=null;this.nb=b;this.sa=!1;this.na=new C(a.ownerDocument.defaultView,this.Qa.bind(this));this.Za=new B;this.$=Object.create(null);this.Ma=this.mb.bind(this);this.Ka=this.kb.bind(this);this.La=this.lb.bind(this);this.Ja=this.jb.bind(this);this.M.addEventListener("touchstart",this.Ma);this.M.addEventListener("touchend",this.Ka);this.M.addEventListener("touchmove",this.La);this.M.addEventListener("touchcancel",this.Ja);this.Aa=!1}
function ha(a){var b=!1,b=void 0===b?!1:b,c=a.__AMP_Gestures;c||(c=new ga(a,b),a.__AMP_Gestures=c);return c}f=ga.prototype;f.cleanup=function(){this.M.removeEventListener("touchstart",this.Ma);this.M.removeEventListener("touchend",this.Ka);this.M.removeEventListener("touchmove",this.La);this.M.removeEventListener("touchcancel",this.Ja);delete this.M.__AMP_Gestures;this.na.cancel()};f.onGesture=function(a,b){var c=new a(this),d=c.getType(),e=this.$[d];e||(this.j.push(c),e=new B,this.$[d]=e);return e.add(b)};
f.removeGesture=function(a){var b=(new a(this)).getType();if(a=this.$[b]){a.removeAll();a=ea(this.j,function(a){return a.getType()==b});if(0>a)return!1;this.j.splice(a,1);this.K.splice(a,1);this.l.splice(a,1);this.W.splice(a,1);delete this.$[b];return!0}return!1};f.onPointerDown=function(a){return this.Za.add(a)};
f.mb=function(a){var b=Date.now();this.sa=!1;this.Za.fire(a);for(var c=0;c<this.j.length;c++)if(!this.K[c]&&(this.l[c]&&this.l[c]<b&&D(this,c),this.j[c].onTouchStart(a))){var d=c;this.W[d]=!0;this.l[d]=0}E(this,a)};f.lb=function(a){for(var b=Date.now(),c=0;c<this.j.length;c++)this.W[c]&&(this.l[c]&&this.l[c]<b?D(this,c):this.j[c].onTouchMove(a)||D(this,c));E(this,a)};
f.kb=function(a){for(var b=Date.now(),c=0;c<this.j.length;c++)this.W[c]&&(this.l[c]&&this.l[c]<b?D(this,c):(this.j[c].onTouchEnd(a),(!this.l[c]||this.l[c]<b)&&D(this,c)));E(this,a)};f.jb=function(a){for(var b=0;b<this.j.length;b++){var c=b;this.K[c]=0;D(this,c)}E(this,a)};function E(a,b){var c=!!a.w||a.sa;a.sa=!1;if(!c)for(var d=Date.now(),e=0;e<a.j.length;e++)if(a.K[e]||a.l[e]&&a.l[e]>=d){c=!0;break}c&&(b.stopPropagation(),a.nb||b.preventDefault());a.Aa&&(a.Aa=!1,a.Qa())}
f.Qa=function(){for(var a=Date.now(),b=-1,c=0;c<this.j.length;c++)if(!this.K[c])this.l[c]&&this.l[c]<a&&D(this,c);else if(-1==b||this.K[c]>this.K[b])b=c;if(-1!=b){for(var d=0,c=0;c<this.j.length;c++)!this.K[c]&&this.W[c]&&(d=Math.max(d,this.l[c]-a));if(2>d){for(var a=b,c=this.j[a],e=0;e<this.j.length;e++)if(e!=a){var g=e;this.K[g]=0;D(this,g)}this.K[a]=0;this.l[a]=0;this.w=c;c.acceptStart()}else this.na.schedule(d)}};function D(a,b){a.W[b]=!1;a.l[b]=0;a.K[b]||a.j[b].acceptCancel()}
function F(a,b){this.qb=a;this.ma=b}f=F.prototype;f.getType=function(){return this.qb};f.signalReady=function(a){var b=this.ma;if(b.w)this.acceptCancel();else{for(var c=Date.now(),d=0;d<b.j.length;d++)b.j[d]==this&&(b.K[d]=c+a,b.l[d]=0);b.Aa=!0}};f.signalPending=function(a){var b=this.ma;if(b.w)this.acceptCancel();else for(var c=Date.now(),d=0;d<b.j.length;d++)b.j[d]==this&&(b.l[d]=c+a)};f.signalEnd=function(){var a=this.ma;a.w==this&&(a.w=null,a.sa=!0)};
f.signalEmit=function(a,b){var c=this.ma.$[this.getType()];c&&c.fire(new fa(this.getType(),a,b))};f.acceptStart=function(){};f.acceptCancel=function(){};f.onTouchStart=function(){return!1};f.onTouchMove=function(){return!1};f.onTouchEnd=function(){};function ia(){}var ja=Math.round(-16.67/Math.log(.95));function G(a,b,c){1>b&&(b=1);var d=a/b,e=.5+Math.min(b/33.34,.5);return d*e+c*(1-e)}function ka(a,b,c,d,e,g){var h;return(new la(a,b,c,d,e,g,h)).start()}function la(a,b,c,d,e,g,h){this.U=h||y(self,"vsync");this.O=a;this.ta=g;this.c=b;this.h=c;this.wa=d;this.xa=e;this.B=this.A=0;a=new u;this.aa=a.promise;this.Ga=a.resolve;this.Fa=a.reject;this.Y=!1}f=la.prototype;
f.start=function(){this.Y=!0;if(.02>=Math.abs(this.wa)&&.02>=Math.abs(this.xa))this.ta(this.c,this.h),this.ua(!0);else{this.A=this.wa;this.B=this.xa;var a=this.ob.bind(this),b=this.ua.bind(this,!0);this.U.runAnimMutateSeries(this.O,a,5E3).then(b,b)}return this};f.halt=function(){this.Y&&this.ua(!1)};f.then=function(a,b){return a||b?this.aa.then(a,b):this.aa};f.thenAlways=function(a){a=a||ia;return this.then(a,a)};
f.ob=function(a,b){if(!this.Y)return!1;this.c+=b*this.A;this.h+=b*this.B;if(!this.ta(this.c,this.h))return!1;var c=Math.exp(-a/ja);this.A=this.wa*c;this.B=this.xa*c;return.02<Math.abs(this.A)||.02<Math.abs(this.B)};f.ua=function(a){this.Y&&(this.Y=!1,this.ta(this.c,this.h),a?this.Ga():this.Fa())};function H(a){F.call(this,"tap",a);this.h=this.c=this.D=this.C=0;this.bb=null}m(H,F);H.prototype.onTouchStart=function(a){var b=a.touches;this.bb=a.target;return b&&1==b.length?(this.C=b[0].clientX,this.D=b[0].clientY,!0):!1};H.prototype.onTouchMove=function(a){return(a=a.changedTouches||a.touches)&&1==a.length&&(this.c=a[0].clientX,this.h=a[0].clientY,a=8<=Math.abs(this.h-this.D),8<=Math.abs(this.c-this.C)||a)?!1:!0};H.prototype.onTouchEnd=function(){this.signalReady(0)};
H.prototype.acceptStart=function(){this.signalEmit({clientX:this.c,clientY:this.h,target:this.bb},null);this.signalEnd()};function I(a){F.call(this,"doubletap",a);this.ga=this.h=this.c=this.D=this.C=0;this.Ra=null}m(I,F);f=I.prototype;f.onTouchStart=function(a){return 1<this.ga?!1:(a=a.touches)&&1==a.length?(this.C=a[0].clientX,this.D=a[0].clientY,this.c=a[0].clientX,this.h=a[0].clientY,!0):!1};
f.onTouchMove=function(a){return(a=a.touches)&&1==a.length?(this.c=a[0].clientX,this.h=a[0].clientY,a=8<=Math.abs(this.h-this.D),8<=Math.abs(this.c-this.C)||a?(this.acceptCancel(),!1):!0):!1};f.onTouchEnd=function(a){this.ga++;2>this.ga?this.signalPending(300):(this.Ra=a,this.signalReady(0))};f.acceptStart=function(){this.ga=0;this.signalEmit({clientX:this.c,clientY:this.h},this.Ra);this.signalEnd()};f.acceptCancel=function(){this.ga=0};
function J(a,b,c,d){F.call(this,a,b);this.ha=c;this.ra=d;this.w=!1;this.B=this.A=this.R=this.N=this.T=this.Ea=this.Da=this.h=this.c=this.D=this.C=0}m(J,F);f=J.prototype;f.onTouchStart=function(a){return(a=a.touches)&&1==a.length?(this.T=Date.now(),this.C=a[0].clientX,this.D=a[0].clientY,!0):!1};
f.onTouchMove=function(a){var b=a.touches;if(b&&1==b.length){var c=b[0],b=c.clientX,c=c.clientY;this.c=b;this.h=c;if(this.w)this.P(!1,!1,a);else if(a=Math.abs(b-this.C),b=Math.abs(c-this.D),this.ha&&this.ra)(8<=a||8<=b)&&this.signalReady(-10);else if(this.ha)if(8<=a&&a>b)this.signalReady(-10);else{if(8<=b)return!1}else if(this.ra)if(8<=b&&b>a)this.signalReady(-10);else{if(8<=a)return!1}else return!1;return!0}return!1};f.onTouchEnd=function(a){this.va(a)};
f.acceptStart=function(){this.w=!0;this.Da=this.C;this.Ea=this.D;this.R=this.T;this.C=this.c;this.D=this.h;this.P(!0,!1,null)};f.acceptCancel=function(){this.w=!1};
f.P=function(a,b,c){this.N=Date.now();var d=this.N-this.R;if(!b&&4<d||b&&16<d)this.A=G(this.c-this.Da,d,this.A),this.B=G(this.h-this.Ea,d,this.B),this.A=1E-4<Math.abs(this.A)?this.A:0,this.B=1E-4<Math.abs(this.B)?this.B:0,this.Da=this.c,this.Ea=this.h,this.R=this.N;this.signalEmit({first:a,last:b,time:this.N,deltaX:this.ha?this.c-this.C:0,deltaY:this.ra?this.h-this.D:0,startX:this.C,startY:this.D,lastX:this.c,lastY:this.h,velocityX:this.ha?this.A:0,velocityY:this.ra?this.B:0},c)};
f.va=function(a){this.w&&(this.w=!1,this.P(!1,!0,a),this.signalEnd())};function K(a){J.call(this,"swipe-xy",a,!0,!0)}m(K,J);function L(a){F.call(this,"pinch",a);this.w=!1;this.B=this.A=this.R=this.N=this.T=this.Oa=this.Na=this.Ca=this.Ba=this.la=this.ja=this.ka=this.ia=this.fa=this.da=this.ea=this.ca=0}m(L,F);f=L.prototype;
f.onTouchStart=function(a){return(a=a.touches)&&1==a.length?!0:a&&2==a.length?(this.T=Date.now(),this.ca=a[0].clientX,this.ea=a[0].clientY,this.da=a[1].clientX,this.fa=a[1].clientY,!0):!1};
f.onTouchMove=function(a){var b=a.touches;if(b&&1==b.length)return!0;if(b&&2==b.length){this.ia=b[0].clientX;this.ka=b[0].clientY;this.ja=b[1].clientX;this.la=b[1].clientY;if(this.w)this.P(!1,!1,a);else{var c=this.ia-this.ca,d=this.ka-this.ea,e=this.ja-this.da,g=this.la-this.fa;if(0>=c*e&&0>=d*g)(4<=Math.abs(c-e)||4<=Math.abs(d-g))&&this.signalReady(0);else if(10<=Math.abs(c+e)||10<=Math.abs(d+g))return!1}return!0}return!1};f.onTouchEnd=function(a){this.va(a)};
f.acceptStart=function(){this.w=!0;this.R=this.T;this.Ca=this.Ba=0;this.Na=.5*(this.ca+this.da);this.Oa=.5*(this.ea+this.fa);this.P(!0,!1,null)};f.acceptCancel=function(){this.w=!1};
f.P=function(a,b,c){this.N=Date.now();var d=this.N-this.R,e=Math.abs(this.ia-this.ca-(this.ja-this.da)),g=Math.abs(this.ka-this.ea-(this.la-this.fa));if(!b&&4<d||b&&16<d)this.A=G(e-this.Ba,d,this.A),this.B=G(g-this.Ca,d,this.B),this.A=1E-4<Math.abs(this.A)?this.A:0,this.B=1E-4<Math.abs(this.B)?this.B:0,this.Ba=e,this.Ca=g,this.R=this.N;var d=this.ca,h=this.da,k=this.ea,l=this.fa,p=(d-h)*(d-h)+(k-l)*(k-l),d=this.ia,h=this.ja,k=this.ka,l=this.la,r=(d-h)*(d-h)+(k-l)*(k-l);this.signalEmit({first:a,last:b,
time:this.N,centerClientX:this.Na,centerClientY:this.Oa,dir:Math.sign(r-p),deltaX:.5*e,deltaY:.5*g,velocityX:.5*this.A,velocityY:.5*this.B},c)};f.va=function(a){this.w&&(this.w=!1,this.P(!1,!0,a),this.signalEnd())};function M(a,b,c,d){var e=new ma(0,0,a,b,c,d,1,1);return e.solveYValueFromXValue.bind(e)}function ma(a,b,c,d,e,g,h,k){this.x0=a;this.y0=b;this.x1=c;this.y1=d;this.x2=e;this.y2=g;this.x3=h;this.y3=k}f=ma.prototype;f.solveYValueFromXValue=function(a){return this.getPointY(this.solvePositionFromXValue(a))};
f.solvePositionFromXValue=function(a){var b=1E-6,c=(a-this.x0)/(this.x3-this.x0);if(0>=c)return 0;if(1<=c)return 1;for(var d=0,e=1,g=0,h=0;8>h;h++){var g=this.getPointX(c),k=(this.getPointX(c+b)-g)/b;if(Math.abs(g-a)<b)return c;if(Math.abs(k)<b)break;else g<a?d=c:e=c,c-=(g-a)/k}for(h=0;Math.abs(g-a)>b&&8>h;h++)g<a?(d=c,c=(c+e)/2):(e=c,c=(c+d)/2),g=this.getPointX(c);return c};
f.getPointX=function(a){if(0==a)return this.x0;if(1==a)return this.x3;var b=this.lerp(this.x0,this.x1,a),c=this.lerp(this.x1,this.x2,a),d=this.lerp(this.x2,this.x3,a),b=this.lerp(b,c,a),c=this.lerp(c,d,a);return this.lerp(b,c,a)};f.getPointY=function(a){if(0==a)return this.y0;if(1==a)return this.y3;var b=this.lerp(this.y0,this.y1,a),c=this.lerp(this.y1,this.y2,a),d=this.lerp(this.y2,this.y3,a),b=this.lerp(b,c,a),c=this.lerp(c,d,a);return this.lerp(b,c,a)};f.lerp=function(a,b,c){return a+c*(b-a)};
var na=M(.25,.1,.25,1),oa=M(.42,0,1,1),pa=M(0,0,.58,1),qa=M(.42,0,.58,1),ra={linear:function(a){return a},ease:na,"ease-in":oa,"ease-out":pa,"ease-in-out":qa};function sa(a){if(!a)return null;if("string"==typeof a){if(-1!=a.indexOf("cubic-bezier")){var b=a.match(/cubic-bezier\((.+)\)/);if(b&&(b=b[1].split(",").map(parseFloat),4==b.length)){for(var c=0;4>c;c++)if(isNaN(b[c]))return null;return M(b[0],b[1],b[2],b[3])}return null}return ra[a]}return a};function ta(){}function N(a,b){this.O=a;this.U=b||y(self,"vsync");this.Pa=null;this.G=[]}function ua(a,b,c){var d=va;return(new N(a)).setCurve(d).add(0,b,1).start(c)}N.prototype.setCurve=function(a){a&&(this.Pa=sa(a));return this};N.prototype.add=function(a,b,c,d){this.G.push({delay:a,func:b,duration:c,curve:sa(d)});return this};N.prototype.start=function(a){var b=new O(this.U,this.O,this.G,this.Pa,a);return b};
function O(a,b,c,d,e){this.U=a;this.O=b;this.G=[];for(b=0;b<c.length;b++){var g=c[b];this.G.push({delay:g.delay,func:g.func,duration:g.duration,curve:g.curve||d,started:!1,completed:!1})}this.hb=e;this.T=Date.now();this.S=!0;this.ab={};e=new u;this.aa=e.promise;this.Ga=e.resolve;this.Fa=e.reject;this.cb=this.U.createAnimTask(this.O,{mutate:this.pb.bind(this)});this.U.canAnimate(this.O)?this.cb(this.ab):(t().warn("Animation","cannot animate"),P(this,!1,0))}
O.prototype.then=function(a,b){return a||b?this.aa.then(a,b):this.aa};O.prototype.thenAlways=function(a){a=a||ta;return this.then(a,a)};O.prototype.halt=function(a){P(this,!1,a||0)};function P(a,b,c){if(a.S){a.S=!1;if(0!=c){1<a.G.length&&a.G.sort(function(a,b){return a.delay+a.duration-(b.delay+b.duration)});try{if(0<c)for(c=0;c<a.G.length;c++)a.G[c].func(1,!0);else for(var d=a.G.length-1;0<=d;d--)a.G[d].func(0,!1)}catch(e){t().error("Animation","completion failed: "+e,e),b=!1}}b?a.Ga():a.Fa()}}
O.prototype.pb=function(){if(this.S){for(var a=Date.now(),b=Math.min((a-this.T)/this.hb,1),c=0;c<this.G.length;c++){var d=this.G[c];!d.started&&b>=d.delay&&(d.started=!0)}for(c=0;c<this.G.length;c++)if(d=this.G[c],d.started&&!d.completed)a:{var e,g;if(0<d.duration){if(e=g=Math.min((b-d.delay)/d.duration,1),d.curve&&1!=e)try{e=d.curve(g)}catch(h){t().error("Animation","step curve failed: "+h,h);P(this,!1,0);break a}}else e=g=1;1==g&&(d.completed=!0);try{d.func(e,d.completed)}catch(h){t().error("Animation",
"step mutate failed: "+h,h),P(this,!1,0)}}1==b?P(this,!0,0):this.U.canAnimate(this.O)?this.cb(this.ab):(t().warn("Animation","cancel animation"),P(this,!1,0))}};function Q(a,b){return function(c){return a+(b-a)*c}};var va=M(.4,0,.2,1.4),wa={svg:!0,DIV:!0,"AMP-IMG":!0,"AMP-LAYOUT":!0};function R(a){a=AMP.BaseElement.call(this,a)||this;a.L=null;a.Ia=null;a.pa=0;a.oa=0;a.o=null;a.X=null;a.qa=null;a.m=1;a.Ha=1;a.ya=1;a.V=3;a.Ta=0;a.Ua=0;a.Sa=1;a.C=0;a.D=0;a.I=0;a.J=0;a.Xa=0;a.Ya=0;a.Va=0;a.Wa=0;a.F=null;a.Z=null;a.$a=!1;return a}m(R,AMP.BaseElement);f=R.prototype;
f.buildCallback=function(){var a=this;this.Ia=aa(this.element);var b=this.getRealChildren();q().assert(1==b.length,"amp-pan-zoom should\n  have its target element as the one and only child");q().assert(wa[b[0].tagName],b[0].tagName+" is not supported by amp-pan-zoom");this.element.classList.add("i-amphtml-pan-zoom");this.L=b[0];this.L.classList.add("i-amphtml-pan-zoom-child");this.V=S(this,"max-scale",3);this.Sa=S(this,"initial-scale",1);this.Ta=S(this,"initial-x",0);this.Ua=S(this,"initial-y",0);
this.$a=this.element.hasAttribute("reset-on-resize");this.registerAction("transform",function(b){var c=b.args;if(c){var e=c.scale||1;T(a,e);var g=U(a,c.x||0),h=V(a,c.y||0);return W(a,e,g,h,!0).then(function(){return X(a)})}})};f.onMeasureChanged=function(){this.$a&&Y(this)};f.layoutCallback=function(){return Y(this).then(xa(this))};f.pauseCallback=function(){Y(this);this.F&&(this.F.cleanup(),this.F=null)};f.resumeCallback=function(){this.L&&this.scheduleLayout(this.L);xa(this)};
f.unlayoutCallback=function(){this.F&&(this.F.cleanup(),this.F=null);return!0};f.isLayoutSupported=function(a){return"fixed"==a||"fixed-height"==a||"fill"==a||"responsive"==a};function S(a,b,c){a=a.element;return a.hasAttribute(b)?parseInt(a.getAttribute(b),10):c}
function Y(a){var b=a.L;return a.measureElement(function(){a.pa=a.L.scrollWidth;a.oa=a.L.scrollHeight;var b;b=a.element.getBoundingClientRect();b=da(Number(b.left),Number(b.top),Number(b.width),Number(b.height));a.o=b;b=a.pa/a.oa;var d=Math.min(a.o.width/b,a.o.height),e=Math.min(a.o.height*b,a.o.width);16>=Math.abs(e-a.pa)&&Math.abs(16>=d-a.oa)&&(e=a.pa,d=a.oa);a.X=da(Math.round((a.o.width-e)/2),Math.round((a.o.height-d)/2),Math.round(e),Math.round(d));d=a.o.width/a.o.height;a.V=Math.max(a.V,Math.max(d/
b,b/d));a.Ha=a.m=a.Sa;a.C=a.I=a.Ta;a.D=a.J=a.Ua;T(a,a.m)}).then(function(){return a.mutateElement(function(){ca(b,{width:a.X.width+"px",height:a.X.height+"px"});Z(a)},b)})}function ya(a,b){return a.o.left-a.getViewport().getScrollLeft()-b}
function xa(a){a.F||(a.F=ha(a.element),a.F.onPointerDown(function(){a.Z&&a.Z.halt()}),a.F.onGesture(I,function(b){var c=b.data;b=c.clientY;var d=1==a.m?a.V:a.ya,c=a.o.width/2+ya(a,c.clientX);b=a.o.height/2+(a.o.top-a.getViewport().getScrollTop()-b);za(a,d,c,b,!0).then(function(){return X(a)})}),a.F.onGesture(L,function(b){var c=b.data,d=c.centerClientX,e=c.centerClientY;b=c.last;var g=c.deltaX,h=c.deltaY,c=c.dir;if(0!=c){var h=Math.sqrt(g*g+h*h),c=a.Ha*(1+c*h/100),g=a.o.width/2-d,k=a.o.height/2-e,
g=Math.min(g,h/100*g),h=Math.min(k,h/100*k);za(a,c,g,h,!1)}b&&X(a)}),a.F.onGesture(H,function(b){var c=z(a.win,"click",null,{bubbles:!0});b.data.target.dispatchEvent(c)}))}function Aa(a){a.qa=a.F.onGesture(K,function(b){event.preventDefault();var c=b.data;b=c.last;var d=c.velocityX,e=c.velocityY,g=c.deltaY,c=U(a,a.C+c.deltaX),g=V(a,a.D+g);W(a,a.m,c,g,!1);b&&Ba(a,d,e)})}function U(a,b){var c=.25*a.o.width;return Math.min(Math.max(b,a.Xa-0),a.Va+0)}
function V(a,b){return Math.min(Math.max(b,a.Ya-0),a.Wa+0)}function T(a,b){var c=a.o.height-a.X.height*b;b=a.o.width-a.X.width*b;var d=0<=c?0:c/2,e=0<=c?0:-d,g=0<=b?0:b/2,h=0<=b?0:-g;a.Xa=g;a.Ya=d;a.Va=h;a.Wa=e}function Z(a){var b=a.m,c=a.I,d=a.J,e=a.L;a.mutateElement(function(){var a;a=c;var h=d;"number"==typeof a&&(a+="px");void 0===h?a="translate("+a+")":("number"==typeof h&&(h+="px"),a="translate("+a+", "+h+")");ca(e,{transform:a+" "+("scale("+b+")")})},e)}
function Ca(a,b,c,d){var e=z(a.win,"amp-pan-zoom.transformEnd",{scale:b,x:c,y:d});a.Ia.trigger(a.element,"transformEnd",e,100)}function Ba(a,b,c){a.Z=ka(a.L,a.I,a.J,b,c,function(b,c){b=U(a,b);c=V(a,c);if(1>Math.abs(b-a.I)&&1>Math.abs(c-a.J))return!1;W(a,a.m,b,c,!1);return!0});a.Z.thenAlways(function(){a.Z=null;return Da(a)})}function za(a,b,c,d,e){b=Math.min(Math.max(b,a.ya-.25),a.V+.25);if(b==a.m)return Promise.resolve();T(a,b);c=U(a,a.C+c*b);d=V(a,a.D+d*b);return W(a,b,c,d,e)}
function X(a){return Da(a).then(function(){1>=a.m?a.qa&&(a.qa(),a.qa=null,a.F.removeGesture(K)):Aa(a)})}function W(a,b,c,d,e){var g=b-a.m,h=c-a.I,k=d-a.J,h=Math.sqrt(h*h+k*k),l=e?250*Math.min(1,Math.max(.01*h,Math.abs(g))):0;if(16<l&&e){var p=Q(a.m,b),r=Q(a.I,c),Ea=Q(a.J,d);return ua(a.L,function(b){a.m=p(b);a.I=r(b);a.J=Ea(b);Z(a)},l).thenAlways(function(){a.m=b;a.I=c;a.J=d;Z(a);Ca(a,b,c,d)})}a.m=b;a.I=c;a.J=d;Z(a);return Promise.resolve()}
function Da(a){var b=Math.min(Math.max(a.m,a.ya-0),a.V+0);b!=a.m&&T(a,b);var c=U(a,a.I/a.m*b),d=V(a,a.J/a.m*b);return W(a,b,c,d,!0).then(function(){a.Ha=a.m;a.C=a.I;a.D=a.J;Ca(a,a.m,a.I,a.J)})}(function(a){a.registerElement("amp-pan-zoom",R,".i-amphtml-pan-zoom{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.i-amphtml-pan-zoom-child{position:absolute}\n/*# sourceURL=/extensions/amp-pan-zoom/0.1/amp-pan-zoom.css*/")})(self.AMP);
})});
//# sourceMappingURL=amp-pan-zoom-0.1.js.map

