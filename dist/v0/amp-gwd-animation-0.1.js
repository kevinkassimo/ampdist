(self.AMP=self.AMP||[]).push({n:"amp-gwd-animation",v:"1533591342461",f:(function(AMP,_){
var g;function h(a,b){function c(){}c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a;for(var d in b)if(Object.defineProperties){var e=Object.getOwnPropertyDescriptor(b,d);e&&Object.defineProperty(a,d,e)}else a[d]=b[d]};function k(a){if(!a)return[];for(var b=Array(a.length),c=0;c<a.length;c++)b[c]=a[c];return b};self.log=self.log||{user:null,dev:null,userForEmbed:null};var l=self.log;function m(){if(!l.user)throw Error("failed to call initLogConstructor");return l.user};var p=Object.prototype.hasOwnProperty;function q(a){if(a.nodeType){var b=(a.ownerDocument||a).defaultView;if(b=b!=(b.__AMP_TOP||b)&&r(b,"action")?t(b,"action"):null)return b}b=u(a);b=v(b);return t(b,"action")}function w(a){var b=u(a),b=v(b);return t(b,"gwd")}function u(a){if(a.nodeType){var b=(a.ownerDocument||a).defaultView,b=b.__AMP_TOP||b;a=t(b,"ampdoc").getAmpDoc(a)}return a}function v(a){a=u(a);return a.isSingleDoc()?a.win:a}
function t(a,b){r(a,b);var c=a.services;c||(c=a.services={});var d=c;a=d[b];a.obj||(a.obj=new a.ctor(a.context),a.ctor=null,a.context=null,a.resolve&&a.resolve(a.obj));return a.obj}function r(a,b){a=a.services&&a.services[b];return!(!a||!a.ctor&&!a.obj)};/*
 https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
var x=/(\0)|^(-)$|([\x01-\x1f\x7f]|^-?[0-9])|([\x80-\uffff0-9a-zA-Z_-]+)|[^]/g;function y(a,b,c,d,e){return e?e:b?"\ufffd":d?a.slice(0,-1)+"\\"+a.slice(-1).charCodeAt(0).toString(16)+" ":"\\"+a};var z=["animationend","webkitAnimationEnd"];function A(a){var b=this;this.c=a;this.h=this.o.bind(this);this.c.whenBodyAvailable().then(function(){for(var a=0;a<z.length;a++)b.c.getBody().addEventListener(z[a],b.h,!0);b.setCurrentPage(0)})}g=A.prototype;g.setEnabled=function(a){this.c.getBody().classList.toggle("i-amphtml-gwd-animation-disabled",!a)};
g.setCurrentPage=function(a){var b=this.c.getRootNode().querySelectorAll("."+"gwd-page-wrapper".replace(x,y));if(0!=b.length){var c=this.c.getRootNode().querySelector("."+"gwd-page-wrapper".replace(x,y)+"."+"gwd-play-animation".replace(x,y));c&&C(c);var d=b[a];d?d.classList.add("gwd-play-animation"):m().error("GWD","Could not find page with index "+a+".")}};
function C(a){a.classList.remove("gwd-play-animation");[a].concat(k(a.querySelectorAll("*"))).forEach(function(a){a.classList.remove("gwd-pause-animation");if(a.hasAttribute("data-gwd-label-animation")){var b=a.getAttribute("data-gwd-label-animation");a.classList.remove(b);a.removeAttribute("data-gwd-label-animation")}delete a.__AMP_GWD_GOTO_COUNTERS__})}g.play=function(a){(a=this.getReceiver(a))&&a.classList.remove("gwd-pause-animation")};g.pause=function(a){(a=this.getReceiver(a))&&a.classList.add("gwd-pause-animation")};
g.togglePlay=function(a){(a=this.getReceiver(a))&&a.classList.toggle("gwd-pause-animation")};g.gotoAndPlay=function(a,b){(a=this.getReceiver(a))&&D(a,b)};g.gotoAndPause=function(a,b){var c=this,d=this.getReceiver(a);d&&(D(d,b),this.c.win.setTimeout(function(){c.pause(a)},40))};
g.gotoAndPlayNTimes=function(a,b,c,d){if(0>=c)m().error("GWD","Invalid maxCount parameter: "+c);else if(d){if(a=this.getReceiver(a)){var e=d+"_"+b,f=a.__AMP_GWD_GOTO_COUNTERS__&&p.call(a.__AMP_GWD_GOTO_COUNTERS__,e)?a.__AMP_GWD_GOTO_COUNTERS__[e]:0;f<c&&(D(a,b),a.__AMP_GWD_GOTO_COUNTERS__||(a.__AMP_GWD_GOTO_COUNTERS__={}),p.call(a.__AMP_GWD_GOTO_COUNTERS__,e)||(a.__AMP_GWD_GOTO_COUNTERS__[e]=0),a.__AMP_GWD_GOTO_COUNTERS__[e]=f+1)}}else m().error("GWD","Event name required but not specified.")};
g.getReceiver=function(a){if("document.body"==a)return this.c.getBody();var b=this.c.getRootNode().getElementById(a);if(b&&b.classList)return b;m().error("GWD","Could not get receiver with id "+a+".");return null};function D(a,b){a.classList.remove("gwd-pause-animation");var c=a.getAttribute("data-gwd-label-animation");c&&(a.classList.remove(c),a.removeAttribute("data-gwd-label-animation"));c==b&&(a.offsetWidth=a.offsetWidth);a.classList.add(b);a.setAttribute("data-gwd-label-animation",b)}
g.o=function(a){var b=a.target.getAttribute("data-event-name");if(b){var c=this.c.win;a={eventName:b,sourceEvent:a};var d={detail:a};Object.assign(d,void 0);"function"==typeof c.CustomEvent?c=new c.CustomEvent("gwd.timelineEvent",d):(c=c.document.createEvent("CustomEvent"),c.initCustomEvent("gwd.timelineEvent",!!d.bubbles,!!d.cancelable,a));var e=c;this.c.getRootNode().dispatchEvent(e)}};g.dispose=function(){for(var a=0;a<z.length;a++)this.c.getBody().removeEventListener(z[a],this.h,!0)};var E={play:["args.id"],pause:["args.id"],togglePlay:["args.id"],gotoAndPlay:["args.id","args.label"],gotoAndPause:["args.id","args.label"],gotoAndPlayNTimes:["args.id","args.label","args.N","event.eventName"],setCurrentPage:["args.index"]};function F(a){a=AMP.BaseElement.call(this,a)||this;a.l="";a.j=a.w.bind(a);return a}h(F,AMP.BaseElement);
F.prototype.buildCallback=function(){this.l=this.element.getAttribute("timeline-event-prefix")||"";this.getAmpDoc().getRootNode().addEventListener("gwd.timelineEvent",this.j,!0);var a=this.getAmpDoc().getRootNode().getElementById("pagedeck");if(a){m().assert(this.element.id,"The amp-gwd-animation element must have an id.");var b=this.element.id+".setCurrentPage(index=event.index)",c=this.getAmpDoc(),d=a,e=b,f;f=d.getAttribute("on")||"";var n=f.indexOf("slideChange:");-1!=n?(n+=12,f=f.substr(0,n)+
e+","+f.substr(n)):(f&&(f+=";"),f+="slideChange:"+e);q(c).setActions(d,f)}var c=this.m.bind(this),B;for(B in E)this.registerAction(B,c)};F.prototype.m=function(a){var b;b=a;if("setCurrentPage"==b.method){var c=this.getAmpDoc().getRootNode().getElementById("pagedeck");b=c&&b.source==c}else b=!0;b&&G(this,a)};
function G(a,b){a=m().assert(w(a.getAmpDoc()),"Cannot execute action because the GWD service is not registered.");var c=E[b.method],d=Object.assign({},b),e=c.map(function(a){var b;var c=d;b=a;if("."!=b){b=b.split(".");for(var e=0;e<b.length;e++){var f=b[e];if(f&&c&&void 0!==c[f]&&(null==c||"object"!=typeof c?0:Object.prototype.hasOwnProperty.call(c,f)))c=c[f];else{c=void 0;break}}}b=c;return b});a[b.method].apply(a,e)}
F.prototype.w=function(a){q(this.getAmpDoc()).trigger(this.element,""+this.l+a.detail.eventName,a,100)};F.prototype.detachedCallback=function(){this.getAmpDoc().getRootNode().removeEventListener("gwd.timelineEvent",this.j,!0);return!0};(function(a){a.registerServiceForDoc("gwd",A);a.registerElement("amp-gwd-animation",F,".i-amphtml-gwd-animation-disabled [class*=-animation],.i-amphtml-gwd-animation-disabled [class*=gwdanimation]{-webkit-animation:none!important;animation:none!important}\n/*# sourceURL=/extensions/amp-gwd-animation/0.1/amp-gwd-animation.css*/")})(self.AMP);
})});
//# sourceMappingURL=amp-gwd-animation-0.1.js.map

